(function(z){var v=window.AmazonUIPageJS||window.P,B=v._namespace||v.attributeErrors,d=B?B("AMCharts_AUIBuild"):v;d.guardFatal?d.guardFatal(z)(d,window):d.execute(function(){z(d,window)})})(function(z,v,B){z.register("3p-amcharts",function(){if(!d)var d={themes:{},maps:{},inheriting:{},charts:[],onReadyArray:[],useUTC:!1,updateRate:40,uid:0,lang:{},translations:{},mapTranslations:{},windows:{},initHandlers:[]};d.Class=function(a){var b=function(){arguments[0]!==d.inheriting&&(this.events={},this.construct.apply(this,
arguments))};a.inherits?(b.prototype=new a.inherits(d.inheriting),b.base=a.inherits.prototype,delete a.inherits):(b.prototype.createEvents=function(){for(var a=0,b=arguments.length;a<b;a++)this.events[arguments[a]]=[]},b.prototype.listenTo=function(a,b,c){this.removeListener(a,b,c);a.events[b].push({handler:c,scope:this})},b.prototype.addListener=function(a,b,c){this.removeListener(this,a,b);this.events[a].push({handler:b,scope:c})},b.prototype.removeListener=function(a,b,c){if(a&&a.events)for(a=
a.events[b],b=a.length-1;0<=b;b--)a[b].handler===c&&a.splice(b,1)},b.prototype.fire=function(a,b){for(var c=this.events[a],d=0,k=c.length;d<k;d++){var l=c[d];l.handler.call(l.scope,b)}});for(var c in a)b.prototype[c]=a[c];return b};d.addChart=function(a){d.charts.push(a)};d.removeChart=function(a){for(var b=d.charts,c=b.length-1;0<=c;c--)b[c]==a&&b.splice(c,1)};d.isModern=!0;d.getIEVersion=function(){var a=0;if("Microsoft Internet Explorer"==navigator.appName){var b=navigator.userAgent,c=/MSIE ([0-9]{1,}[.0-9]{0,})/;
null!=c.exec(b)&&(a=parseFloat(RegExp.$1))}else"Netscape"==navigator.appName&&(b=navigator.userAgent,c=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/,null!=c.exec(b)&&(a=parseFloat(RegExp.$1)));return a};d.applyLang=function(a,b){var c=d.translations;b.dayNames=d.dayNames;b.shortDayNames=d.shortDayNames;b.monthNames=d.monthNames;b.shortMonthNames=d.shortMonthNames;c&&(c=c[a])&&(d.lang=c,c.monthNames&&(b.dayNames=c.dayNames,b.shortDayNames=c.shortDayNames,b.monthNames=c.monthNames,b.shortMonthNames=c.shortMonthNames))};
d.IEversion=d.getIEVersion();9>d.IEversion&&0<d.IEversion&&(d.isModern=!1,d.isIE=!0);d.dx=0;d.dy=0;if(document.addEventListener||v.opera)d.isNN=!0,d.isIE=!1,d.dx=.5,d.dy=.5;document.attachEvent&&(d.isNN=!1,d.isIE=!0,d.isModern||(d.dx=0,d.dy=0));v.chrome&&(d.chrome=!0);d.handleResize=function(){for(var a=d.charts,b=0;b<a.length;b++){var c=a[b];c&&c.div&&c.handleResize()}};d.handleMouseUp=function(a){for(var b=d.charts,c=0;c<b.length;c++){var e=b[c];e&&e.handleReleaseOutside(a)}};d.handleMouseMove=
function(a){for(var b=d.charts,c=0;c<b.length;c++){var e=b[c];e&&e.handleMouseMove(a)}};d.handleWheel=function(a){for(var b=d.charts,c=0;c<b.length;c++){var e=b[c];if(e&&e.mouseIsOver){e.mouseWheelScrollEnabled||e.mouseWheelZoomEnabled?e.handleWheel(a):a.stopPropagation&&a.stopPropagation();break}}};d.resetMouseOver=function(){for(var a=d.charts,b=0;b<a.length;b++){var c=a[b];c&&(c.mouseIsOver=!1)}};d.ready=function(a){d.onReadyArray.push(a)};d.handleLoad=function(){d.isReady=!0;for(var a=d.onReadyArray,
b=0;b<a.length;b++){var c=a[b];isNaN(d.processDelay)?c():setTimeout(c,d.processDelay*b)}};d.addInitHandler=function(a,b){d.initHandlers.push({method:a,types:b})};d.callInitHandler=function(a){var b=d.initHandlers;if(d.initHandlers)for(var c=0;c<b.length;c++){var e=b[c];e.types?-1!=e.types.indexOf(a.type)&&e.method(a):e.method(a)}};d.getUniqueId=function(){d.uid++;return"AmChartsEl-"+d.uid};d.isNN&&(document.addEventListener("mousemove",d.handleMouseMove,!0),v.addEventListener("resize",d.handleResize,
!0),document.addEventListener("mouseup",d.handleMouseUp,!0),v.addEventListener("load",d.handleLoad,!0),v.addEventListener("DOMMouseScroll",d.handleWheel,!0),document.addEventListener("mousewheel",d.handleWheel,!0));d.isIE&&(document.attachEvent("onmousemove",d.handleMouseMove),v.attachEvent("onresize",d.handleResize),document.attachEvent("onmouseup",d.handleMouseUp),v.attachEvent("onload",d.handleLoad));d.clear=function(){var a=d.charts;if(a)for(var b=0;b<a.length;b++)a[b].clear();d.charts=null;d.isNN&&
(document.removeEventListener("mousemove",d.handleMouseMove,!0),v.removeEventListener("resize",d.handleResize,!0),document.removeEventListener("mouseup",d.handleMouseUp,!0),v.removeEventListener("load",d.handleLoad,!0),v.removeEventListener("DOMMouseScroll",d.handleWheel,!0),document.removeEventListener("mousewheel",d.handleWheel,!0));d.isIE&&(document.detachEvent("onmousemove",d.handleMouseMove),v.detachEvent("onresize",d.handleResize),document.detachEvent("onmouseup",d.handleMouseUp),v.detachEvent("onload",
d.handleLoad))};d.makeChart=function(a,b,c){var e=b.type,f=b.theme;d.isString(f)&&(f=d.themes[f],b.theme=f);var g;switch(e){case "serial":g=new d.AmSerialChart(f);break;case "xy":g=new d.AmXYChart(f);break;case "pie":g=new d.AmPieChart(f);break;case "radar":g=new d.AmRadarChart(f);break;case "gauge":g=new d.AmAngularGauge(f);break;case "funnel":g=new d.AmFunnelChart(f);break;case "map":g=new d.AmMap(f);break;case "stock":g=new d.AmStockChart(f)}d.extend(g,b);d.isReady?isNaN(c)?g.write(a):setTimeout(function(){d.realWrite(g,
a)},c):d.ready(function(){isNaN(c)?g.write(a):setTimeout(function(){d.realWrite(g,a)},c)});return g};d.realWrite=function(a,b){a.write(b)};d.toBoolean=function(a,b){if(void 0===a)return b;switch(String(a).toLowerCase()){case "true":case "yes":case "1":return!0;case "false":case "no":case "0":case null:return!1;default:return Boolean(a)}};d.removeFromArray=function(a,b){var c;if(void 0!=b&&void 0!=a)for(c=a.length-1;0<=c;c--)a[c]==b&&a.splice(c,1)};d.getDecimals=function(a){var b=0;isNaN(a)||(a=String(a),
-1!=a.indexOf("e-")?b=Number(a.split("-")[1]):-1!=a.indexOf(".")&&(b=a.split(".")[1].length));return b};d.wrappedText=function(a,b,c,e,f,g,h,k,l){var m=d.text(a,b,c,e,f,g,h),n="\n";d.isModern||(n="<br>");if(10<l)return m;if(m){var p=m.getBBox();if(p.width>k){p=Math.ceil(p.width/k);m.remove();for(var m=[],q=0;-1<(index=b.indexOf(" ",q));)m.push(index),q=index+1;Math.round(b.length/2);for(var r,q=0;q<m.length;q+=Math.ceil(m.length/p))r=m[q],b=b.substr(0,r)+n+b.substr(r+1);if(isNaN(r)){if(0==l)for(q=
1;q<p;q++)r=Math.round(b.length/p*q),b=b.substr(0,r)+n+b.substr(r);return d.text(a,b,c,e,f,g,h)}return d.wrappedText(a,b,c,e,f,g,h,k,l+1)}return m}};d.getStyle=function(a,b){var c="";document.defaultView&&document.defaultView.getComputedStyle?c=document.defaultView.getComputedStyle(a,"").getPropertyValue(b):a.currentStyle&&(b=b.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),c=a.currentStyle[b]);return c};d.removePx=function(a){if(void 0!=a)return Number(a.substring(0,a.length-2))};d.getURL=
function(a,b){if(a)if("_self"!=b&&b)if("_top"==b&&v.top)v.top.location.href=a;else if("_parent"==b&&v.parent)v.parent.location.href=a;else if("_blank"==b)v.open(a);else{var c=document.getElementsByName(b)[0];c?c.src=a:(c=d.windows[b])?c.opener&&!c.opener.closed?c.location.href=a:d.windows[b]=v.open(a):d.windows[b]=v.open(a)}else v.location.href=a};d.ifArray=function(a){return a&&0<a.length?!0:!1};d.callMethod=function(a,b){var c;for(c=0;c<b.length;c++){var e=b[c];if(e){if(e[a])e[a]();var f=e.length;
if(0<f){var g;for(g=0;g<f;g++){var d=e[g];if(d&&d[a])d[a]()}}}}};d.toNumber=function(a){return"number"==typeof a?a:Number(String(a).replace(/[^0-9\-.]+/g,""))};d.toColor=function(a){if(""!==a&&void 0!==a)if(-1!=a.indexOf(",")){a=a.split(",");var b;for(b=0;b<a.length;b++){var c=a[b].substring(a[b].length-6,a[b].length);a[b]="#"+c}}else a=a.substring(a.length-6,a.length),a="#"+a;return a};d.toCoordinate=function(a,b,c){var e;void 0!==a&&(a=String(a),c&&c<b&&(b=c),e=Number(a),-1!=a.indexOf("!")&&(e=
b-Number(a.substr(1))),-1!=a.indexOf("%")&&(e=b*Number(a.substr(0,a.length-1))/100));return e};d.fitToBounds=function(a,b,c){a<b&&(a=b);a>c&&(a=c);return a};d.isDefined=function(a){return void 0===a?!1:!0};d.stripNumbers=function(a){return a.replace(/[0-9]+/g,"")};d.roundTo=function(a,b){if(0>b)return a;var c=Math.pow(10,b);return Math.round(a*c)/c};d.toFixed=function(a,b){var c=String(Math.round(a*Math.pow(10,b)));if(0<b){var e=c.length;if(e<b){var f;for(f=0;f<b-e;f++)c="0"+c}e=c.substring(0,c.length-
b);""===e&&(e=0);return e+"."+c.substring(c.length-b,c.length)}return String(c)};d.formatDuration=function(a,b,c,e,f,g){var h=d.intervals,k=g.decimalSeparator;if(a>=h[b].contains){var l=a-Math.floor(a/h[b].contains)*h[b].contains;"ss"==b&&(l=d.formatNumber(l,g),1==l.split(k)[0].length&&(l="0"+l));("mm"==b||"hh"==b)&&10>l&&(l="0"+l);c=l+""+e[b]+""+c;a=Math.floor(a/h[b].contains);b=h[b].nextInterval;return d.formatDuration(a,b,c,e,f,g)}"ss"==b&&(a=d.formatNumber(a,g),1==a.split(k)[0].length&&(a="0"+
a));("mm"==b||"hh"==b)&&10>a&&(a="0"+a);c=a+""+e[b]+""+c;if(h[f].count>h[b].count)for(a=h[b].count;a<h[f].count;a++)b=h[b].nextInterval,"ss"==b||"mm"==b||"hh"==b?c="00"+e[b]+""+c:"DD"==b&&(c="0"+e[b]+""+c);":"==c.charAt(c.length-1)&&(c=c.substring(0,c.length-1));return c};d.formatNumber=function(a,b,c,e,f){a=d.roundTo(a,b.precision);isNaN(c)&&(c=b.precision);var g=b.decimalSeparator;b=b.thousandsSeparator;var h;h=0>a?"-":"";a=Math.abs(a);var k=String(a),l=!1;-1!=k.indexOf("e")&&(l=!0);0<=c&&!l&&(k=
d.toFixed(a,c));var m="";if(l)m=k;else{var k=k.split("."),l=String(k[0]),n;for(n=l.length;0<=n;n-=3)m=n!=l.length?0!==n?l.substring(n-3,n)+b+m:l.substring(n-3,n)+m:l.substring(n-3,n);void 0!==k[1]&&(m=m+g+k[1]);void 0!==c&&0<c&&"0"!=m&&(m=d.addZeroes(m,g,c))}m=h+m;""===h&&!0===e&&0!==a&&(m="+"+m);!0===f&&(m+="%");return m};d.addZeroes=function(a,b,c){a=a.split(b);void 0===a[1]&&0<c&&(a[1]="0");return a[1].length<c?(a[1]+="0",d.addZeroes(a[0]+b+a[1],b,c)):void 0!==a[1]?a[0]+b+a[1]:a[0]};d.scientificToNormal=
function(a){var b;a=String(a).split("e");var c;if("-"==a[1].substr(0,1)){b="0.";for(c=0;c<Math.abs(Number(a[1]))-1;c++)b+="0";b+=a[0].split(".").join("")}else{var e=0;b=a[0].split(".");b[1]&&(e=b[1].length);b=a[0].split(".").join("");for(c=0;c<Math.abs(Number(a[1]))-e;c++)b+="0"}return b};d.toScientific=function(a,b){if(0===a)return"0";var c=Math.floor(Math.log(Math.abs(a))*Math.LOG10E);Math.pow(10,c);mantissa=String(mantissa).split(".").join(b);return String(mantissa)+"e"+c};d.randomColor=function(){return"#"+
("00000"+(16777216*Math.random()<<0).toString(16)).substr(-6)};d.hitTest=function(a,b,c){var e=!1,f=a.x,g=a.x+a.width,h=a.y,k=a.y+a.height,l=d.isInRectangle;e||(e=l(f,h,b));e||(e=l(f,k,b));e||(e=l(g,h,b));e||(e=l(g,k,b));e||!0===c||(e=d.hitTest(b,a,!0));return e};d.isInRectangle=function(a,b,c){return a>=c.x-5&&a<=c.x+c.width+5&&b>=c.y-5&&b<=c.y+c.height+5?!0:!1};d.isPercents=function(a){if(-1!=String(a).indexOf("%"))return!0};d.findPosX=function(a){var b=a,c=a.offsetLeft;if(a.offsetParent){for(;a=
a.offsetParent;)c+=a.offsetLeft;for(;(b=b.parentNode)&&b!=document.body;)c-=b.scrollLeft||0}return c};d.findPosY=function(a){var b=a,c=a.offsetTop;if(a.offsetParent){for(;a=a.offsetParent;)c+=a.offsetTop;for(;(b=b.parentNode)&&b!=document.body;)c-=b.scrollTop||0}return c};d.findIfFixed=function(a){if(a.offsetParent)for(;a=a.offsetParent;)if("fixed"==d.getStyle(a,"position"))return!0;return!1};d.findIfAuto=function(a){return a.style&&"auto"==d.getStyle(a,"overflow")?!0:a.parentNode?d.findIfAuto(a.parentNode):
!1};d.findScrollLeft=function(a,b){a.scrollLeft&&(b+=a.scrollLeft);return a.parentNode?d.findScrollLeft(a.parentNode,b):b};d.findScrollTop=function(a,b){a.scrollTop&&(b+=a.scrollTop);return a.parentNode?d.findScrollTop(a.parentNode,b):b};d.formatValue=function(a,b,c,e,f,g,h,k){if(b){void 0===f&&(f="");var l;for(l=0;l<c.length;l++){var m=c[l],n=b[m];void 0!==n&&(n=g?d.addPrefix(n,k,h,e):d.formatNumber(n,e),a=a.replace(new RegExp("\\[\\["+f+""+m+"\\]\\]","g"),n))}}return a};d.formatDataContextValue=
function(a,b){if(a){var c=a.match(/\[\[.*?\]\]/g),e;for(e=0;e<c.length;e++){var f=c[e],f=f.substr(2,f.length-4);void 0!==b[f]&&(a=a.replace(new RegExp("\\[\\["+f+"\\]\\]","g"),b[f]))}}return a};d.massReplace=function(a,b){for(var c in b)if(b.hasOwnProperty(c)){var e=b[c];void 0===e&&(e="");a=a.replace(c,e)}return a};d.cleanFromEmpty=function(a){return a.replace(/\[\[[^\]]*\]\]/g,"")};d.addPrefix=function(a,b,c,e,f){var g=d.formatNumber(a,e),h="",k,l,m;if(0===a)return"0";0>a&&(h="-");a=Math.abs(a);
if(1<a)for(k=b.length-1;-1<k;k--){if(a>=b[k].number&&(l=a/b[k].number,m=Number(e.precision),1>m&&(m=1),c=d.roundTo(l,m),m=d.formatNumber(c,{precision:-1,decimalSeparator:e.decimalSeparator,thousandsSeparator:e.thousandsSeparator}),!f||l==c)){g=h+""+m+""+b[k].prefix;break}}else for(k=0;k<c.length;k++)if(a<=c[k].number){l=a/c[k].number;m=Math.abs(Math.round(Math.log(l)*Math.LOG10E));l=d.roundTo(l,m);g=h+""+l+""+c[k].prefix;break}return g};d.remove=function(a){a&&a.remove()};d.recommended=function(){var a=
"js";document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")||swfobject&&swfobject.hasFlashPlayerVersion("8")&&(a="flash");return a};d.getEffect=function(a){">"==a&&(a="easeOutSine");"<"==a&&(a="easeInSine");"elastic"==a&&(a="easeOutElastic");return a};d.getObjById=function(a,b){var c,e;for(e=0;e<a.length;e++){var f=a[e];f.id==b&&(c=f)}return c};d.applyTheme=function(a,b,c){b||(b=d.theme);b&&b[c]&&d.extend(a,b[c])};d.isString=function(a){return"string"==typeof a?
!0:!1};d.extend=function(a,b,c){for(var e in b)c?a.hasOwnProperty(e)||(a[e]=b[e]):a[e]=b[e];return a};d.copyProperties=function(a,b){for(var c in a)a.hasOwnProperty(c)&&"events"!=c&&void 0!==a[c]&&"function"!=typeof a[c]&&"cname"!=c&&(b[c]=a[c])};d.processObject=function(a,b,c){!1===a instanceof b&&(a=d.extend(new b(c),a));return a};d.fixNewLines=function(a){var b=/\n/g;a&&(a=a.replace(b,"<br />"));return a};d.fixBrakes=function(a){if(d.isModern){var b=/<br>/g;a&&(a=a.replace(b,"\n"))}else a=d.fixNewLines(a);
return a};d.deleteObject=function(a,b){if(a){if(void 0===b||null===b)b=20;if(0!==b)if("[object Array]"===Object.prototype.toString.call(a))for(var c=0;c<a.length;c++)d.deleteObject(a[c],b-1),a[c]=null;else if(a&&!a.tagName)try{for(c in a)a[c]&&("object"==typeof a[c]&&d.deleteObject(a[c],b-1),"function"!=typeof a[c]&&(a[c]=null))}catch(e){}}};d.bounce=function(a,b,c,e,f){return(b/=f)<1/2.75?7.5625*e*b*b+c:b<2/2.75?e*(7.5625*(b-=1.5/2.75)*b+.75)+c:b<2.5/2.75?e*(7.5625*(b-=2.25/2.75)*b+.9375)+c:e*(7.5625*
(b-=2.625/2.75)*b+.984375)+c};d.easeInSine=function(a,b,c,e,f){return-e*Math.cos(b/f*(Math.PI/2))+e+c};d.easeOutSine=function(a,b,c,e,f){return e*Math.sin(b/f*(Math.PI/2))+c};d.easeOutElastic=function(a,b,c,e,f){a=1.70158;var g=0,d=e;if(0===b)return c;if(1==(b/=f))return c+e;g||(g=.3*f);d<Math.abs(e)?(d=e,a=g/4):a=g/(2*Math.PI)*Math.asin(e/d);return d*Math.pow(2,-10*b)*Math.sin(2*(b*f-a)*Math.PI/g)+e+c};d.AxisBase=d.Class({construct:function(a){this.createEvents("clickItem","rollOverItem","rollOutItem");
this.viY=this.viX=this.y=this.x=this.dy=this.dx=0;this.axisThickness=1;this.axisColor="#000000";this.axisAlpha=1;this.gridCount=this.tickLength=5;this.gridAlpha=.15;this.gridThickness=1;this.gridColor="#000000";this.dashLength=0;this.labelFrequency=1;this.showLastLabel=this.showFirstLabel=!0;this.fillColor="#FFFFFF";this.fillAlpha=0;this.labelsEnabled=!0;this.labelRotation=0;this.autoGridCount=!0;this.valueRollOverColor="#CC0000";this.offset=0;this.guides=[];this.visible=!0;this.counter=0;this.guides=
[];this.ignoreAxisWidth=this.inside=!1;this.minHorizontalGap=75;this.minVerticalGap=35;this.titleBold=!0;this.minorGridEnabled=!1;this.minorGridAlpha=.07;this.autoWrap=!1;this.titleAlign="middle";this.labelOffset=0;d.applyTheme(this,a,"AxisBase")},zoom:function(a,b){this.start=a;this.end=b;this.dataChanged=!0;this.draw()},fixAxisPosition:function(){var a=this.position;"H"==this.orientation?("left"==a&&(a="bottom"),"right"==a&&(a="top")):("bottom"==a&&(a="left"),"top"==a&&(a="right"));this.position=
a},draw:function(){var a=this.chart;this.allLabels=[];this.counter=0;this.destroy();this.fixAxisPosition();this.labels=[];var b=a.container,c=b.set();a.gridSet.push(c);this.set=c;b=b.set();a.axesLabelsSet.push(b);this.labelsSet=b;this.axisLine=new this.axisRenderer(this);this.autoGridCount?("V"==this.orientation?(a=this.height/this.minVerticalGap,3>a&&(a=3)):a=this.width/this.minHorizontalGap,this.gridCountR=Math.max(a,1)):this.gridCountR=this.gridCount;this.axisWidth=this.axisLine.axisWidth;this.addTitle()},
setOrientation:function(a){this.orientation=a?"H":"V"},addTitle:function(){var a=this.title;if(a){var b=this.chart,c=this.titleColor;void 0===c&&(c=b.color);var e=this.titleFontSize;isNaN(e)&&(e=b.fontSize+1);this.titleLabel=d.text(b.container,a,c,b.fontFamily,e,this.titleAlign,this.titleBold)}},positionTitle:function(){var a=this.titleLabel;if(a){var b,c,e=this.labelsSet,f={};0<e.length()?f=e.getBBox():(f.x=0,f.y=0,f.width=this.viW,f.height=this.viH);e.push(a);var e=f.x,g=f.y;d.VML&&(this.rotate?
e-=this.x:g-=this.y);var h=f.width,f=f.height,k=this.viW,l=this.viH,m=0,n=a.getBBox().height/2,p=this.inside,q=this.titleAlign;switch(this.position){case "top":b="left"==q?-1:"right"==q?k:k/2;c=g-10-n;break;case "bottom":b="left"==q?-1:"right"==q?k:k/2;c=g+f+10+n;break;case "left":b=e-10-n;p&&(b-=5);c="left"==q?l+1:"right"==q?-1:l/2;m=-90;break;case "right":b=e+h+10+n-3,p&&(b+=7),c="left"==q?l+2:"right"==q?-2:l/2,m=-90}this.marginsChanged?(a.translate(b,c),this.tx=b,this.ty=c):a.translate(this.tx,
this.ty);this.marginsChanged=!1;0!==m&&a.rotate(m)}},pushAxisItem:function(a,b){var c=this,e=a.graphics();0<e.length()&&(b?c.labelsSet.push(e):c.set.push(e));if(e=a.getLabel())this.labelsSet.push(e),e.click(function(b){c.handleMouse(b,a,"clickItem")}).mouseover(function(b){c.handleMouse(b,a,"rollOverItem")}).mouseout(function(b){c.handleMouse(b,a,"rollOutItem")})},handleMouse:function(a,b,c){this.fire(c,{type:c,value:b.value,serialDataItem:b.serialDataItem,axis:this,target:b.label,chart:this.chart,
event:a})},addGuide:function(a){for(var b=this.guides,c=!1,e=0;e<b.length;e++)b[e]==a&&(c=!0);c||b.push(a)},removeGuide:function(a){var b=this.guides,c;for(c=0;c<b.length;c++)b[c]==a&&b.splice(c,1)},handleGuideOver:function(a){clearTimeout(this.chart.hoverInt);var b=a.graphics.getBBox(),c=b.x+b.width/2,b=b.y+b.height/2,e=a.fillColor;void 0===e&&(e=a.lineColor);this.chart.showBalloon(a.balloonText,e,!0,c,b)},handleGuideOut:function(a){this.chart.hideBalloon()},addEventListeners:function(a,b){var c=
this;a.mouseover(function(){c.handleGuideOver(b)});a.mouseout(function(){c.handleGuideOut(b)})},getBBox:function(){var a=this.labelsSet.getBBox();d.VML||(a={x:a.x+this.x,y:a.y+this.y,width:a.width,height:a.height});return a},destroy:function(){d.remove(this.set);d.remove(this.labelsSet);var a=this.axisLine;a&&d.remove(a.set);d.remove(this.grid0)}});d.ValueAxis=d.Class({inherits:d.AxisBase,construct:function(a){this.cname="ValueAxis";this.createEvents("axisChanged","logarithmicAxisFailed","axisSelfZoomed",
"axisZoomed");d.ValueAxis.base.construct.call(this,a);this.dataChanged=!0;this.stackType="none";this.position="left";this.unitPosition="right";this.recalculateToPercents=this.includeHidden=this.includeGuidesInMinMax=this.integersOnly=!1;this.durationUnits={DD:"d. ",hh:":",mm:":",ss:""};this.scrollbar=!1;this.baseValue=0;this.radarCategoriesEnabled=!0;this.gridType="polygons";this.useScientificNotation=!1;this.axisTitleOffset=10;this.minMaxMultiplier=1;this.logGridLimit=2;this.treatZeroAs=0;d.applyTheme(this,
a,this.cname)},updateData:function(){0>=this.gridCountR&&(this.gridCountR=1);this.totals=[];this.data=this.chart.chartData;var a=this.chart;"xy"!=a.type&&(this.stackGraphs("smoothedLine"),this.stackGraphs("line"),this.stackGraphs("column"),this.stackGraphs("step"));this.recalculateToPercents&&this.recalculate();this.synchronizationMultiplier&&this.synchronizeWith?(d.isString(this.synchronizeWith)&&(this.synchronizeWith=a.getValueAxisById(this.synchronizeWith)),this.synchronizeWith&&(this.synchronizeWithAxis(this.synchronizeWith),
this.foundGraphs=!0)):(this.foundGraphs=!1,this.getMinMax())},draw:function(){d.ValueAxis.base.draw.call(this);var a=this.chart,b=this.set;"duration"==this.type&&(this.duration="ss");!0===this.dataChanged&&(this.updateData(),this.dataChanged=!1);if(this.logarithmic){var c=this.treatZeroAs,e=this.getMin(0,this.data.length-1);0<c&&0==e&&(this.minReal=e=c);if(0>=e||0>=this.minimum){this.fire("logarithmicAxisFailed",{type:"logarithmicAxisFailed",chart:a});return}}this.grid0=null;var f,g,h=a.dx,k=a.dy,
c=!1,e=this.logarithmic;if(isNaN(this.min)||isNaN(this.max)||!this.foundGraphs||Infinity==this.min||-Infinity==this.max)c=!0;else{var l=this.labelFrequency,m=this.showFirstLabel,n=this.showLastLabel,p=1,q=0,r=Math.round((this.max-this.min)/this.step)+1,t;!0===e?(t=Math.log(this.max)*Math.LOG10E-Math.log(this.minReal)*Math.LOG10E,this.stepWidth=this.axisWidth/t,t>this.logGridLimit&&(r=Math.ceil(Math.log(this.max)*Math.LOG10E)+1,q=Math.round(Math.log(this.minReal)*Math.LOG10E),r>this.gridCountR&&(p=
Math.ceil(r/this.gridCountR)))):this.stepWidth=this.axisWidth/(this.max-this.min);var u=0;1>this.step&&-1<this.step&&(u=d.getDecimals(this.step));this.integersOnly&&(u=0);u>this.maxDecCount&&(u=this.maxDecCount);var A=this.precision;isNaN(A)||(u=A);this.max=d.roundTo(this.max,this.maxDecCount);this.min=d.roundTo(this.min,this.maxDecCount);g={};g.precision=u;g.decimalSeparator=a.nf.decimalSeparator;g.thousandsSeparator=a.nf.thousandsSeparator;this.numberFormatter=g;var y,x=this.guides;f=x.length;if(0<
f){var w=this.fillAlpha;for(g=this.fillAlpha=0;g<f;g++){var G=x[g],v=NaN,O=G.above;isNaN(G.toValue)||(v=this.getCoordinate(G.toValue),y=new this.axisItemRenderer(this,v,"",!0,NaN,NaN,G),this.pushAxisItem(y,O));var E=NaN;isNaN(G.value)||(E=this.getCoordinate(G.value),y=new this.axisItemRenderer(this,E,G.label,!0,NaN,(v-E)/2,G),this.pushAxisItem(y,O));isNaN(v-E)||(y=new this.guideFillRenderer(this,E,v,G),this.pushAxisItem(y,O),y=y.graphics(),G.graphics=y,G.balloonText&&this.addEventListeners(y,G))}this.fillAlpha=
w}this.exponential=!1;for(g=q;g<r;g+=p)x=d.roundTo(this.step*g+this.min,u),-1!=String(x).indexOf("e")&&(this.exponential=!0,String(x).split("e"));this.duration&&(this.maxInterval=d.getMaxInterval(this.max,this.duration));var u=this.step,D,x=this.minorGridAlpha;this.minorGridEnabled&&(D=this.getMinorGridStep(u,this.stepWidth*u));for(g=q;g<r;g+=p)if(q=u*g+this.min,e&&this.max-this.min>5*this.min&&(q-=this.min),q=d.roundTo(q,this.maxDecCount+1),!this.integersOnly||Math.round(q)==q)if(isNaN(A)||Number(d.toFixed(q,
A))==q){!0===e&&(0===q&&(q=this.minReal),t>this.logGridLimit&&(q=Math.pow(10,g)));y=this.formatValue(q,!1,g);Math.round(g/l)!=g/l&&(y=void 0);if(0===g&&!m||g==r-1&&!n)y=" ";f=this.getCoordinate(q);y=new this.axisItemRenderer(this,f,y,void 0,void 0,void 0,void 0,this.boldLabels);this.pushAxisItem(y);if(q==this.baseValue&&"radar"!=a.type){var F,z,G=this.viW,O=this.viH;y=this.viX;w=this.viY;"H"==this.orientation?0<=f&&f<=G+1&&(F=[f,f,f+h],z=[O,0,k]):0<=f&&f<=O+1&&(F=[0,G,G+h],z=[f,f,f+k]);F&&(f=d.fitToBounds(2*
this.gridAlpha,0,1),f=d.line(a.container,F,z,this.gridColor,f,1,this.dashLength),f.translate(y,w),this.grid0=f,a.axesSet.push(f),f.toBack())}if(!isNaN(D)&&0<x&&g<r-1){y=this.gridAlpha;this.gridAlpha=this.minorGridAlpha;for(f=1;f<u/D;f++)w=this.getCoordinate(q+D*f),w=new this.axisItemRenderer(this,w,"",!1,0,0,!1,!1,0,!0),this.pushAxisItem(w);this.gridAlpha=y}}t=this.baseValue;this.min>this.baseValue&&this.max>this.baseValue&&(t=this.min);this.min<this.baseValue&&this.max<this.baseValue&&(t=this.max);
e&&t<this.minReal&&(t=this.minReal);this.baseCoord=this.getCoordinate(t);t={type:"axisChanged",target:this,chart:a};t.min=e?this.minReal:this.min;t.max=this.max;this.fire("axisChanged",t);this.axisCreated=!0}e=this.axisLine.set;t=this.labelsSet;this.positionTitle();"radar"!=a.type?(a=this.viX,D=this.viY,b.translate(a,D),t.translate(a,D)):e.toFront();!this.visible||c?(b.hide(),e.hide(),t.hide()):(b.show(),e.show(),t.show());this.axisY=this.y-this.viY;this.axisX=this.x-this.viX},formatValue:function(a,
b,c){var e=this.exponential,f=this.logarithmic,g=this.numberFormatter,h=this.chart;!0===this.logarithmic&&(e=-1!=String(a).indexOf("e")?!0:!1);this.useScientificNotation&&(e=!0);this.usePrefixes&&(e=!1);e?(valueText=-1==String(a).indexOf("e")?a.toExponential(15):String(a),c=valueText.split("e"),b=Number(c[0]),c=Number(c[1]),b=d.roundTo(b,14),10==b&&(b=1,c+=1),valueText=b+"e"+c,0===a&&(valueText="0"),1==a&&(valueText="1")):(f&&(e=String(a).split("."),e[1]?(g.precision=e[1].length,0>c&&(g.precision=
Math.abs(c))):g.precision=-1),valueText=this.usePrefixes?d.addPrefix(a,h.prefixesOfBigNumbers,h.prefixesOfSmallNumbers,g,!b):d.formatNumber(a,g,g.precision));this.duration&&(valueText=d.formatDuration(a,this.duration,"",this.durationUnits,this.maxInterval,g));this.recalculateToPercents?valueText+="%":(g=this.unit)&&(valueText="left"==this.unitPosition?g+valueText:valueText+g);this.labelFunction&&(valueText=this.labelFunction(a,valueText,this).toString());return valueText},getMinorGridStep:function(a,
b){var c=[5,4,2];60>b&&c.shift();for(var e=Math.floor(Math.log(Math.abs(a))*Math.LOG10E),f=0;f<c.length;f++){var g=a/c[f],d=Math.floor(Math.log(Math.abs(g))*Math.LOG10E);if(!(0<Math.abs(e-d)))if(1>a){if(d=Math.pow(10,-d)*g,d==Math.round(d))return g}else if(g==Math.round(g))return g}},stackGraphs:function(a){var b=this.stackType;"stacked"==b&&(b="regular");"line"==b&&(b="none");"100% stacked"==b&&(b="100%");this.stackType=b;var c=[],e=[],f=[],g=[],h,k=this.chart.graphs,l,m,n,p,q=this.baseValue,r=!1;
if("line"==a||"step"==a||"smoothedLine"==a)r=!0;if(r&&("regular"==b||"100%"==b))for(p=0;p<k.length;p++)n=k[p],n.hidden||(m=n.type,n.chart==this.chart&&n.valueAxis==this&&a==m&&n.stackable&&(l&&(n.stackGraph=l),l=n));for(l=this.start;l<=this.end;l++){var t=0;for(p=0;p<k.length;p++)if(n=k[p],n.hidden)n.newStack&&(f[l]=NaN,e[l]=NaN);else if(m=n.type,n.chart==this.chart&&n.valueAxis==this&&a==m&&n.stackable)if(m=this.data[l].axes[this.id].graphs[n.id],h=m.values.value,isNaN(h))n.newStack&&(f[l]=NaN,e[l]=
NaN);else{var u=d.getDecimals(h);t<u&&(t=u);isNaN(g[l])?g[l]=Math.abs(h):g[l]+=Math.abs(h);g[l]=d.roundTo(g[l],t);u=n.fillToGraph;r&&u&&(u=this.data[l].axes[this.id].graphs[u.id])&&(m.values.open=u.values.value);"regular"==b&&(r&&(isNaN(c[l])?(c[l]=h,m.values.close=h,m.values.open=this.baseValue):(isNaN(h)?m.values.close=c[l]:m.values.close=h+c[l],m.values.open=c[l],c[l]=m.values.close)),"column"==a&&(n.newStack&&(f[l]=NaN,e[l]=NaN),m.values.close=h,0>h?(m.values.close=h,isNaN(e[l])?m.values.open=
q:(m.values.close+=e[l],m.values.open=e[l]),e[l]=m.values.close):(m.values.close=h,isNaN(f[l])?m.values.open=q:(m.values.close+=f[l],m.values.open=f[l]),f[l]=m.values.close)))}}for(l=this.start;l<=this.end;l++)for(p=0;p<k.length;p++)(n=k[p],n.hidden)?n.newStack&&(f[l]=NaN,e[l]=NaN):(m=n.type,n.chart==this.chart&&n.valueAxis==this&&a==m&&n.stackable&&(m=this.data[l].axes[this.id].graphs[n.id],h=m.values.value,isNaN(h)||(c=h/g[l]*100,m.values.percents=c,m.values.total=g[l],n.newStack&&(f[l]=NaN,e[l]=
NaN),"100%"==b&&(isNaN(e[l])&&(e[l]=0),isNaN(f[l])&&(f[l]=0),0>c?(m.values.close=d.fitToBounds(c+e[l],-100,100),m.values.open=e[l],e[l]=m.values.close):(m.values.close=d.fitToBounds(c+f[l],-100,100),m.values.open=f[l],f[l]=m.values.close)))))},recalculate:function(){var a=this.chart,b=a.graphs,c;for(c=0;c<b.length;c++){var e=b[c];if(e.valueAxis==this){var f="value";if("candlestick"==e.type||"ohlc"==e.type)f="open";var g,h,k=this.end+2,k=d.fitToBounds(this.end+1,0,this.data.length-1),l=this.start;
0<l&&l--;var m;h=this.start;e.compareFromStart&&(h=0);if(!isNaN(a.startTime)&&(m=a.categoryAxis)){minDuration=m.minDuration();var n=new Date(a.startTime+minDuration/2),p=d.resetDateToMin(new Date(a.startTime),m.minPeriod).getTime();d.resetDateToMin(new Date(n),m.minPeriod).getTime()>p&&h++}if(m=a.recalculateFromDate)a.dataDateFormat&&(m=d.stringToDate(m,a.dataDateFormat)),h=a.getClosestIndex(a.chartData,"time",m.getTime(),!0,0,a.chartData.length),k=a.chartData.length-1;for(m=h;m<=k&&(h=this.data[m].axes[this.id].graphs[e.id],
g=h.values[f],isNaN(g));m++);this.recBaseValue=g;for(f=l;f<=k;f++){h=this.data[f].axes[this.id].graphs[e.id];h.percents={};var l=h.values,q;for(q in l)h.percents[q]="percents"!=q?l[q]/g*100-100:l[q]}}}},getMinMax:function(){var a=!1,b=this.chart,c=b.graphs,e;for(e=0;e<c.length;e++){var f=c[e].type;("line"==f||"step"==f||"smoothedLine"==f)&&this.expandMinMax&&(a=!0)}a&&(0<this.start&&this.start--,this.end<this.data.length-1&&this.end++);"serial"==b.type&&(!0!==b.categoryAxis.parseDates||a||this.end<
this.data.length-1&&this.end++);a=this.minMaxMultiplier;this.min=this.getMin(this.start,this.end);this.max=this.getMax();a=(this.max-this.min)*(a-1);this.min-=a;this.max+=a;a=this.guides.length;if(this.includeGuidesInMinMax&&0<a)for(b=0;b<a;b++)c=this.guides[b],c.toValue<this.min&&(this.min=c.toValue),c.value<this.min&&(this.min=c.value),c.toValue>this.max&&(this.max=c.toValue),c.value>this.max&&(this.max=c.value);isNaN(this.minimum)||(this.min=this.minimum);isNaN(this.maximum)||(this.max=this.maximum);
this.min>this.max&&(a=this.max,this.max=this.min,this.min=a);isNaN(this.minTemp)||(this.min=this.minTemp);isNaN(this.maxTemp)||(this.max=this.maxTemp);this.minReal=this.min;this.maxReal=this.max;0===this.min&&0===this.max&&(this.max=9);this.min>this.max&&(this.min=this.max-1);a=this.min;b=this.max;c=this.max-this.min;e=0===c?Math.pow(10,Math.floor(Math.log(Math.abs(this.max))*Math.LOG10E))/10:Math.pow(10,Math.floor(Math.log(Math.abs(c))*Math.LOG10E))/10;isNaN(this.maximum)&&isNaN(this.maxTemp)&&(this.max=
Math.ceil(this.max/e)*e+e);isNaN(this.minimum)&&isNaN(this.minTemp)&&(this.min=Math.floor(this.min/e)*e-e);0>this.min&&0<=a&&(this.min=0);0<this.max&&0>=b&&(this.max=0);"100%"==this.stackType&&(this.min=0>this.min?-100:0,this.max=0>this.max?0:100);c=this.max-this.min;e=Math.pow(10,Math.floor(Math.log(Math.abs(c))*Math.LOG10E))/10;this.step=Math.ceil(c/this.gridCountR/e)*e;c=Math.pow(10,Math.floor(Math.log(Math.abs(this.step))*Math.LOG10E));c=this.fixStepE(c);e=Math.ceil(this.step/c);5<e&&(e=10);5>=
e&&2<e&&(e=5);this.step=Math.ceil(this.step/(c*e))*c*e;1>c?(this.maxDecCount=Math.abs(Math.log(Math.abs(c))*Math.LOG10E),this.maxDecCount=Math.round(this.maxDecCount),this.step=d.roundTo(this.step,this.maxDecCount+1)):this.maxDecCount=0;this.min=this.step*Math.floor(this.min/this.step);this.max=this.step*Math.ceil(this.max/this.step);0>this.min&&0<=a&&(this.min=0);0<this.max&&0>=b&&(this.max=0);1<this.minReal&&1<this.max-this.minReal&&(this.minReal=Math.floor(this.minReal));c=Math.pow(10,Math.floor(Math.log(Math.abs(this.minReal))*
Math.LOG10E));0===this.min&&(this.minReal=c);0===this.min&&1<this.minReal&&(this.minReal=1);0<this.min&&0<this.minReal-this.step&&(this.minReal=this.min+this.step<this.minReal?this.min+this.step:this.min);c=Math.log(b)*Math.LOG10E-Math.log(a)*Math.LOG10E;this.logarithmic&&(2<c?(this.minReal=this.min=Math.pow(10,Math.floor(Math.log(Math.abs(a))*Math.LOG10E)),this.max=Math.pow(10,Math.ceil(Math.log(Math.abs(b))*Math.LOG10E))):(b=Math.pow(10,Math.floor(Math.log(Math.abs(this.min))*Math.LOG10E))/10,a=
Math.pow(10,Math.floor(Math.log(Math.abs(a))*Math.LOG10E))/10,b<a&&(this.minReal=this.min=10*a)))},fixStepE:function(a){a=a.toExponential(0).split("e");var b=Number(a[1]);9==Number(a[0])&&b++;return this.generateNumber(1,b)},generateNumber:function(a,b){var c="",e;e=0>b?Math.abs(b)-1:Math.abs(b);var f;for(f=0;f<e;f++)c+="0";return 0>b?Number("0."+c+String(a)):Number(String(a)+c)},getMin:function(a,b){var c,e;for(e=a;e<=b;e++){var f=this.data[e].axes[this.id].graphs,g;for(g in f)if(f.hasOwnProperty(g)){var d=
this.chart.getGraphById(g);if(d.includeInMinMax&&(!d.hidden||this.includeHidden)){isNaN(c)&&(c=Infinity);this.foundGraphs=!0;d=f[g].values;this.recalculateToPercents&&(d=f[g].percents);var k;if(this.minMaxField)k=d[this.minMaxField],k<c&&(c=k);else for(var l in d)d.hasOwnProperty(l)&&"percents"!=l&&"total"!=l&&(k=d[l],k<c&&(c=k))}}}return c},getMax:function(){var a,b;for(b=this.start;b<=this.end;b++){var c=this.data[b].axes[this.id].graphs,e;for(e in c)if(c.hasOwnProperty(e)){var f=this.chart.getGraphById(e);
if(f.includeInMinMax&&(!f.hidden||this.includeHidden)){isNaN(a)&&(a=-Infinity);this.foundGraphs=!0;f=c[e].values;this.recalculateToPercents&&(f=c[e].percents);var g;if(this.minMaxField)g=f[this.minMaxField],g>a&&(a=g);else for(var d in f)f.hasOwnProperty(d)&&"percents"!=d&&"total"!=d&&(g=f[d],g>a&&(a=g))}}}return a},dispatchZoomEvent:function(a,b){var c={type:"axisZoomed",startValue:a,endValue:b,target:this,chart:this.chart};this.fire(c.type,c)},zoomToValues:function(a,b){if(b<a){var c=b;b=a;a=c}a<
this.min&&(a=this.min);b>this.max&&(b=this.max);c={type:"axisSelfZoomed"};c.chart=this.chart;c.valueAxis=this;c.multiplier=this.axisWidth/Math.abs(this.getCoordinate(b)-this.getCoordinate(a));c.position="V"==this.orientation?this.reversed?this.getCoordinate(a):this.getCoordinate(b):this.reversed?this.getCoordinate(b):this.getCoordinate(a);this.fire(c.type,c)},coordinateToValue:function(a){if(isNaN(a))return NaN;var b=this.axisWidth,c=this.stepWidth,e=this.reversed,f=this.rotate,g=this.min,d=this.minReal;
return!0===this.logarithmic?Math.pow(10,(f?!0===e?(b-a)/c:a/c:!0===e?a/c:(b-a)/c)+Math.log(d)*Math.LOG10E):!0===e?f?g-(a-b)/c:a/c+g:f?a/c+g:g-(a-b)/c},getCoordinate:function(a){if(isNaN(a))return NaN;var b=this.rotate,c=this.reversed,e=this.axisWidth,f=this.stepWidth,g=this.min,d=this.minReal;!0===this.logarithmic?(0==a&&(a=this.treatZeroAs),a=Math.log(a)*Math.LOG10E-Math.log(d)*Math.LOG10E,b=b?!0===c?e-f*a:f*a:!0===c?f*a:e-f*a):b=!0===c?b?e-f*(a-g):f*(a-g):b?f*(a-g):e-f*(a-g);b=this.rotate?b+(this.x-
this.viX):b+(this.y-this.viY);1E7<Math.abs(b)&&(b=1E7*(b/Math.abs(b)));return Math.round(b)},synchronizeWithAxis:function(a){this.synchronizeWith=a;this.listenTo(this.synchronizeWith,"axisChanged",this.handleSynchronization)},handleSynchronization:function(a){var b=this.synchronizeWith;a=b.min;var c=b.max,b=b.step,e=this.synchronizationMultiplier;e&&(this.min=a*e,this.max=c*e,this.step=b*e,a=Math.pow(10,Math.floor(Math.log(Math.abs(this.step))*Math.LOG10E)),a=Math.abs(Math.log(Math.abs(a))*Math.LOG10E),
this.maxDecCount=Math.round(a),this.draw())}});d.RecAxis=d.Class({construct:function(a){var b=a.chart,c=a.axisThickness,e=a.axisColor,f=a.axisAlpha,g=a.offset,h=a.dx,k=a.dy,l=a.viX,m=a.viY,n=a.viH,p=a.viW,q=b.container;"H"==a.orientation?(e=d.line(q,[0,p],[0,0],e,f,c),this.axisWidth=a.width,"bottom"==a.position?(a=c/2+g+n+m-1,c=l):(a=-c/2-g+m+k,c=h+l)):(this.axisWidth=a.height,"right"==a.position?(e=d.line(q,[0,0,-h],[0,n,n-k],e,f,c),a=m+k,c=c/2+g+h+p+l-1):(e=d.line(q,[0,0],[0,n],e,f,c),a=m,c=-c/
2-g+l));e.translate(c,a);b.axesSet.push(e);this.set=e}});d.RecItem=d.Class({construct:function(a,b,c,e,f,g,h,k,l,m,n){b=Math.round(b);this.value=c;void 0==c&&(c="");l||(l=0);void 0==e&&(e=!0);var p=a.chart.fontFamily,q=a.fontSize;void 0==q&&(q=a.chart.fontSize);var r=a.color;void 0==r&&(r=a.chart.color);void 0!==n&&(r=n);var t=a.chart.container,u=t.set();this.set=u;var A=a.axisThickness,y=a.axisColor,x=a.axisAlpha,w=a.tickLength,G=a.gridAlpha,v=a.gridThickness,O=a.gridColor,E=a.dashLength,D=a.fillColor,
F=a.fillAlpha,z=a.labelsEnabled;n=a.labelRotation;var B=a.counter,L=a.inside,Y=a.labelOffset,T=a.dx,aa=a.dy,za=a.orientation,la=a.position,ca=a.previousCoord,P=a.viH,da=a.viW,ra=a.offset,ha,ba;h?(z=!0,isNaN(h.tickLength)||(w=h.tickLength),void 0!=h.lineColor&&(O=h.lineColor),void 0!=h.color&&(r=h.color),isNaN(h.lineAlpha)||(G=h.lineAlpha),isNaN(h.dashLength)||(E=h.dashLength),isNaN(h.lineThickness)||(v=h.lineThickness),!0===h.inside&&(L=!0),isNaN(h.labelRotation)||(n=h.labelRotation),isNaN(h.fontSize)||
(q=h.fontSize),h.position&&(la=h.position),void 0!==h.boldLabel&&(k=h.boldLabel),isNaN(h.labelOffset)||(Y=h.labelOffset)):""===c&&(w=0);ba="start";f&&(ba="middle");var fa=n*Math.PI/180,oa,K=0,H=0,pa=0,X=oa=0,C=0;"V"==za&&(n=0);var ga;z&&(ga=a.autoWrap&&0===n?d.wrappedText(t,c,r,p,q,ba,k,f,0):d.text(t,c,r,p,q,ba,k),ba=ga.getBBox(),X=ba.width,C=ba.height);if("H"==za){if(0<=b&&b<=da+1&&(0<w&&0<x&&b+l<=da+1&&(ha=d.line(t,[b+l,b+l],[0,w],y,x,v),u.push(ha)),0<G&&(ba=d.line(t,[b,b+T,b+T],[P,P+aa,aa],O,G,
v,E),u.push(ba))),H=0,K=b,h&&90==n&&L&&(K-=q),!1===e?(ba="start",H="bottom"==la?L?H+w:H-w:L?H-w:H+w,K+=3,f&&(K+=f/2-3,ba="middle"),0<n&&(ba="middle")):ba="middle",1==B&&0<F&&!h&&!m&&ca<da&&(e=d.fitToBounds(b,0,da),ca=d.fitToBounds(ca,0,da),oa=e-ca,0<oa&&(fill=d.rect(t,oa,a.height,D,F),fill.translate(e-oa+T,aa),u.push(fill))),"bottom"==la?(H+=P+q/2+ra,L?(0<n?(H=P-X/2*Math.sin(fa)-w-3,K+=X/2*Math.cos(fa)-4+2):0>n?(H=P+X*Math.sin(fa)-w-3+2,K+=-X*Math.cos(fa)-C*Math.sin(fa)-4):H-=w+q+3+3,H-=Y):(0<n?(H=
P+X/2*Math.sin(fa)+w+3,K-=X/2*Math.cos(fa)):0>n?(H=P+w+3-X/2*Math.sin(fa)+2,K+=X/2*Math.cos(fa)):H+=w+A+3+3,H+=Y)):(H+=aa+q/2-ra,K+=T,L?(0<n?(H=X/2*Math.sin(fa)+w+3,K-=X/2*Math.cos(fa)):H+=w+3,H+=Y):(0<n?(H=-(X/2)*Math.sin(fa)-w-6,K+=X/2*Math.cos(fa)):H-=w+q+3+A+3,H-=Y)),"bottom"==la?oa=(L?P-w-1:P+A-1)+ra:(pa=T,oa=(L?aa:aa-w-A+1)-ra),g&&(K+=g),g=K,0<n&&(g+=X/2*Math.cos(fa)),ga&&(q=0,L&&(q=X/2*Math.cos(fa)),g+q>da+2||0>g))ga.remove(),ga=null}else{0<=b&&b<=P+1&&(0<w&&0<x&&b+l<=P+1&&(ha=d.line(t,[0,
w],[b+l,b+l],y,x,v),u.push(ha)),0<G&&(ba=d.line(t,[0,T,da+T],[b,b+aa,b+aa],O,G,v,E),u.push(ba)));ba="end";if(!0===L&&"left"==la||!1===L&&"right"==la)ba="start";H=b-q/2;1==B&&0<F&&!h&&!m&&(e=d.fitToBounds(b,0,P),ca=d.fitToBounds(ca,0,P),fa=e-ca,fill=d.polygon(t,[0,a.width,a.width,0],[0,0,fa,fa],D,F),fill.translate(T,e-fa+aa),u.push(fill));H+=q/2;"right"==la?(K+=T+da+ra,H+=aa,L?(g||(H-=q/2+3),K=K-(w+4)-Y):(K+=w+4+A,H-=2,K+=Y)):L?(K+=w+4-ra,g||(H-=q/2+3),h&&(K+=T,H+=aa),K+=Y):(K+=-w-A-4-2-ra,H-=2,K-=
Y);ha&&("right"==la?(pa+=T+ra+da,oa+=aa,pa=L?pa-A:pa+A):(pa-=ra,L||(pa-=w+A)));g&&(H+=g);L=-3;"right"==la&&(L+=aa);ga&&(H>P+1||H<L)&&(ga.remove(),ga=null)}ha&&ha.translate(pa,oa);!1===a.visible&&(ha&&ha.remove(),ga&&(ga.remove(),ga=null));ga&&(ga.attr({"text-anchor":ba}),ga.translate(K,H),0!==n&&ga.rotate(-n,a.chart.backgroundColor),a.allLabels.push(ga)," "!=c&&(this.label=ga));m||(a.counter=0===B?1:0,a.previousCoord=b);0===this.set.node.childNodes.length&&this.set.remove()},graphics:function(){return this.set},
getLabel:function(){return this.label}});d.RecFill=d.Class({construct:function(a,b,c,e){var f=a.dx,g=a.dy,h=a.orientation,k=0;if(c<b){var l=b;b=c;c=l}var m=e.fillAlpha;isNaN(m)&&(m=0);l=a.chart.container;e=e.fillColor;"V"==h?(b=d.fitToBounds(b,0,a.viH),c=d.fitToBounds(c,0,a.viH)):(b=d.fitToBounds(b,0,a.viW),c=d.fitToBounds(c,0,a.viW));c-=b;isNaN(c)&&(c=4,k=2,m=0);0>c&&"object"==typeof e&&(e=e.join(",").split(",").reverse());"V"==h?(a=d.rect(l,a.width,c,e,m),a.translate(f,b-k+g)):(a=d.rect(l,c,a.height,
e,m),a.translate(b-k+f,g));this.set=l.set([a])},graphics:function(){return this.set},getLabel:function(){}});d.AmChart=d.Class({construct:function(a){this.theme=a;this.version="3.11.3";d.addChart(this);this.createEvents("dataUpdated","init","rendered","drawn","failed");this.height=this.width="100%";this.dataChanged=!0;this.chartCreated=!1;this.previousWidth=this.previousHeight=0;this.backgroundColor="#FFFFFF";this.borderAlpha=this.backgroundAlpha=0;this.color=this.borderColor="#000000";this.fontFamily=
"Verdana";this.fontSize=11;this.usePrefixes=!1;this.precision=-1;this.percentPrecision=2;this.decimalSeparator=".";this.thousandsSeparator=",";this.labels=[];this.allLabels=[];this.titles=[];this.marginRight=this.marginLeft=this.autoMarginOffset=0;this.timeOuts=[];this.creditsPosition="top-left";var b=document.createElement("div"),c=b.style;c.overflow="hidden";c.position="relative";c.textAlign="left";this.chartDiv=b;b=document.createElement("div");c=b.style;c.overflow="hidden";c.position="relative";
c.textAlign="left";this.legendDiv=b;this.titleHeight=0;this.hideBalloonTime=150;this.handDrawScatter=2;this.handDrawThickness=1;this.prefixesOfBigNumbers=[{number:1E3,prefix:"k"},{number:1E6,prefix:"M"},{number:1E9,prefix:"G"},{number:1E12,prefix:"T"},{number:1E15,prefix:"P"},{number:1E18,prefix:"E"},{number:1E21,prefix:"Z"},{number:1E24,prefix:"Y"}];this.prefixesOfSmallNumbers=[{number:1E-24,prefix:"y"},{number:1E-21,prefix:"z"},{number:1E-18,prefix:"a"},{number:1E-15,prefix:"f"},{number:1E-12,prefix:"p"},
{number:1E-9,prefix:"n"},{number:1E-6,prefix:"μ"},{number:.001,prefix:"m"}];this.panEventsEnabled=!0;d.bezierX=3;d.bezierY=6;this.product="amcharts";this.animations=[];this.balloon=new d.AmBalloon(this.theme);this.balloon.chart=this;d.applyTheme(this,a,"AmChart")},drawChart:function(){this.drawBackground();this.redrawLabels();this.drawTitles();this.brr()},drawBackground:function(){d.remove(this.background);var a=this.container,b=this.backgroundColor,c=this.backgroundAlpha,e=this.set;d.isModern||0!==
c||(c=.001);var f=this.updateWidth();this.realWidth=f;var g=this.updateHeight();this.realHeight=g;this.background=b=d.polygon(a,[0,f-1,f-1,0],[0,0,g-1,g-1],b,c,1,this.borderColor,this.borderAlpha);e.push(b);if(b=this.backgroundImage)this.path&&(b=this.path+b),this.bgImg=a=a.image(b,0,0,f,g),e.push(a)},drawTitles:function(){var a=this.titles;if(d.ifArray(a)){var b=20,c;for(c=0;c<a.length;c++){var e=a[c],f=e.color;void 0===f&&(f=this.color);var g=e.size;isNaN(g)&&(g=this.fontSize+2);isNaN(e.alpha);
var h=this.marginLeft,f=d.text(this.container,e.text,f,this.fontFamily,g);f.translate(h+(this.realWidth-this.marginRight-h)/2,b);f.node.style.pointerEvents="none";h=!0;void 0!==e.bold&&(h=e.bold);h&&f.attr({"font-weight":"bold"});f.attr({opacity:e.alpha});b+=g+6;this.freeLabelsSet.push(f)}}},write:function(a){if(a="object"!=typeof a?document.getElementById(a):a){a.innerHTML="";this.div=a;a.style.overflow="hidden";a.style.textAlign="left";var b=this.chartDiv,c=this.legendDiv,e=this.legend,f=c.style,
g=b.style;this.measure();var h,k=document.createElement("div");h=k.style;h.position="relative";this.containerDiv=k;a.appendChild(k);var l=this.exportConfig;l&&d.AmExport&&!this.AmExport&&(this.AmExport=new d.AmExport(this,l));this.amExport&&d.AmExport&&(this.AmExport=d.extend(this.amExport,new d.AmExport(this),!0));this.AmExport&&this.AmExport.init&&this.AmExport.init();if(e)switch(e=this.addLegend(e,e.divId),e.position){case "bottom":k.appendChild(b);k.appendChild(c);break;case "top":k.appendChild(c);
k.appendChild(b);break;case "absolute":h.width=a.style.width;h.height=a.style.height;f.position="absolute";g.position="absolute";void 0!==e.left&&(f.left=e.left+"px");void 0!==e.right&&(f.right=e.right+"px");void 0!==e.top&&(f.top=e.top+"px");void 0!==e.bottom&&(f.bottom=e.bottom+"px");e.marginLeft=0;e.marginRight=0;k.appendChild(b);k.appendChild(c);break;case "right":h.width=a.style.width;h.height=a.style.height;f.position="relative";g.position="absolute";k.appendChild(b);k.appendChild(c);break;
case "left":h.width=a.style.width;h.height=a.style.height;f.position="absolute";g.position="relative";k.appendChild(b);k.appendChild(c);break;case "outside":k.appendChild(b)}else k.appendChild(b);this.listenersAdded||(this.addListeners(),this.listenersAdded=!0);this.initChart()}},createLabelsSet:function(){d.remove(this.labelsSet);this.labelsSet=this.container.set();this.freeLabelsSet.push(this.labelsSet)},initChart:function(){this.initHC||(d.callInitHandler(this),this.initHC=!0);d.applyLang(this.language,
this);var a=this.numberFormatter;a&&(isNaN(a.precision)||(this.precision=a.precision),void 0!==a.thousandsSeparator&&(this.thousandsSeparator=a.thousandsSeparator),void 0!==a.decimalSeparator&&(this.decimalSeparator=a.decimalSeparator));(a=this.percentFormatter)&&!isNaN(a.precision)&&(this.percentPrecision=a.precision);this.nf={precision:this.precision,thousandsSeparator:this.thousandsSeparator,decimalSeparator:this.decimalSeparator};this.pf={precision:this.percentPrecision,thousandsSeparator:this.thousandsSeparator,
decimalSeparator:this.decimalSeparator};this.divIsFixed=d.findIfFixed(this.chartDiv);this.previousHeight=this.divRealHeight;this.previousWidth=this.divRealWidth;this.destroy();this.startInterval();a=0;document.attachEvent&&!v.opera&&(a=1);this.dmouseX=this.dmouseY=0;var b=document.getElementsByTagName("html")[0];b&&v.getComputedStyle&&(b=v.getComputedStyle(b,null))&&(this.dmouseY=d.removePx(b.getPropertyValue("margin-top")),this.dmouseX=d.removePx(b.getPropertyValue("margin-left")));this.mouseMode=
a;(a=this.container)?(a.container.innerHTML="",this.chartDiv.appendChild(a.container),a.setSize(this.realWidth,this.realHeight)):a=new d.AmDraw(this.chartDiv,this.realWidth,this.realHeight,this);d.VML||d.SVG?(a.handDrawn=this.handDrawn,a.handDrawScatter=this.handDrawScatter,a.handDrawThickness=this.handDrawThickness,this.container=a,this.set&&this.set.remove(),this.set=a.set(),this.gridSet&&this.gridSet.remove(),this.gridSet=a.set(),this.cursorLineSet&&this.cursorLineSet.remove(),this.cursorLineSet=
a.set(),this.graphsBehindSet&&this.graphsBehindSet.remove(),this.graphsBehindSet=a.set(),this.bulletBehindSet&&this.bulletBehindSet.remove(),this.bulletBehindSet=a.set(),this.columnSet&&this.columnSet.remove(),this.columnSet=a.set(),this.graphsSet&&this.graphsSet.remove(),this.graphsSet=a.set(),this.trendLinesSet&&this.trendLinesSet.remove(),this.trendLinesSet=a.set(),this.axesSet&&this.axesSet.remove(),this.axesSet=a.set(),this.cursorSet&&this.cursorSet.remove(),this.cursorSet=a.set(),this.scrollbarsSet&&
this.scrollbarsSet.remove(),this.scrollbarsSet=a.set(),this.bulletSet&&this.bulletSet.remove(),this.bulletSet=a.set(),this.freeLabelsSet&&this.freeLabelsSet.remove(),this.axesLabelsSet&&this.axesLabelsSet.remove(),this.axesLabelsSet=a.set(),this.freeLabelsSet=a.set(),this.balloonsSet&&this.balloonsSet.remove(),this.balloonsSet=a.set(),this.zoomButtonSet&&this.zoomButtonSet.remove(),this.zoomButtonSet=a.set(),this.linkSet&&this.linkSet.remove(),this.linkSet=a.set(),this.renderFix()):this.fire("failed",
{type:"failed",chart:this})},measure:function(){var a=this.div;if(a){var b=this.chartDiv,c=a.offsetWidth,e=a.offsetHeight,f=this.container;a.clientHeight&&(c=a.clientWidth,e=a.clientHeight);var g=d.removePx(d.getStyle(a,"padding-left")),h=d.removePx(d.getStyle(a,"padding-right")),k=d.removePx(d.getStyle(a,"padding-top")),l=d.removePx(d.getStyle(a,"padding-bottom"));isNaN(g)||(c-=g);isNaN(h)||(c-=h);isNaN(k)||(e-=k);isNaN(l)||(e-=l);g=a.style;a=g.width;g=g.height;-1!=a.indexOf("px")&&(c=d.removePx(a));
-1!=g.indexOf("px")&&(e=d.removePx(g));a=d.toCoordinate(this.width,c);g=d.toCoordinate(this.height,e);this.balloon=d.processObject(this.balloon,d.AmBalloon,this.theme);this.balloon.chart=this;(a!=this.previousWidth||g!=this.previousHeight)&&0<a&&0<g&&(b.style.width=a+"px",b.style.height=g+"px",f&&f.setSize(a,g));this.balloon.setBounds(2,2,a-2,g);this.realWidth=a;this.realHeight=g;this.divRealWidth=c;this.divRealHeight=e}},destroy:function(){this.chartDiv.innerHTML="";this.clearTimeOuts();this.interval&&
clearInterval(this.interval);this.interval=NaN},clearTimeOuts:function(){var a=this.timeOuts;if(a){var b;for(b=0;b<a.length;b++)clearTimeout(a[b])}this.timeOuts=[]},clear:function(a){d.callMethod("clear",[this.chartScrollbar,this.scrollbarV,this.scrollbarH,this.chartCursor]);this.chartCursor=this.scrollbarH=this.scrollbarV=this.chartScrollbar=null;this.clearTimeOuts();this.interval&&clearInterval(this.interval);this.container&&(this.container.remove(this.chartDiv),this.container.remove(this.legendDiv));
a||d.removeChart(this)},setMouseCursor:function(a){"auto"==a&&d.isNN&&(a="default");this.chartDiv.style.cursor=a;this.legendDiv.style.cursor=a},redrawLabels:function(){this.labels=[];var a=this.allLabels;this.createLabelsSet();var b;for(b=0;b<a.length;b++)this.drawLabel(a[b])},drawLabel:function(a){if(this.container){var b=a.y,c=a.text,e=a.align,f=a.size,g=a.color,h=a.rotation,k=a.alpha,l=a.bold,m=d.toCoordinate(a.x,this.realWidth),b=d.toCoordinate(b,this.realHeight);m||(m=0);b||(b=0);void 0===g&&
(g=this.color);isNaN(f)&&(f=this.fontSize);e||(e="start");"left"==e&&(e="start");"right"==e&&(e="end");"center"==e&&(e="middle",h?b=this.realHeight-b+b/2:m=this.realWidth/2-m);void 0===k&&(k=1);void 0===h&&(h=0);b+=f/2;c=d.text(this.container,c,g,this.fontFamily,f,e,l,k);c.translate(m,b);0!==h&&c.rotate(h);a.url?(c.setAttr("cursor","pointer"),c.click(function(){d.getURL(a.url)})):c.node.style.pointerEvents="none";this.labelsSet.push(c);this.labels.push(c)}},addLabel:function(a,b,c,e,f,g,d,k,l,m){a=
{x:a,y:b,text:c,align:e,size:f,color:g,alpha:k,rotation:d,bold:l,url:m};this.container&&this.drawLabel(a);this.allLabels.push(a)},clearLabels:function(){var a=this.labels,b;for(b=a.length-1;0<=b;b--)a[b].remove();this.labels=[];this.allLabels=[]},updateHeight:function(){var a=this.divRealHeight,b=this.legend;if(b){var c=this.legendDiv.offsetHeight,b=b.position;if("top"==b||"bottom"==b){a-=c;if(0>a||isNaN(a))a=0;this.chartDiv.style.height=a+"px"}}return a},updateWidth:function(){var a=this.divRealWidth,
b=this.divRealHeight,c=this.legend;if(c){var e=this.legendDiv,f=e.offsetWidth;isNaN(c.width)||(f=c.width);var g=e.offsetHeight,e=e.style,d=this.chartDiv.style,c=c.position;if("right"==c||"left"==c){a-=f;if(0>a||isNaN(a))a=0;d.width=a+"px";"left"==c?d.left=f+"px":e.left=a+"px";b>g&&(e.top=(b-g)/2+"px")}}return a},getTitleHeight:function(){var a=0,b=this.titles;if(0<b.length){var a=15,c;for(c=0;c<b.length;c++){var e=b[c].size;isNaN(e)&&(e=this.fontSize+2);a+=e+6}}return a},addTitle:function(a,b,c,e,
f){isNaN(b)&&(b=this.fontSize+2);a={text:a,size:b,color:c,alpha:e,bold:f};this.titles.push(a);return a},handleWheel:function(a){var b=0;a||(a=v.event);a.wheelDelta?b=a.wheelDelta/120:a.detail&&(b=-a.detail/3);b&&this.handleWheelReal(b,a.shiftKey);a.preventDefault&&a.preventDefault()},handleWheelReal:function(a){},addListeners:function(){var a=this,b=a.chartDiv;document.addEventListener?(a.panEventsEnabled&&(b.style.msTouchAction="none"),"ontouchstart"in document.documentElement&&(b.addEventListener("touchstart",
function(b){a.handleTouchMove.call(a,b);a.handleTouchStart.call(a,b)},!0),b.addEventListener("touchmove",function(b){a.handleTouchMove.call(a,b)},!0),b.addEventListener("touchend",function(b){a.handleTouchEnd.call(a,b)},!0)),b.addEventListener("mousedown",function(b){a.mouseIsOver=!0;a.handleMouseMove.call(a,b);a.handleMouseDown.call(a,b)},!0),b.addEventListener("mouseover",function(b){a.handleMouseOver.call(a,b)},!0),b.addEventListener("mouseout",function(b){a.handleMouseOut.call(a,b)},!0)):(b.attachEvent("onmousedown",
function(b){a.handleMouseDown.call(a,b)}),b.attachEvent("onmouseover",function(b){a.handleMouseOver.call(a,b)}),b.attachEvent("onmouseout",function(b){a.handleMouseOut.call(a,b)}))},dispDUpd:function(){var a;this.dispatchDataUpdated&&(this.dispatchDataUpdated=!1,a="dataUpdated",this.fire(a,{type:a,chart:this}));this.chartCreated||(a="init",this.fire(a,{type:a,chart:this}));this.chartRendered||(a="rendered",this.fire(a,{type:a,chart:this}),this.chartRendered=!0);a="drawn";this.fire(a,{type:a,chart:this})},
validateSize:function(){var a=this;a.measure();var b=a.legend;if((a.realWidth!=a.previousWidth||a.realHeight!=a.previousHeight)&&0<a.realWidth&&0<a.realHeight){a.sizeChanged=!0;if(b){clearTimeout(a.legendInitTO);var c=setTimeout(function(){b.invalidateSize()},100);a.timeOuts.push(c);a.legendInitTO=c}a.marginsUpdated="xy"!=a.type?!1:!0;clearTimeout(a.initTO);c=setTimeout(function(){a.initChart()},150);a.timeOuts.push(c);a.initTO=c}a.renderFix();b&&b.renderFix()},invalidateSize:function(){this.previousHeight=
this.previousWidth=NaN;this.invalidateSizeReal()},invalidateSizeReal:function(){var a=this;a.marginsUpdated=!1;clearTimeout(a.validateTO);var b=setTimeout(function(){a.validateSize()},5);a.timeOuts.push(b);a.validateTO=b},validateData:function(a){this.chartCreated&&(this.dataChanged=!0,this.marginsUpdated="xy"!=this.type?!1:!0,this.initChart(a))},validateNow:function(){this.chartRendered=!1;this.write(this.div)},showItem:function(a){a.hidden=!1;this.initChart()},hideItem:function(a){a.hidden=!0;this.initChart()},
hideBalloon:function(){var a=this;clearInterval(a.hoverInt);clearTimeout(a.balloonTO);a.hoverInt=setTimeout(function(){a.hideBalloonReal.call(a)},a.hideBalloonTime)},cleanChart:function(){},hideBalloonReal:function(){var a=this.balloon;a&&a.hide()},showBalloon:function(a,b,c,e,f){var g=this;clearTimeout(g.balloonTO);clearInterval(g.hoverInt);g.balloonTO=setTimeout(function(){g.showBalloonReal.call(g,a,b,c,e,f)},1)},showBalloonReal:function(a,b,c,e,f){this.handleMouseMove();var g=this.balloon;g.enabled&&
(g.followCursor(!1),g.changeColor(b),!c||g.fixedPosition?(g.setPosition(e,f),g.followCursor(!1)):g.followCursor(!0),a&&g.showBalloon(a))},handleTouchMove:function(a){this.hideBalloon();var b=this.chartDiv;a.touches&&(a=a.touches.item(0),this.mouseX=a.pageX-d.findPosX(b),this.mouseY=a.pageY-d.findPosY(b))},handleMouseOver:function(a){d.resetMouseOver();this.mouseIsOver=!0},handleMouseOut:function(a){d.resetMouseOver();this.mouseIsOver=!1},handleMouseMove:function(a){if(this.mouseIsOver){var b=this.chartDiv;
a||(a=v.event);var c,e;if(a){this.posX=d.findPosX(b);this.posY=d.findPosY(b);switch(this.mouseMode){case 1:c=a.clientX-this.posX;e=a.clientY-this.posY;if(!this.divIsFixed){var b=document.body,f,g;b&&(f=b.scrollLeft,y1=b.scrollTop);if(b=document.documentElement)g=b.scrollLeft,y2=b.scrollTop;f=Math.max(f,g);g=Math.max(y1,y2);c+=f;e+=g}break;case 0:this.divIsFixed?(c=a.clientX-this.posX,e=a.clientY-this.posY):(c=a.pageX-this.posX,e=a.pageY-this.posY)}a.touches&&(a=a.touches.item(0),c=a.pageX-this.posX,
e=a.pageY-this.posY);this.mouseX=c-this.dmouseX;this.mouseY=e-this.dmouseY}}},handleTouchStart:function(a){this.handleMouseDown(a)},handleTouchEnd:function(a){d.resetMouseOver();this.handleReleaseOutside(a)},handleReleaseOutside:function(a){},handleMouseDown:function(a){d.resetMouseOver();this.mouseIsOver=!0;a&&a.preventDefault&&(this.panEventsEnabled?a.preventDefault():a.touches||a.preventDefault())},addLegend:function(a,b){a=d.processObject(a,d.AmLegend,this.theme);a.divId=b;var c;c="object"!=typeof b&&
b?document.getElementById(b):b;this.legend=a;a.chart=this;c?(a.div=c,a.position="outside",a.autoMargins=!1):a.div=this.legendDiv;c=this.handleLegendEvent;this.listenTo(a,"showItem",c);this.listenTo(a,"hideItem",c);this.listenTo(a,"clickMarker",c);this.listenTo(a,"rollOverItem",c);this.listenTo(a,"rollOutItem",c);this.listenTo(a,"rollOverMarker",c);this.listenTo(a,"rollOutMarker",c);this.listenTo(a,"clickLabel",c);return a},removeLegend:function(){this.legend=void 0;this.legendDiv.innerHTML=""},handleResize:function(){(d.isPercents(this.width)||
d.isPercents(this.height))&&this.invalidateSizeReal();this.renderFix()},renderFix:function(){if(!d.VML){var a=this.container;a&&a.renderFix()}},getSVG:function(){if(d.hasSVG)return this.container},animate:function(a,b,c,e,f,g,h){a["an_"+b]&&d.removeFromArray(this.animations,a["an_"+b]);c={obj:a,frame:0,attribute:b,from:c,to:e,time:f,effect:g,suffix:h};a["an_"+b]=c;this.animations.push(c);return c},setLegendData:function(a){var b=this.legend;b&&b.setData(a)},startInterval:function(){var a=this;clearInterval(a.interval);
a.interval=setInterval(function(){a.updateAnimations.call(a)},d.updateRate)},stopAnim:function(a){d.removeFromArray(this.animations,a)},updateAnimations:function(){var a;this.container&&this.container.update();for(a=this.animations.length-1;0<=a;a--){var b=this.animations[a],c=1E3*b.time/d.updateRate,e=b.frame+1,f=b.obj,g=b.attribute;if(e<=c){b.frame++;var h=Number(b.from),k=Number(b.to)-h,c=d[b.effect](0,e,h,k,c);0===k?(this.animations.splice(a,1),f.node.style[g]=Number(b.to)+b.suffix):f.node.style[g]=
c+b.suffix}else f.node.style[g]=Number(b.to)+b.suffix,this.animations.splice(a,1)}},inIframe:function(){try{return v.self!==v.top}catch(a){return!0}},brr:function(){}});d.Slice=d.Class({construct:function(){}});d.SerialDataItem=d.Class({construct:function(){}});d.GraphDataItem=d.Class({construct:function(){}});d.Guide=d.Class({construct:function(a){this.cname="Guide";d.applyTheme(this,a,this.cname)}});d.AmGraph=d.Class({construct:function(a){this.cname="AmGraph";this.createEvents("rollOverGraphItem",
"rollOutGraphItem","clickGraphItem","doubleClickGraphItem","rightClickGraphItem","clickGraph","rollOverGraph","rollOutGraph");this.type="line";this.stackable=!0;this.columnCount=1;this.columnIndex=0;this.centerCustomBullets=this.showBalloon=!0;this.maxBulletSize=50;this.minBulletSize=4;this.balloonText="[[value]]";this.hidden=this.scrollbar=this.animationPlayed=!1;this.pointPosition="middle";this.depthCount=1;this.includeInMinMax=!0;this.negativeBase=0;this.visibleInLegend=!0;this.showAllValueLabels=
!1;this.showBulletsAt=this.showBalloonAt="close";this.lineThickness=1;this.dashLength=0;this.connect=!0;this.lineAlpha=1;this.bullet="none";this.bulletBorderThickness=2;this.bulletBorderAlpha=0;this.bulletAlpha=1;this.bulletSize=8;this.cornerRadiusTop=this.hideBulletsCount=this.bulletOffset=0;this.cursorBulletAlpha=1;this.gradientOrientation="vertical";this.dy=this.dx=0;this.periodValue="";this.clustered=!0;this.periodSpan=1;this.y=this.x=0;this.switchable=!0;this.tcc=this.minDistance=1;this.labelRotation=
0;this.labelAnchor="auto";this.labelOffset=3;d.applyTheme(this,a,this.cname)},draw:function(){var a=this.chart,b=this.chart.type;isNaN(this.precision)||(this.numberFormatter?this.numberFormatter.precision=this.precision:this.numberFormatter={precision:this.precision,decimalSeparator:a.decimalSeparator,thousandsSeparator:a.thousandsSeparator});var c=a.container;this.container=c;this.destroy();var e=c.set(),f=c.set();this.behindColumns?(a.graphsBehindSet.push(e),a.bulletBehindSet.push(f)):(a.graphsSet.push(e),
a.bulletSet.push(f));var g=this.bulletAxis;d.isString(g)&&(this.bulletAxis=a.getValueAxisById(g));this.bulletSet=f;if(!this.scrollbar){var g=a.marginLeftReal,h=a.marginTopReal;e.translate(g,h);f.translate(g,h)}c=c.set();d.remove(this.columnsSet);e.push(c);this.set=e;this.columnsSet=c;this.columnsArray=[];this.ownColumns=[];this.allBullets=[];this.animationArray=[];(e=this.labelPosition)||(c=this.valueAxis.stackType,e="top","column"==this.type&&(a.rotate&&(e="right"),"100%"==c||"regular"==c)&&(e="middle"),
this.labelPosition=e);d.ifArray(this.data)&&(a=!1,"xy"==b?this.xAxis.axisCreated&&this.yAxis.axisCreated&&(a=!0):this.valueAxis.axisCreated&&(a=!0),!this.hidden&&a&&this.createGraph())},createGraph:function(){var a=this,b=a.chart;a.startAlpha=b.startAlpha;a.seqAn=b.sequencedAnimation;a.baseCoord=a.valueAxis.baseCoord;void 0===a.fillAlphas&&(a.fillAlphas=0);a.bulletColorR=a.bulletColor;void 0===a.bulletColorR&&(a.bulletColorR=a.lineColorR,a.bulletColorNegative=a.negativeLineColor);void 0===a.bulletAlpha&&
(a.bulletAlpha=a.lineAlpha);clearTimeout(a.playedTO);if(!isNaN(a.valueAxis.min)&&!isNaN(a.valueAxis.max)){switch(b.type){case "serial":a.categoryAxis&&(a.createSerialGraph(),"candlestick"==a.type&&1>a.valueAxis.minMaxMultiplier&&a.positiveClip(a.set));break;case "radar":a.createRadarGraph();break;case "xy":a.createXYGraph(),a.positiveClip(a.set)}a.playedTO=setTimeout(function(){a.setAnimationPlayed.call(a)},500*a.chart.startDuration)}},setAnimationPlayed:function(){this.animationPlayed=!0},createXYGraph:function(){var a=
[],b=[],c=this.xAxis,e=this.yAxis;this.pmh=e.viH+1;this.pmw=c.viW+1;this.pmy=this.pmx=0;var f;for(f=this.start;f<=this.end;f++){var g=this.data[f].axes[c.id].graphs[this.id],d=g.values,k=d.x,l=d.y,d=c.getCoordinate(k),m=e.getCoordinate(l);!isNaN(k)&&!isNaN(l)&&(a.push(d),b.push(m),k=this.createBullet(g,d,m,f),l=this.labelText)&&(g=this.createLabel(g,d,m,l),this.positionLabel(d,m,g,k),this.allBullets.push(g))}this.drawLineGraph(a,b);this.launchAnimation()},createRadarGraph:function(){var a=this.valueAxis.stackType,
b=[],c=[],e,f,g;for(g=this.start;g<=this.end;g++){var d=this.data[g].axes[this.valueAxis.id].graphs[this.id],k;k="none"==a||"3d"==a?d.values.value:d.values.close;if(isNaN(k))this.drawLineGraph(b,c),b=[],c=[];else{var l=this.y-(this.valueAxis.getCoordinate(k)-this.height),m=180-360/(this.end-this.start+1)*g;k=l*Math.sin(m/180*Math.PI);l*=Math.cos(m/180*Math.PI);b.push(k);c.push(l);var m=this.createBullet(d,k,l,g),n=this.labelText;n&&(d=this.createLabel(d,k,l,n),this.positionLabel(k,l,d,m),this.allBullets.push(d));
isNaN(e)&&(e=k);isNaN(f)&&(f=l)}}b.push(e);c.push(f);this.drawLineGraph(b,c);this.launchAnimation()},positionLabel:function(a,b,c,e,f,g){fontSize=this.fontSize;lA="middle";lR=0;lC=!1;lP=this.labelPosition;lBB=c.getBBox();cBB=null;graphDataItem=e.graphDataItem;isRotated=this.chart.rotate;isNegative=graphDataItem.isNegative;void 0===fontSize&&(fontSize=this.chart.fontSize);b-=lBB.height/4/2;switch(lP){case "top":lP=isRotated?"top":isNegative?"bottom":"top";break;case "right":lP=isRotated?isNegative?
"left":"right":"right";break;case "bottom":lP=isRotated?"bottom":isNegative?"top":"bottom";break;case "left":lP=isRotated?isNegative?"right":"left":"left"}f=graphDataItem.columnGraphics;var d=g=0;f&&(g=f.x,d=f.y);switch(lP){case "top":b-=e.size/2+lBB.height/2+this.labelOffset;break;case "right":lA="start";a+=e.size/2+this.labelOffset;break;case "bottom":b+=e.size/2+lBB.height/2+this.labelOffset;break;case "left":lA="end";a-=e.size/2+this.labelOffset;break;case "inside":"column"==this.type&&(lC=!0,
isRotated?isNegative?(lA="end",a=g-3-this.labelOffset):(lA="start",a=g+3+this.labelOffset):b=isNegative?d+7+this.labelOffset:d-10-this.labelOffset);break;case "middle":"column"==this.type&&(lC=!0,isRotated?a-=(a-g)/2+this.labelOffset-3:b-=(b-d)/2+this.labelOffset-3)}"auto"!=this.labelAnchor&&(lA=this.labelAnchor);c.attr({"text-anchor":lA});this.labelRotation&&c.rotate(this.labelRotation);c.translate(a,b);lBB=c.getBBox();f&&lC&&(lBB.height>graphDataItem.columnHeight||lBB.width>graphDataItem.columnWidth)&&
(c.remove(),c=!1);if(c&&"serial"==this.chart.type)if(isRotated){if(0>b||b>this.height)c.remove(),c=!1}else if(0>a||a>this.width)c.remove(),c=!1;return c},getGradRotation:function(){var a=270;"horizontal"==this.gradientOrientation&&(a=0);return this.gradientRotation=a},createSerialGraph:function(){this.dashLengthSwitched=this.fillColorsSwitched=this.lineColorSwitched=void 0;var a=this.chart,b=this.id,c=this.index,e=this.data,f=this.chart.container,g=this.valueAxis,h=this.type,k=this.columnWidthReal,
l=this.showBulletsAt;isNaN(this.columnWidth)||(k=this.columnWidth);isNaN(k)&&(k=.8);var m=this.useNegativeColorIfDown,n=this.width,p=this.height,q=this.y,r=this.rotate,t=this.columnCount,u=d.toCoordinate(this.cornerRadiusTop,k/2),A=this.connect,y=[],x=[],w,G,v,O,E=this.chart.graphs.length,D,F=this.dx/this.tcc,z=this.dy/this.tcc,B=g.stackType,L=this.start,Y=this.end,T=this.scrollbar,aa=this.categoryAxis,za=this.baseCoord,la=this.negativeBase,ca=this.columnIndex,P=this.lineThickness,da=this.lineAlpha,
ra=this.lineColorR,ha=this.dashLength,ba=this.set,fa,oa=this.getGradRotation(),K=this.chart.columnSpacing,H=aa.cellWidth,pa=(H*k-t)/t;K>pa&&(K=pa);var X,C,ga,jb=p+1,kb=n+1,ab=0,lb=0,mb,nb,bb,cb,ob=this.fillColorsR,Ja=this.negativeFillColors,Ca=this.negativeLineColor,Ta=this.fillAlphas,Ua=this.negativeFillAlphas;"object"==typeof Ta&&(Ta=Ta[0]);"object"==typeof Ua&&(Ua=Ua[0]);var db=g.getCoordinate(g.min);g.logarithmic&&(db=g.getCoordinate(g.minReal));this.minCoord=db;this.resetBullet&&(this.bullet=
"none");if(!(T||"line"!=h&&"smoothedLine"!=h&&"step"!=h||(1==e.length&&"step"!=h&&"none"==this.bullet&&(this.bullet="round",this.resetBullet=!0),!Ja&&void 0==Ca||m))){var Pa=la;Pa>g.max&&(Pa=g.max);Pa<g.min&&(Pa=g.min);g.logarithmic&&(Pa=g.minReal);var Ga=g.getCoordinate(Pa),Hb=g.getCoordinate(g.max);r?(jb=p,kb=Math.abs(Hb-Ga),mb=p,nb=Math.abs(db-Ga),cb=lb=0,g.reversed?(ab=0,bb=Ga):(ab=Ga,bb=0)):(kb=n,jb=Math.abs(Hb-Ga),nb=n,mb=Math.abs(db-Ga),bb=ab=0,g.reversed?(cb=q,lb=Ga):cb=Ga+1)}var Ha=Math.round;
this.pmx=Ha(ab);this.pmy=Ha(lb);this.pmh=Ha(jb);this.pmw=Ha(kb);this.nmx=Ha(bb);this.nmy=Ha(cb);this.nmh=Ha(mb);this.nmw=Ha(nb);d.isModern||(this.nmy=this.nmx=0,this.nmh=this.height);this.clustered||(t=1);k="column"==h?(H*k-K*(t-1))/t:H*k;1>k&&(k=1);var Ib=this.fixedColumnWidth;isNaN(Ib)||(k=Ib);var M;if("line"==h||"step"==h||"smoothedLine"==h){if(0<L){for(M=L-1;-1<M;M--)if(X=e[M],C=X.axes[g.id].graphs[b],ga=C.values.value,!isNaN(ga)){L=M;break}if(this.lineColorField)for(M=L;-1<M;M--)if(X=e[M],C=
X.axes[g.id].graphs[b],C.lineColor){this.bulletColorSwitched=this.lineColorSwitched=C.lineColor;break}if(this.fillColorsField)for(M=L;-1<M;M--)if(X=e[M],C=X.axes[g.id].graphs[b],C.fillColors){this.fillColorsSwitched=C.fillColors;break}if(this.dashLengthField)for(M=L;-1<M;M--)if(X=e[M],C=X.axes[g.id].graphs[b],!isNaN(C.dashLength)){this.dashLengthSwitched=C.dashLength;break}}if(Y<e.length-1)for(M=Y+1;M<e.length;M++)if(X=e[M],C=X.axes[g.id].graphs[b],ga=C.values.value,!isNaN(ga)){Y=M;break}}Y<e.length-
1&&Y++;var U=[],V=[],Ka=!1;if("line"==h||"step"==h||"smoothedLine"==h)if(this.stackable&&"regular"==B||"100%"==B||this.fillToGraph)Ka=!0;var Jb=this.noStepRisers,eb=-1E3,fb=-1E3,gb=this.minDistance,La=!0,Va=!1;for(M=L;M<=Y;M++){X=e[M];C=X.axes[g.id].graphs[b];C.index=M;var Wa,Ma=NaN;if(m&&void 0==this.openField)for(var pb=M+1;pb<e.length&&(!e[pb]||!(Wa=e[M+1].axes[g.id].graphs[b])||!Wa.values||(Ma=Wa.values.value,isNaN(Ma)));pb++);var W,S,Q,ia,ma=NaN,J=NaN,I=NaN,R=NaN,N=NaN,Na=NaN,Da=NaN,Oa=NaN,Ea=
NaN,wa=NaN,xa=NaN,ja=NaN,ka=NaN,Z=NaN,qb=NaN,rb=NaN,na=NaN,ua=void 0,Ia=ob,Qa=Ta,Aa=ra,sa,va,sb=this.proCandlesticks,Xa=this.pattern;void 0!=C.pattern&&(Xa=C.pattern);void 0!=C.color&&(Ia=C.color);C.fillColors&&(Ia=C.fillColors);isNaN(C.alpha)||(Qa=C.alpha);isNaN(C.dashLength)||(ha=C.dashLength);var Ba=C.values;g.recalculateToPercents&&(Ba=C.percents);if(Ba){Z=this.stackable&&"none"!=B&&"3d"!=B?Ba.close:Ba.value;if("candlestick"==h||"ohlc"==h)Z=Ba.close,rb=Ba.low,Da=g.getCoordinate(rb),qb=Ba.high,
Ea=g.getCoordinate(qb);na=Ba.open;I=g.getCoordinate(Z);isNaN(na)||(N=g.getCoordinate(na),m&&(Ma=na,na=N=NaN));m&&(void 0==this.openField?Wa&&(Wa.isNegative=Ma<Z?!0:!1,isNaN(Ma)&&(C.isNegative=!La)):C.isNegative=Ma>Z?!0:!1);if(!T)switch(this.showBalloonAt){case "close":C.y=I;break;case "open":C.y=N;break;case "high":C.y=Ea;break;case "low":C.y=Da}var ma=X.x[aa.id],Ra=this.periodSpan-1,qa=Math.floor(H/2)+Math.floor(Ra*H/2),Fa=qa,hb=0;"left"==this.stepDirection&&(hb=(2*H+Ra*H)/2,ma-=hb);"center"==this.stepDirection&&
(hb=H/2,ma-=hb);"start"==this.pointPosition&&(ma-=H/2+Math.floor(Ra*H/2),qa=0,Fa=Math.floor(H)+Math.floor(Ra*H));"end"==this.pointPosition&&(ma+=H/2+Math.floor(Ra*H/2),qa=Math.floor(H)+Math.floor(Ra*H),Fa=0);if(Jb){var tb=this.columnWidth;isNaN(tb)||(qa*=tb,Fa*=tb)}T||(C.x=ma);-1E5>ma&&(ma=-1E5);ma>n+1E5&&(ma=n+1E5);r?(J=I,R=N,N=I=ma,isNaN(na)&&!this.fillToGraph&&(R=za),Na=Da,Oa=Ea):(R=J=ma,isNaN(na)&&!this.fillToGraph&&(N=za));if(!sb&&Z<na||sb&&Z<fa)C.isNegative=!0,Ja&&(Ia=Ja),Ua&&(Qa=Ua),void 0!=
Ca&&(Aa=Ca);Va=!1;isNaN(Z)||(m?Z>Ma?(La&&(Va=!0),La=!1):(La||(Va=!0),La=!0):C.isNegative=Z<la?!0:!1,fa=Z);switch(h){case "line":if(isNaN(Z))A||(this.drawLineGraph(y,x,U,V),y=[],x=[],U=[],V=[]);else{if(Math.abs(J-eb)>=gb||Math.abs(I-fb)>=gb)y.push(J),x.push(I),eb=J,fb=I;wa=J;xa=I;ja=J;ka=I;!Ka||isNaN(N)||isNaN(R)||(U.push(R),V.push(N));if(Va||void 0!=C.lineColor||void 0!=C.fillColors||!isNaN(C.dashLength))this.drawLineGraph(y,x,U,V),y=[J],x=[I],U=[],V=[],!Ka||isNaN(N)||isNaN(R)||(U.push(R),V.push(N)),
m?La?(this.lineColorSwitched=ra,this.fillColorsSwitched=ob):(this.lineColorSwitched=Ca,this.fillColorsSwitched=Ja):(this.lineColorSwitched=C.lineColor,this.fillColorsSwitched=C.fillColors),this.dashLengthSwitched=C.dashLength;C.gap&&(this.drawLineGraph(y,x,U,V),y=[],x=[],U=[],V=[])}break;case "smoothedLine":if(isNaN(Z))A||(this.drawSmoothedGraph(y,x,U,V),y=[],x=[],U=[],V=[]);else{if(Math.abs(J-eb)>=gb||Math.abs(I-fb)>=gb)y.push(J),x.push(I),eb=J,fb=I;wa=J;xa=I;ja=J;ka=I;!Ka||isNaN(N)||isNaN(R)||(U.push(R),
V.push(N));void 0==C.lineColor&&void 0==C.fillColors&&isNaN(C.dashLength)||(this.drawSmoothedGraph(y,x,U,V),y=[J],x=[I],U=[],V=[],!Ka||isNaN(N)||isNaN(R)||(U.push(R),V.push(N)),this.lineColorSwitched=C.lineColor,this.fillColorsSwitched=C.fillColors,this.dashLengthSwitched=C.dashLength);C.gap&&(this.drawSmoothedGraph(y,x,U,V),y=[],x=[],U=[],V=[])}break;case "step":if(!isNaN(Z)){r?(isNaN(w)||(y.push(w),x.push(I-qa)),x.push(I-qa),y.push(J),x.push(I+Fa),y.push(J),!Ka||isNaN(N)||isNaN(R)||(U.push(v),V.push(N-
qa),U.push(R),V.push(N-qa),U.push(R),V.push(N+Fa))):(isNaN(G)||(x.push(G),y.push(w),x.push(G),y.push(J-qa)),y.push(J-qa),x.push(I),y.push(J+Fa),x.push(I),!Ka||isNaN(N)||isNaN(R)||(U.push(R-qa),V.push(O),U.push(R-qa),V.push(N),U.push(R+Fa),V.push(N)));w=J;G=I;v=R;O=N;wa=J;xa=I;ja=J;ka=I;if(Va||void 0!=C.lineColor||void 0!=C.fillColors||!isNaN(C.dashLength)){var Wb=y[y.length-2],Xb=x[x.length-2];y.pop();x.pop();this.drawLineGraph(y,x,U,V);y=[Wb];x=[Xb];U=[];V=[];this.lineColorSwitched=C.lineColor;this.fillColorsSwitched=
C.fillColors;this.dashLengthSwitched=C.dashLength;m&&(La?(this.lineColorSwitched=ra,this.fillColorsSwitched=ob):(this.lineColorSwitched=Ca,this.fillColorsSwitched=Ja))}if(Jb||C.gap)w=G=NaN,this.drawLineGraph(y,x,U,V),y=[],x=[],U=[],V=[]}else if(!A){if(1>=this.periodSpan||1<this.periodSpan&&J-w>qa+Fa)w=G=NaN;this.drawLineGraph(y,x,U,V);y=[];x=[];U=[];V=[]}break;case "column":sa=Aa;void 0!=C.lineColor&&(sa=C.lineColor);var Kb=this.topRadius;if(!isNaN(Z)){m||(C.isNegative=Z<la?!0:!1);C.isNegative&&(Ja&&
(Ia=Ja),void 0!=Ca&&(sa=Ca));var Lb=g.min,Mb=g.max;if(!(Z<Lb&&na<Lb||Z>Mb&&na>Mb)){var ta;if(r){"3d"==B?(S=I-(t/2-this.depthCount+1)*(k+K)+K/2+z*ca,W=R+F*ca,ta=ca):(S=Math.floor(I-(t/2-ca)*(k+K)+K/2),W=R,ta=0);Q=k;wa=J;xa=S+k/2;isNaN(R)||R>J&&!C.isNegative&&(wa=R);ja=J;ka=S+k/2;S+Q>p+ta*z&&(Q=p-S+ta*z);S<ta*z&&(Q+=S,S=ta*z);ia=J-R;var Yb=W;W=d.fitToBounds(W,0,n);ia+=Yb-W;ia=d.fitToBounds(ia,-W,n-W+F*ca);S<p&&0<Q&&(ua=new d.Cuboid(f,ia,Q,F-a.d3x,z-a.d3y,Ia,Qa,P,sa,da,oa,u,r,ha,Xa,Kb),C.columnWidth=
Math.abs(ia),C.columnHeight=Math.abs(Q))}else{"3d"==B?(W=J-(t/2-this.depthCount+1)*(k+K)+K/2+F*ca,S=N+z*ca,ta=ca):(W=J-(t/2-ca)*(k+K)+K/2,S=N,ta=0);Q=k;wa=W+k/2;xa=I;isNaN(N)||N<I&&!C.isNegative&&(xa=N);ja=W+k/2;ka=I;W+Q>n+ta*F&&(Q=n-W+ta*F);W<ta*F&&(Q+=W-ta*F,W=ta*F);ia=I-N;var Zb=S;S=d.fitToBounds(S,this.dy,p);ia+=Zb-S;ia=d.fitToBounds(ia,-S+z*ca,p-S);W<n+ca*F&&0<Q&&(this.showOnAxis&&(S-=z/2),ua=new d.Cuboid(f,Q,ia,F-a.d3x,z-a.d3y,Ia,Qa,P,sa,this.lineAlpha,oa,u,r,ha,Xa,Kb),C.columnHeight=Math.abs(ia),
C.columnWidth=Math.abs(Q))}}if(ua&&(va=ua.set,C.columnGraphics=va,va.translate(W,S),this.columnsSet.push(va),(C.url||this.showHandOnHover)&&va.setAttr("cursor","pointer"),!T)){"none"==B&&(D=r?(this.end+1-M)*E-c:E*M+c);"3d"==B&&(r?(D=(this.end+1-M)*E-c-1E3*this.depthCount,wa+=F*this.columnIndex,ja+=F*this.columnIndex,C.y+=F*this.columnIndex):(D=(E-c)*(M+1)+1E3*this.depthCount,xa+=z*this.columnIndex,ka+=z*this.columnIndex,C.y+=z*this.columnIndex));if("regular"==B||"100%"==B)D=r?0<Ba.value?(this.end+
1-M)*E+c:(this.end+1-M)*E-c:0<Ba.value?E*M+c:E*M-c;this.columnsArray.push({column:ua,depth:D});C.x=r?S+Q/2:W+Q/2;this.ownColumns.push(ua);this.animateColumns(ua,M,J,R,I,N);this.addListeners(va,C)}}break;case "candlestick":if(!isNaN(na)&&!isNaN(Z)){var ib,ub;sa=Aa;void 0!=C.lineColor&&(sa=C.lineColor);if(r){if(S=I-k/2,W=R,Q=k,S+Q>p&&(Q=p-S),0>S&&(Q+=S,S=0),S<p&&0<Q){var vb,wb;Z>na?(vb=[J,Oa],wb=[R,Na]):(vb=[R,Oa],wb=[J,Na]);!isNaN(Oa)&&!isNaN(Na)&&I<p&&0<I&&(ib=d.line(f,vb,[I,I],sa,da,P),ub=d.line(f,
wb,[I,I],sa,da,P));ia=J-R;ua=new d.Cuboid(f,ia,Q,F,z,Ia,Ta,P,sa,da,oa,u,r,ha,Xa)}}else if(W=J-k/2,S=N+P/2,Q=k,W+Q>n&&(Q=n-W),0>W&&(Q+=W,W=0),ia=I-N,W<n&&0<Q){sb&&Z>=na&&(Qa=0);var ua=new d.Cuboid(f,Q,ia,F,z,Ia,Qa,P,sa,da,oa,u,r,ha,Xa),xb,yb;Z>na?(xb=[I,Ea],yb=[N,Da]):(xb=[N,Ea],yb=[I,Da]);!isNaN(Ea)&&!isNaN(Da)&&J<n&&0<J&&(ib=d.line(f,[J,J],xb,sa,da,P),ub=d.line(f,[J,J],yb,sa,da,P))}ua&&(va=ua.set,C.columnGraphics=va,ba.push(va),va.translate(W,S-P/2),(C.url||this.showHandOnHover)&&va.setAttr("cursor",
"pointer"),ib&&(ba.push(ib),ba.push(ub)),wa=J,xa=I,r?(ka=I,ja=J,"open"==l&&(ja=R),"high"==l&&(ja=Oa),"low"==l&&(ja=Na)):(ka=I,"open"==l&&(ka=N),"high"==l&&(ka=Ea),"low"==l&&(ka=Da),ja=J),T||(C.x=r?S+Q/2:W+Q/2,this.animateColumns(ua,M,J,R,I,N),this.addListeners(va,C)))}break;case "ohlc":if(!(isNaN(na)||isNaN(qb)||isNaN(rb)||isNaN(Z))){Z<na&&(C.isNegative=!0,void 0!=Ca&&(Aa=Ca));var zb,Ab,Bb;if(r){var Cb=I-k/2,Cb=d.fitToBounds(Cb,0,p),Nb=d.fitToBounds(I,0,p),Db=I+k/2,Db=d.fitToBounds(Db,0,p);Ab=d.line(f,
[R,R],[Cb,Nb],Aa,da,P,ha);0<I&&I<p&&(zb=d.line(f,[Na,Oa],[I,I],Aa,da,P,ha));Bb=d.line(f,[J,J],[Nb,Db],Aa,da,P,ha);ka=I;ja=J;"open"==l&&(ja=R);"high"==l&&(ja=Oa);"low"==l&&(ja=Na)}else{var Eb=J-k/2,Eb=d.fitToBounds(Eb,0,n),Ob=d.fitToBounds(J,0,n),Fb=J+k/2,Fb=d.fitToBounds(Fb,0,n);Ab=d.line(f,[Eb,Ob],[N,N],Aa,da,P,ha);0<J&&J<n&&(zb=d.line(f,[J,J],[Da,Ea],Aa,da,P,ha));Bb=d.line(f,[Ob,Fb],[I,I],Aa,da,P,ha);ka=I;"open"==l&&(ka=N);"high"==l&&(ka=Ea);"low"==l&&(ka=Da);ja=J}ba.push(Ab);ba.push(zb);ba.push(Bb);
wa=J;xa=I}}if(!T&&!isNaN(Z)){var Pb=this.hideBulletsCount;if(this.end-this.start<=Pb||0===Pb){var $b=this.createBullet(C,ja,ka,M),Qb=this.labelText;if(Qb){var Gb=this.createLabel(C,ja,ka,Qb);(Gb=this.positionLabel(wa,xa,Gb,$b,Q,ia))&&this.allBullets.push(Gb)}if("regular"==B||"100%"==B){var Rb=g.totalText;if(Rb){var Sa=this.createLabel(C,0,0,Rb,g.totalTextColor);this.allBullets.push(Sa);var Sb=Sa.getBBox(),Tb=Sb.width,Ub=Sb.height,Ya,Za,Vb=g.totals[M];Vb&&Vb.remove();var $a=0;"column"!=h&&($a=bulletSize);
r?(Za=I,Ya=0>Z?J-Tb/2-2-$a:J+Tb/2+3+$a):(Ya=J,Za=0>Z?I+Ub/2+$a:I-Ub/2-3-$a);Sa.translate(Ya,Za);g.totals[M]=Sa;r?(0>Za||Za>p)&&Sa.remove():(0>Ya||Ya>n)&&Sa.remove()}}}}}}if("line"==h||"step"==h||"smoothedLine"==h)"smoothedLine"==h?this.drawSmoothedGraph(y,x,U,V):this.drawLineGraph(y,x,U,V),T||this.launchAnimation();this.bulletsHidden&&this.hideBullets()},animateColumns:function(a,b,c,e,f,g){var d=this;c=d.chart.startDuration;0<c&&!d.animationPlayed&&(d.seqAn?(a.set.hide(),d.animationArray.push(a),
a=setTimeout(function(){d.animate.call(d)},c/(d.end-d.start+1)*(b-d.start)*1E3),d.timeOuts.push(a)):d.animate(a))},createLabel:function(a,b,c,e,f){var g=this.chart,h=a.labelColor;h||(h=this.color);h||(h=g.color);f&&(h=f);f=this.fontSize;void 0===f&&(this.fontSize=f=g.fontSize);var k=this.labelFunction;e=g.formatString(e,a);e=d.cleanFromEmpty(e);k&&(e=k(a,e));a=d.text(this.container,e,h,g.fontFamily,f);a.node.style.pointerEvents="none";a.translate(b,c);this.bulletSet.push(a);return a},positiveClip:function(a){a.clipRect(this.pmx,
this.pmy,this.pmw,this.pmh)},negativeClip:function(a){a.clipRect(this.nmx,this.nmy,this.nmw,this.nmh)},drawLineGraph:function(a,b,c,e){var f=this;if(1<a.length){var g=f.set,h=f.chart,k=f.container,l=k.set(),m=k.set();g.push(m);g.push(l);var n=f.lineAlpha,p=f.lineThickness,g=f.fillAlphas,q=f.lineColorR,r=f.negativeLineAlpha;isNaN(r)&&(r=n);var t=f.lineColorSwitched;t&&(q=t);var t=f.fillColorsR,u=f.fillColorsSwitched;u&&(t=u);var A=f.dashLength;(u=f.dashLengthSwitched)&&(A=u);var u=f.negativeLineColor,
y=f.negativeFillColors,x=f.negativeFillAlphas,w=f.baseCoord;0!==f.negativeBase&&(w=f.valueAxis.getCoordinate(f.negativeBase));n=d.line(k,a,b,q,n,p,A,!1,!0);l.push(n);l.click(function(a){f.handleGraphEvent(a,"clickGraph")}).mouseover(function(a){f.handleGraphEvent(a,"rollOverGraph")}).mouseout(function(a){f.handleGraphEvent(a,"rollOutGraph")});void 0===u||f.useNegativeColorIfDown||(p=d.line(k,a,b,u,r,p,A,!1,!0),m.push(p));if(0<g||0<x)if(p=a.join(";").split(";"),r=b.join(";").split(";"),n=h.type,"serial"==
n?0<c.length?(c.reverse(),e.reverse(),p=a.concat(c),r=b.concat(e)):f.rotate?(r.push(r[r.length-1]),p.push(w),r.push(r[0]),p.push(w),r.push(r[0]),p.push(p[0])):(p.push(p[p.length-1]),r.push(w),p.push(p[0]),r.push(w),p.push(a[0]),r.push(r[0])):"xy"==n&&(b=f.fillToAxis)&&(d.isString(b)&&(b=h.getValueAxisById(b)),"H"==b.orientation?(w="top"==b.position?0:b.viH,p.push(p[p.length-1]),r.push(w),p.push(p[0]),r.push(w),p.push(a[0]),r.push(r[0])):(w="left"==b.position?0:b.viW,r.push(r[r.length-1]),p.push(w),
r.push(r[0]),p.push(w),r.push(r[0]),p.push(p[0]))),a=f.gradientRotation,0<g&&(h=d.polygon(k,p,r,t,g,1,"#000",0,a),h.pattern(f.pattern),l.push(h)),y||void 0!==u)isNaN(x)&&(x=g),y||(y=u),k=d.polygon(k,p,r,y,x,1,"#000",0,a),k.pattern(f.pattern),m.push(k),m.click(function(a){f.handleGraphEvent(a,"clickGraph")}).mouseover(function(a){f.handleGraphEvent(a,"rollOverGraph")}).mouseout(function(a){f.handleGraphEvent(a,"rollOutGraph")});f.applyMask(m,l)}},applyMask:function(a,b){var c=a.length();"serial"!=
this.chart.type||this.scrollbar||(this.positiveClip(b),0<c&&this.negativeClip(a))},drawSmoothedGraph:function(a,b,c,e){if(1<a.length){var f=this.set,g=this.container,h=g.set(),k=g.set();f.push(k);f.push(h);var l=this.lineAlpha,m=this.lineThickness,f=this.dashLength,n=this.fillAlphas,p=this.lineColorR,q=this.fillColorsR,r=this.negativeLineColor,t=this.negativeFillColors,u=this.negativeFillAlphas,A=this.baseCoord,y=this.lineColorSwitched;y&&(p=y);(y=this.fillColorsSwitched)&&(q=y);y=this.negativeLineAlpha;
isNaN(y)&&(y=l);l=new d.Bezier(g,a,b,p,l,m,q,0,f);h.push(l.path);void 0!==r&&(m=new d.Bezier(g,a,b,r,y,m,q,0,f),k.push(m.path));0<n&&(l=a.join(";").split(";"),p=b.join(";").split(";"),m="",0<c.length?(c.push("M"),e.push("M"),c.reverse(),e.reverse(),l=a.concat(c),p=b.concat(e)):(this.rotate?(m+=" L"+A+","+b[b.length-1],m+=" L"+A+","+b[0]):(m+=" L"+a[a.length-1]+","+A,m+=" L"+a[0]+","+A),m+=" L"+a[0]+","+b[0]),c=new d.Bezier(g,l,p,NaN,0,0,q,n,f,m),c.path.pattern(this.pattern),h.push(c.path),t||void 0!==
r)&&(u||(u=n),t||(t=r),a=new d.Bezier(g,a,b,NaN,0,0,t,u,f,m),a.path.pattern(this.pattern),k.push(a.path));this.applyMask(k,h)}},launchAnimation:function(){var a=this,b=a.chart.startDuration;if(0<b&&!a.animationPlayed){var c=a.set,e=a.bulletSet;d.VML||(c.attr({opacity:a.startAlpha}),e.attr({opacity:a.startAlpha}));c.hide();e.hide();a.seqAn?(b=setTimeout(function(){a.animateGraphs.call(a)},a.index*b*1E3),a.timeOuts.push(b)):a.animateGraphs()}},animateGraphs:function(){var a=this.chart,b=this.set,c=
this.bulletSet,e=this.x,f=this.y;b.show();c.show();var g=a.startDuration,a=a.startEffect;b&&(this.rotate?(b.translate(-1E3,f),c.translate(-1E3,f)):(b.translate(e,-1E3),c.translate(e,-1E3)),b.animate({opacity:1,translate:e+","+f},g,a),c.animate({opacity:1,translate:e+","+f},g,a))},animate:function(a){var b=this.chart,c=this.animationArray;!a&&0<c.length&&(a=c[0],c.shift());c=d[d.getEffect(b.startEffect)];b=b.startDuration;a&&(this.rotate?a.animateWidth(b,c):a.animateHeight(b,c),a.set.show())},legendKeyColor:function(){var a=
this.legendColor,b=this.lineAlpha;void 0===a&&(a=this.lineColorR,0===b&&(b=this.fillColorsR)&&(a="object"==typeof b?b[0]:b));return a},legendKeyAlpha:function(){var a=this.legendAlpha;void 0===a&&(a=this.lineAlpha,this.fillAlphas>a&&(a=this.fillAlphas),0===a&&(a=this.bulletAlpha),0===a&&(a=1));return a},createBullet:function(a,b,c,e){if(!isNaN(b)&&!isNaN(c)){e=this.container;var f=this.bulletOffset,g=this.bulletSize;isNaN(a.bulletSize)||(g=a.bulletSize);var h=a.values.value,k=this.maxValue,l=this.minValue,
m=this.maxBulletSize,n=this.minBulletSize;isNaN(k)||(isNaN(h)||(g=(h-l)/(k-l)*(m-n)+n),l==k&&(g=m));k=g;this.bulletAxis&&(g=a.values.error,isNaN(g)||(h=g),g=this.bulletAxis.stepWidth*h);g<this.minBulletSize&&(g=this.minBulletSize);this.rotate?b=a.isNegative?b-f:b+f:c=a.isNegative?c+f:c-f;var p,n=this.bulletColorR;a.lineColor&&(this.bulletColorSwitched=a.lineColor);this.bulletColorSwitched&&(n=this.bulletColorSwitched);a.isNegative&&void 0!==this.bulletColorNegative&&(n=this.bulletColorNegative);void 0!==
a.color&&(n=a.color);var q;"xy"==this.chart.type&&this.valueField&&(q=this.pattern,a.pattern&&(q=a.pattern));f=this.bullet;a.bullet&&(f=a.bullet);var h=this.bulletBorderThickness,l=this.bulletBorderColorR,m=this.bulletBorderAlpha,r=this.bulletAlpha;l||(l=n);this.useLineColorForBulletBorder&&(l=this.lineColorR);var t=a.alpha;isNaN(t)||(r=t);if("none"!=this.bullet||a.bullet)p=d.bullet(e,f,g,n,r,h,l,m,k,0,q);if(this.customBullet||a.customBullet)q=this.customBullet,a.customBullet&&(q=a.customBullet),
q&&(p&&p.remove(),"function"==typeof q?(p=new q,p.chart=this.chart,a.bulletConfig&&(p.availableSpace=c,p.graph=this,p.graphDataItem=a,p.bulletY=c,a.bulletConfig.minCoord=this.minCoord-c,p.bulletConfig=a.bulletConfig),p.write(e),p=p.set):(this.chart.path&&(q=this.chart.path+q),p=e.set(),e=e.image(q,0,0,g,g),p.push(e),this.centerCustomBullets&&e.translate(-g/2,-g/2)));p&&((a.url||this.showHandOnHover)&&p.setAttr("cursor","pointer"),"serial"==this.chart.type&&(0>b-0||b-0>this.width||c<-g/2||c-0>this.height)&&
(p.remove(),p=null),p&&(this.bulletSet.push(p),p.translate(b,c),this.addListeners(p,a),this.allBullets.push(p)),a.bx=b,a.by=c);p?(p.size=g||0,a.bulletGraphics=p):p={size:0};p.graphDataItem=a;return p}},showBullets:function(){var a=this.allBullets,b;this.bulletsHidden=!1;for(b=0;b<a.length;b++)a[b].show()},hideBullets:function(){var a=this.allBullets,b;this.bulletsHidden=!0;for(b=0;b<a.length;b++)a[b].hide()},addListeners:function(a,b){var c=this;a.mouseover(function(a){c.handleRollOver(b,a)}).mouseout(function(a){c.handleRollOut(b,
a)}).touchend(function(a){c.handleRollOver(b,a);c.chart.panEventsEnabled&&c.handleClick(b,a)}).touchstart(function(a){c.handleRollOver(b,a)}).click(function(a){c.handleClick(b,a)}).dblclick(function(a){c.handleDoubleClick(b,a)}).contextmenu(function(a){c.handleRightClick(b,a)})},handleRollOver:function(a,b){if(a){var c=this.chart,e={type:"rollOverGraphItem",item:a,index:a.index,graph:this,target:this,chart:this.chart,event:b};this.fire("rollOverGraphItem",e);c.fire("rollOverGraphItem",e);clearTimeout(c.hoverInt);
e=this.showBalloon;c.chartCursor&&"serial"==c.type&&(e=!1,!c.chartCursor.valueBalloonsEnabled&&this.showBalloon&&(e=!0));if(e){var e=c.formatString(this.balloonText,a,!0),f=this.balloonFunction;f&&(e=f(a,a.graph));e=d.cleanFromEmpty(e);f=c.getBalloonColor(this,a);c.balloon.showBullet=!1;c.balloon.pointerOrientation="V";var g=a.x,h=a.y;c.rotate&&(g=a.y,h=a.x);c.showBalloon(e,f,!0,g+c.marginLeftReal,h+c.marginTopReal)}}this.handleGraphEvent(b,"rollOverGraph")},handleRollOut:function(a,b){this.chart.hideBalloon();
if(a){var c={type:"rollOutGraphItem",item:a,index:a.index,graph:this,target:this,chart:this.chart,event:b};this.fire("rollOutGraphItem",c);this.chart.fire("rollOutGraphItem",c)}this.handleGraphEvent(b,"rollOutGraph")},handleClick:function(a,b){if(a){var c={type:"clickGraphItem",item:a,index:a.index,graph:this,target:this,chart:this.chart,event:b};this.fire("clickGraphItem",c);this.chart.fire("clickGraphItem",c);d.getURL(a.url,this.urlTarget)}this.handleGraphEvent(b,"clickGraph")},handleGraphEvent:function(a,
b){var c={type:b,graph:this,target:this,chart:this.chart,event:a};this.fire(b,c);this.chart.fire(b,c)},handleRightClick:function(a,b){if(a){var c={type:"rightClickGraphItem",item:a,index:a.index,graph:this,target:this,chart:this.chart,event:b};this.fire("rightClickGraphItem",c);this.chart.fire("rightClickGraphItem",c)}},handleDoubleClick:function(a,b){if(a){var c={type:"doubleClickGraphItem",item:a,index:a.index,graph:this,target:this,chart:this.chart,event:b};this.fire("doubleClickGraphItem",c);
this.chart.fire("doubleClickGraphItem",c)}},zoom:function(a,b){this.start=a;this.end=b;this.draw()},changeOpacity:function(a){var b=this.set;b&&b.setAttr("opacity",a);if(b=this.ownColumns){var c;for(c=0;c<b.length;c++){var e=b[c].set;e&&e.setAttr("opacity",a)}}(b=this.bulletSet)&&b.setAttr("opacity",a)},destroy:function(){d.remove(this.set);d.remove(this.bulletSet);var a=this.timeOuts;if(a){var b;for(b=0;b<a.length;b++)clearTimeout(a[b])}this.timeOuts=[]}});d.ChartCursor=d.Class({construct:function(a){this.cname=
"ChartCursor";this.createEvents("changed","zoomed","onHideCursor","draw","selected","moved");this.enabled=!0;this.cursorAlpha=1;this.selectionAlpha=.2;this.cursorColor="#CC0000";this.categoryBalloonAlpha=1;this.color="#FFFFFF";this.type="cursor";this.zoomed=!1;this.zoomable=!0;this.pan=!1;this.categoryBalloonDateFormat="MMM DD, YYYY";this.categoryBalloonEnabled=this.valueBalloonsEnabled=!0;this.rolledOver=!1;this.cursorPosition="middle";this.bulletsEnabled=this.skipZoomDispatch=!1;this.bulletSize=
8;this.selectWithoutZooming=this.oneBalloonOnly=!1;this.graphBulletSize=1.7;this.animationDuration=.3;this.zooming=!1;this.adjustment=0;this.avoidBalloonOverlapping=!0;d.applyTheme(this,a,this.cname)},draw:function(){var a=this;a.destroy();var b=a.chart,c=b.container;a.rotate=b.rotate;a.container=c;c=c.set();c.translate(a.x,a.y);a.set=c;b.cursorSet.push(c);c=new d.AmBalloon;c.chart=b;a.categoryBalloon=c;d.copyProperties(b.balloon,c);c.cornerRadius=0;c.shadowAlpha=0;c.borderThickness=1;c.borderAlpha=
1;c.showBullet=!1;var e=a.categoryBalloonColor;void 0===e&&(e=a.cursorColor);c.fillColor=e;c.fillAlpha=a.categoryBalloonAlpha;c.borderColor=e;c.color=a.color;e=a.valueLineAxis;d.isString(e)&&(e=b.getValueAxisById(e));e||(e=b.valueAxes[0]);a.valueLineAxis=e;a.valueLineBalloonEnabled&&(e=new d.AmBalloon,a.vaBalloon=e,d.copyProperties(c,e),e.animationDuration=0,a.rotate||(e.pointerOrientation="H"));a.rotate&&(c.pointerOrientation="H");a.extraWidth=0;a.prevX=[];a.prevY=[];a.prevTX=[];a.prevTY=[];if(a.valueBalloonsEnabled)for(c=
0;c<b.graphs.length;c++)e=new d.AmBalloon,e.chart=b,d.copyProperties(b.balloon,e),b.graphs[c].valueBalloon=e;"cursor"==a.type?a.createCursor():a.createCrosshair();a.interval=setInterval(function(){a.detectMovement.call(a)},40)},updateData:function(){var a=this.chart;this.data=a.chartData;this.firstTime=a.firstTime;this.lastTime=a.lastTime},createCursor:function(){var a=this.chart,b=this.cursorAlpha,c=a.categoryAxis,e=this.categoryBalloon,f,g,h,k;h=a.dx;k=a.dy;var l=this.width,m=this.height,a=a.rotate;
e.pointerWidth=c.tickLength;a?(f=[0,l,l+h],g=[0,0,k],h=[h,0,0],k=[k,0,m]):(f=[h,0,0],g=[k,0,m],h=[0,l,l+h],k=[0,0,k]);this.line=f=d.line(this.container,f,g,this.cursorColor,b,1);(g=this.fullRectSet)?(g.push(f),g.translate(this.x,this.y)):this.set.push(f);this.valueLineEnabled&&(f=this.valueLineAlpha,isNaN(f)||(b=f),this.vLine=b=d.line(this.container,h,k,this.cursorColor,b,1),this.set.push(b));this.setBalloonBounds(e,c,a);(c=this.vaBalloon)&&this.setBalloonBounds(c,this.valueLineAxis,!a);this.hideCursor()},
createCrosshair:function(){var a=this.cursorAlpha,b=this.container,c=d.line(b,[0,0],[0,this.height],this.cursorColor,a,1),a=d.line(b,[0,this.width],[0,0],this.cursorColor,a,1);this.set.push(c);this.set.push(a);this.vLine=c;this.hLine=a;this.hideCursor()},detectMovement:function(){var a=this.chart;if(a.mouseIsOver){var b=a.mouseX-this.x,c=a.mouseY-this.y;-.5<b&&b<this.width+1&&0<c&&c<this.height?(this.drawing?this.rolledOver||a.setMouseCursor("crosshair"):this.pan&&(this.rolledOver||a.setMouseCursor("move")),
this.rolledOver=!0,(this.valueLineEnabled||this.valueLineBalloonEnabled)&&this.updateVLine(b,c),this.setPosition()):this.rolledOver&&(this.handleMouseOut(),this.rolledOver=!1)}else this.rolledOver&&(this.handleMouseOut(),this.rolledOver=!1)},updateVLine:function(a,b){var c=this.vLine,e=this.vaBalloon;if((c||e)&&!this.panning&&!this.drawing){c&&c.show();var f=this.valueLineAxis,g,d=this.rotate;d?(c&&c.translate(a,0),f&&(g=f.coordinateToValue(a)),c=a):(c&&c.translate(0,b),f&&(g=f.coordinateToValue(b)),
c=b-1);if(e&&!isNaN(g)&&this.prevLineValue!=g){var k=f.formatValue(g,!0);e&&(this.setBalloonPosition(e,f,c,!d),e.showBalloon(k))}this.prevLineValue=g}},getMousePosition:function(){var a,b=this.width,c=this.height;a=this.chart;this.rotate?(a=a.mouseY-this.y,0>a&&(a=0),a>c&&(a=c)):(a=a.mouseX-this.x-1,0>a&&(a=0),a>b&&(a=b));return a},updateCrosshair:function(){var a=this.chart,b=a.mouseX-this.x,c=a.mouseY-this.y,e=this.vLine,f=this.hLine,b=d.fitToBounds(b,0,this.width),c=d.fitToBounds(c,0,this.height);
0<this.cursorAlpha&&(e.show(),f.show(),e.translate(b,0),f.translate(0,c));this.zooming&&(a.hideXScrollbar&&(b=NaN),a.hideYScrollbar&&(c=NaN),this.updateSelectionSize(b,c));this.fireMoved();a.mouseIsOver||this.zooming||this.hideCursor()},fireMoved:function(){var a=this.chart,b={type:"moved",target:this};b.chart=a;b.zooming=this.zooming;b.x=a.mouseX-this.x;b.y=a.mouseY-this.y;this.fire("moved",b)},updateSelectionSize:function(a,b){d.remove(this.selection);var c=this.selectionPosX,e=this.selectionPosY,
f=0,g=0,h=this.width,k=this.height;isNaN(a)||(c>a&&(f=a,h=c-a),c<a&&(f=c,h=a-c),c==a&&(f=a,h=0),h+=this.extraWidth,f-=this.extraWidth/2);isNaN(b)||(e>b&&(g=b,k=e-b),e<b&&(g=e,k=b-e),e==b&&(g=b,k=0),k+=this.extraWidth,g-=this.extraWidth/2);0<h&&0<k&&(c=d.rect(this.container,h,k,this.cursorColor,this.selectionAlpha),c.translate(f+this.x,g+this.y),this.selection=c)},arrangeBalloons:function(){var a=this.valueBalloons,b=this.x,c=this.y,e=this.height+c;a.sort(this.compareY);var f;for(f=0;f<a.length;f++){var g=
a[f].balloon;g.setBounds(b,c,b+this.width,e);g.prevX=this.prevX[f];g.prevY=this.prevY[f];g.prevTX=this.prevTX[f];g.prevTY=this.prevTY[f];g.draw();e=g.yPos-3}this.arrangeBalloons2()},compareY:function(a,b){return a.yy<b.yy?1:-1},arrangeBalloons2:function(){var a=this.valueBalloons;a.reverse();var b,c=this.x,e,f,g=a.length;for(f=0;f<g;f++){var d=a[f].balloon;b=d.bottom;var k=d.bottom-d.yPos,l=g-f-1;0<f&&b-k<e+3&&(d.setBounds(c,e+3,c+this.width,e+k+3),d.prevX=this.prevX[l],d.prevY=this.prevY[l],d.prevTX=
this.prevTX[l],d.prevTY=this.prevTY[l],d.draw());d.set&&d.set.show();this.prevX[l]=d.prevX;this.prevY[l]=d.prevY;this.prevTX[l]=d.prevTX;this.prevTY[l]=d.prevTY;e=d.bottom}},showBullets:function(){d.remove(this.allBullets);var a=this.container,b=a.set();this.set.push(b);this.set.show();this.allBullets=b;var b=this.chart.graphs,c;for(c=0;c<b.length;c++){var e=b[c];if(!e.hidden&&e.balloonText){var f=this.data[this.index].axes[e.valueAxis.id].graphs[e.id],g=f.y;if(!isNaN(g)){var h,k;h=f.x;this.rotate?
(k=g,g=h):k=h;e=d.circle(a,this.bulletSize/2,this.chart.getBalloonColor(e,f,!0),e.cursorBulletAlpha);e.translate(k,g);this.allBullets.push(e)}}}},destroy:function(){this.clear();d.remove(this.selection);this.selection=null;var a=this.categoryBalloon;a&&a.destroy();(a=this.vaBalloon)&&a.destroy();this.destroyValueBalloons();d.remove(this.set)},clear:function(){clearInterval(this.interval)},destroyValueBalloons:function(){var a=this.valueBalloons;if(a){var b;for(b=0;b<a.length;b++)a[b].balloon.hide()}},
zoom:function(a,b,c,e){var f=this.chart;this.destroyValueBalloons();this.zooming=!1;var g;this.rotate?this.selectionPosY=g=f.mouseY:this.selectionPosX=g=f.mouseX;this.start=a;this.end=b;this.startTime=c;this.endTime=e;this.zoomed=!0;e=f.categoryAxis;f=this.rotate;b=this.width;c=this.height;a=e.stepWidth;this.fullWidth&&(g=1,e.parseDates&&!e.equalSpacing&&(g=e.minDuration()),f?this.extraWidth=c=a*g:(this.extraWidth=b=a*g,this.categoryBalloon.minWidth=b),this.line&&this.line.remove(),this.line=d.rect(this.container,
b,c,this.cursorColor,this.cursorAlpha,0),this.fullRectSet&&this.fullRectSet.push(this.line));this.stepWidth=a;this.tempVal=this.valueBalloonsEnabled;this.valueBalloonsEnabled=!1;this.setPosition();this.valueBalloonsEnabled=this.tempVal;this.hideCursor()},hideObj:function(a){a&&a.hide()},hideCursor:function(a){void 0===a&&(a=!0);this.hideObj(this.set);this.hideObj(this.categoryBalloon);this.hideObj(this.line);this.hideObj(this.vLine);this.hideObj(this.hLine);this.hideObj(this.vaBalloon);this.hideObj(this.allBullets);
this.destroyValueBalloons();this.selectWithoutZooming||d.remove(this.selection);this.previousIndex=NaN;a&&this.fire("onHideCursor",{type:"onHideCursor",chart:this.chart,target:this});this.drawing||this.chart.setMouseCursor("auto");this.normalizeBulletSize()},setPosition:function(a,b,c){void 0===b&&(b=!0);if("cursor"==this.type){if(this.tempPosition=NaN,d.ifArray(this.data))isNaN(a)&&(a=this.getMousePosition()),(a!=this.previousMousePosition||!0===this.zoomed||this.oneBalloonOnly)&&!isNaN(a)&&("mouse"==
this.cursorPosition&&(this.tempPosition=a),isNaN(c)&&(c=this.chart.categoryAxis.xToIndex(a)),c!=this.previousIndex||this.zoomed||"mouse"==this.cursorPosition||this.oneBalloonOnly)&&(this.updateCursor(c,b),this.zoomed=!1),this.previousMousePosition=a}else this.updateCrosshair()},normalizeBulletSize:function(){var a=this.resizedBullets;if(a)for(var b=0;b<a.length;b++){var c=a[b],e=c.bulletGraphics;e&&(e.translate(c.bx,c.by,1),c=c.graph,isNaN(this.graphBulletAlpha)||(e.setAttr("fill-opacity",c.bulletAlpha),
e.setAttr("stroke-opacity",c.bulletBorderAlpha)))}},updateCursor:function(a,b){var c=this.chart,e=this.fullWidth,f=c.mouseX-this.x,g=c.mouseY-this.y;this.drawingNow&&(d.remove(this.drawingLine),this.drawingLine=d.line(this.container,[this.x+this.drawStartX,this.x+f],[this.y+this.drawStartY,this.y+g],this.cursorColor,1,1));if(this.enabled){void 0===b&&(b=!0);this.index=a+=this.adjustment;var h=c.categoryAxis,k=c.dx,l=c.dy,m=this.x+1,n=this.y+1,p=this.width,q=this.height,r=this.data[a];this.fireMoved();
if(r){var t=r.x[h.id],u=c.rotate,A=this.stepWidth,y=this.categoryBalloon,x=this.firstTime,w=this.lastTime,G=this.cursorPosition,v=this.zooming,z=this.panning,E=c.graphs;if(c.mouseIsOver||v||z||this.forceShow)if(this.forceShow=!1,z){var k=this.panClickPos,c=this.panClickEndTime,v=this.panClickStartTime,D=this.panClickEnd,m=this.panClickStart,f=(u?k-g:k-f)/A;if(!h.parseDates||h.equalSpacing)f=Math.round(f);0!==f&&(k={type:"zoomed",target:this},k.chart=this.chart,h.parseDates&&!h.equalSpacing?(c+f>w&&
(f=w-c),v+f<x&&(f=x-v),k.start=Math.round(v+f),k.end=Math.round(c+f),this.fire(k.type,k)):D+f>=this.data.length||0>m+f||(k.start=m+f,k.end=D+f,this.fire(k.type,k)))}else{"start"==G?t-=h.cellWidth/2:"mouse"==G&&(c.mouseIsOver?t=u?g-2:f-2:isNaN(this.tempPosition)||(t=this.tempPosition-2));if(u){if(0>t)if(v)t=0;else{this.hideCursor();return}if(t>q+1)if(v)t=q+1;else{this.hideCursor();return}}else{if(0>t)if(v)t=0;else{this.hideCursor();return}if(t>p)if(v)t=p;else{this.hideCursor();return}}if(0<this.cursorAlpha){var F=
this.line;u?(x=0,w=t+l,e&&(w-=h.cellWidth/2)):(x=t,w=0,e&&(x-=h.cellWidth/2));A=this.animationDuration;0<A&&!this.zooming?isNaN(this.previousX)?F.translate(x,w):(F.translate(this.previousX,this.previousY),F.animate({translate:x+","+w},A,"easeOutSine")):F.translate(x,w);this.previousX=x;this.previousY=w;F.show()}this.linePos=u?t+l:t;v&&(e&&F.hide(),u?this.updateSelectionSize(NaN,t):this.updateSelectionSize(t,NaN));A=!0;v&&(A=!1);this.categoryBalloonEnabled&&A?(this.setBalloonPosition(y,h,t,u),(x=this.categoryBalloonFunction)?
y.showBalloon(x(r.category)):h.parseDates?(h=d.formatDate(r.category,this.categoryBalloonDateFormat,c),-1!=h.indexOf("fff")&&(h=d.formatMilliseconds(h,r.category)),y.showBalloon(h)):y.showBalloon(d.fixNewLines(r.category))):y.hide();E&&this.bulletsEnabled&&this.showBullets();if(this.oneBalloonOnly){t=Infinity;for(h=0;h<E.length;h++)x=E[h],x.showBalloon&&!x.hidden&&x.balloonText&&(w=r.axes[x.valueAxis.id].graphs[x.id],y=w.y,isNaN(y)||(u?Math.abs(f-y)<t&&(t=Math.abs(f-y),D=x):Math.abs(g-y)<t&&(t=Math.abs(g-
y),D=x)));this.mostCloseGraph&&(D=this.mostCloseGraph)}if(a!=this.previousIndex||D!=this.previousMostCloseGraph)if(this.normalizeBulletSize(),this.destroyValueBalloons(),this.resizedBullets=[],E&&this.valueBalloonsEnabled&&A&&c.balloon.enabled){this.valueBalloons=A=[];for(h=0;h<E.length;h++)if(x=E[h],y=NaN,(!this.oneBalloonOnly||x==D)&&x.showBalloon&&!x.hidden&&x.balloonText&&("step"==x.type&&"left"==x.stepDirection&&(r=this.data[a+1]),r)){if(w=r.axes[x.valueAxis.id].graphs[x.id])y=w.y;if(this.showNextAvailable&&
isNaN(y)&&a+1<this.data.length)for(t=a+1;t<this.data.length;t++)if(e=this.data[t])if(w=e.axes[x.valueAxis.id].graphs[x.id],y=w.y,!isNaN(y))break;if(!isNaN(y)){e=w.x;l=!0;if(u){if(t=y,0>e||e>q)l=!1}else if(t=e,e=y,0>t||t>p+k+1)l=!1;l&&(l=this.graphBulletSize,F=this.graphBulletAlpha,1==l&&isNaN(F)||!d.isModern||!(G=w.bulletGraphics)||(G.getBBox(),G.translate(w.bx,w.by,l),this.resizedBullets.push(w),isNaN(F)||(G.setAttr("fill-opacity",F),G.setAttr("stroke-opacity",F))),l=x.valueBalloon,F=c.getBalloonColor(x,
w),l.setBounds(m,n,m+p,n+q),l.pointerOrientation="H",G=this.balloonPointerOrientation,"vertical"==G&&(l.pointerOrientation="V"),"horizontal"==G&&(l.pointerOrientation="H"),l.changeColor(F),void 0!==x.balloonAlpha&&(l.fillAlpha=x.balloonAlpha),void 0!==x.balloonTextColor&&(l.color=x.balloonTextColor),l.setPosition(t+m,e+n),t=c.formatString(x.balloonText,w,!0),(e=x.balloonFunction)&&(t=e(w,x).toString()),""!==t&&(u?l.showBalloon(t):(l.text=t,l.show=!0),A.push({yy:y,balloon:l})),!u&&l.set&&(l.set.hide(),
x=l.textDiv)&&(x.style.visibility="hidden"))}}this.avoidBalloonOverlapping&&this.arrangeBalloons()}b?(k={type:"changed"},k.index=a,k.chart=this.chart,k.zooming=v,k.mostCloseGraph=D,k.position=u?g:f,k.target=this,c.fire("changed",k),this.fire("changed",k),this.skipZoomDispatch=!1):(this.skipZoomDispatch=!0,c.updateLegendValues(a));this.previousIndex=a;this.previousMostCloseGraph=D}}}else this.hideCursor()},setBalloonPosition:function(a,b,c,e){var f=b.position,g=b.inside;b=b.axisThickness;var d=this.chart,
k=d.dx,d=d.dy,l=this.x,m=this.y,n=this.width,p=this.height;e?(g&&("right"==f?a.setBounds(l,m+d,l+n+k,m+c+d):a.setBounds(l,m+d,l+n+k,m+c)),"right"==f?g?a.setPosition(l+n+k,m+c+d):a.setPosition(l+n+k+b,m+c+d):g?a.setPosition(l,m+c):a.setPosition(l-b,m+c)):"top"==f?g?a.setPosition(l+c+k,m+d):a.setPosition(l+c+k,m+d-b+1):g?a.setPosition(l+c,m+p):a.setPosition(l+c,m+p+b-1)},setBalloonBounds:function(a,b,c){var e=b.position,f=b.inside,g=b.axisThickness,d=b.tickLength,k=this.chart,l=k.dx,k=k.dy,m=this.x,
n=this.y,p=this.width,q=this.height;c?(f&&(a.pointerWidth=0),"right"==e?f?a.setBounds(m,n+k,m+p+l,n+q+k):a.setBounds(m+p+l+g,n+k,m+p+1E3,n+q+k):f?a.setBounds(m,n,p+m,q+n):a.setBounds(-1E3,-1E3,m-d-g,n+q+15)):(a.maxWidth=p,b.parseDates&&(d=0,a.pointerWidth=0),"top"==e?f?a.setBounds(m+l,n+k,p+l+m,q+n):a.setBounds(m+l,-1E3,p+l+m,n+k-d-g):f?a.setBounds(m,n,p+m,q+n-d):a.setBounds(m,n+q+d+g-1,m+p,n+q+d+g))},enableDrawing:function(a){this.enabled=!a;this.hideCursor();this.rolledOver=!1;this.drawing=a},isZooming:function(a){a&&
a!=this.zooming&&this.handleMouseDown("fake");a||a==this.zooming||this.handleMouseUp()},handleMouseOut:function(){if(this.enabled)if(this.zooming)this.setPosition();else{this.index=void 0;var a={type:"changed",index:void 0,target:this};a.chart=this.chart;this.fire("changed",a);this.hideCursor()}},handleReleaseOutside:function(){this.handleMouseUp()},handleMouseUp:function(){var a=this.chart,b=this.data,c;if(a){var e=a.mouseX-this.x,f=a.mouseY-this.y;if(this.drawingNow){this.drawingNow=!1;d.remove(this.drawingLine);
c=this.drawStartX;var g=this.drawStartY;if(2<Math.abs(c-e)||2<Math.abs(g-f))c={type:"draw",target:this,chart:a,initialX:c,initialY:g,finalX:e,finalY:f},this.fire(c.type,c)}if(this.enabled&&0<b.length){if(this.pan)this.rolledOver=!1;else if(this.zoomable&&this.zooming){c=this.selectWithoutZooming?{type:"selected"}:{type:"zoomed"};c.target=this;c.chart=a;if("cursor"==this.type)this.rotate?this.selectionPosY=f:this.selectionPosX=f=e,4>Math.abs(f-this.initialMouse)&&this.fromIndex==this.index||(this.index<
this.fromIndex?(c.end=this.fromIndex,c.start=this.index):(c.end=this.index,c.start=this.fromIndex),f=a.categoryAxis,f.parseDates&&!f.equalSpacing&&(b[c.start]&&(c.start=b[c.start].time),b[c.end]&&(c.end=a.getEndTime(b[c.end].time))),this.skipZoomDispatch||this.fire(c.type,c));else{var h=this.initialMouseX,k=this.initialMouseY;3>Math.abs(e-h)&&3>Math.abs(f-k)||(b=Math.min(h,e),g=Math.min(k,f),e=Math.abs(h-e),f=Math.abs(k-f),a.hideXScrollbar&&(b=0,e=this.width),a.hideYScrollbar&&(g=0,f=this.height),
c.selectionHeight=f,c.selectionWidth=e,c.selectionY=g,c.selectionX=b,this.skipZoomDispatch||this.fire(c.type,c))}this.selectWithoutZooming||d.remove(this.selection)}this.skipZoomDispatch=!1}}this.panning=this.zooming=!1},showCursorAt:function(a){var b=this.chart.categoryAxis;a=b.parseDates?b.dateToCoordinate(a):b.categoryToCoordinate(a);this.previousMousePosition=NaN;this.forceShow=!0;this.setPosition(a,!1)},clearSelection:function(){d.remove(this.selection)},handleMouseDown:function(a){if(this.zoomable||
this.pan||this.drawing){var b=this.rotate,c=this.chart,e=c.mouseX-this.x,f=c.mouseY-this.y;if(0<e&&e<this.width&&0<f&&f<this.height||"fake"==a)this.setPosition(),this.selectWithoutZooming&&d.remove(this.selection),this.drawing?(this.drawStartY=f,this.drawStartX=e,this.drawingNow=!0):this.pan?(this.zoomable=!1,c.setMouseCursor("move"),this.panning=!0,this.panClickPos=b?f:e,this.panClickStart=this.start,this.panClickEnd=this.end,this.panClickStartTime=this.startTime,this.panClickEndTime=this.endTime):
this.zoomable&&("cursor"==this.type?(this.fromIndex=this.index,b?(this.initialMouse=f,this.selectionPosY=this.linePos):(this.initialMouse=e,this.selectionPosX=this.linePos)):(this.initialMouseX=e,this.initialMouseY=f,this.selectionPosX=e,this.selectionPosY=f),this.zooming=!0)}}});d.SimpleChartScrollbar=d.Class({construct:function(a){this.createEvents("zoomed");this.backgroundColor="#D4D4D4";this.backgroundAlpha=1;this.selectedBackgroundColor="#EFEFEF";this.scrollDuration=this.selectedBackgroundAlpha=
1;this.resizeEnabled=!0;this.hideResizeGrips=!1;this.scrollbarHeight=20;this.updateOnReleaseOnly=!1;9>document.documentMode&&(this.updateOnReleaseOnly=!0);this.dragIconWidth=18;this.dragIconHeight=25;d.applyTheme(this,a,"SimpleChartScrollbar")},draw:function(){var a=this;a.destroy();a.interval=setInterval(function(){a.updateScrollbar.call(a)},40);var b=a.chart.container,c=a.rotate,e=a.chart,f=b.set();a.set=f;e.scrollbarsSet.push(f);var g,h;c?(g=a.scrollbarHeight,h=e.plotAreaHeight):(h=a.scrollbarHeight,
g=e.plotAreaWidth);a.width=g;if((a.height=h)&&g){var k=d.rect(b,g,h,a.backgroundColor,a.backgroundAlpha,1,a.backgroundColor,a.backgroundAlpha);a.bg=k;f.push(k);k=d.rect(b,g,h,"#000",.005);f.push(k);a.invisibleBg=k;k.click(function(){a.handleBgClick()}).mouseover(function(){a.handleMouseOver()}).mouseout(function(){a.handleMouseOut()}).touchend(function(){a.handleBgClick()});k=d.rect(b,g,h,a.selectedBackgroundColor,a.selectedBackgroundAlpha);a.selectedBG=k;f.push(k);g=d.rect(b,g,h,"#000",.005);a.dragger=
g;f.push(g);g.mousedown(function(b){a.handleDragStart(b)}).mouseup(function(){a.handleDragStop()}).mouseover(function(){a.handleDraggerOver()}).mouseout(function(){a.handleMouseOut()}).touchstart(function(b){a.handleDragStart(b)}).touchend(function(){a.handleDragStop()});g=e.pathToImages;c?(k=g+"dragIconH.gif",g=a.dragIconWidth,c=a.dragIconHeight):(k=g+"dragIcon.gif",c=a.dragIconWidth,g=a.dragIconHeight);h=b.image(k,0,0,c,g);var k=b.image(k,0,0,c,g),l=10,m=20;e.panEventsEnabled&&(l=25,m=a.scrollbarHeight);
var n=d.rect(b,l,m,"#000",.005),p=d.rect(b,l,m,"#000",.005);p.translate(-(l-c)/2,-(m-g)/2);n.translate(-(l-c)/2,-(m-g)/2);c=b.set([h,p]);b=b.set([k,n]);a.iconLeft=c;f.push(a.iconLeft);a.iconRight=b;f.push(b);c.mousedown(function(){a.leftDragStart()}).mouseup(function(){a.leftDragStop()}).mouseover(function(){a.iconRollOver()}).mouseout(function(){a.iconRollOut()}).touchstart(function(b){a.leftDragStart()}).touchend(function(){a.leftDragStop()});b.mousedown(function(){a.rightDragStart()}).mouseup(function(){a.rightDragStop()}).mouseover(function(){a.iconRollOver()}).mouseout(function(){a.iconRollOut()}).touchstart(function(b){a.rightDragStart()}).touchend(function(){a.rightDragStop()});
d.ifArray(e.chartData)?f.show():f.hide();a.hideDragIcons();a.clipDragger(!1)}f.translate(a.x,a.y);f.node.style.msTouchAction="none"},updateScrollbarSize:function(a,b){a=Math.round(a);b=Math.round(b);var c=this.dragger,e,f,d,h;this.rotate?(e=0,f=a,d=this.width+1,h=b-a,c.setAttr("height",b-a),c.setAttr("y",f)):(e=a,f=0,d=b-a,h=this.height+1,c.setAttr("width",b-a),c.setAttr("x",e));this.clipAndUpdate(e,f,d,h)},updateScrollbar:function(){var a,b=!1,c,e,f=this.x,d=this.y,h=this.dragger,k=this.getDBox();
if(k){c=k.x+f;e=k.y+d;var l=k.width,k=k.height,m=this.rotate,n=this.chart,p=this.width,q=this.height,r=n.mouseX,t=n.mouseY;a=this.initialMouse;this.forceClip&&this.clipDragger(!0);n.mouseIsOver&&(this.dragging&&(n=this.initialCoord,m?(a=n+(t-a),0>a&&(a=0),n=q-k,a>n&&(a=n),h.setAttr("y",a)):(a=n+(r-a),0>a&&(a=0),n=p-l,a>n&&(a=n),h.setAttr("x",a)),this.clipDragger(!0)),this.resizingRight&&(m?(a=t-e,a+e>q+d&&(a=q-e+d),0>a?(this.resizingRight=!1,b=this.resizingLeft=!0):(0===a&&(a=.1),h.setAttr("height",
a))):(a=r-c,a+c>p+f&&(a=p-c+f),0>a?(this.resizingRight=!1,b=this.resizingLeft=!0):(0===a&&(a=.1),h.setAttr("width",a))),this.clipDragger(!0)),this.resizingLeft&&(m?(c=e,e=t,e<d&&(e=d),e>q+d&&(e=q+d),a=!0===b?c-e:k+c-e,0>a?(this.resizingRight=!0,this.resizingLeft=!1,h.setAttr("y",c+k-d)):(0===a&&(a=.1),h.setAttr("y",e-d),h.setAttr("height",a))):(e=r,e<f&&(e=f),e>p+f&&(e=p+f),a=!0===b?c-e:l+c-e,0>a?(this.resizingRight=!0,this.resizingLeft=!1,h.setAttr("x",c+l-f)):(0===a&&(a=.1),h.setAttr("x",e-f),h.setAttr("width",
a))),this.clipDragger(!0)))}},stopForceClip:function(){this.forceClip=!1},clipDragger:function(a){var b=this.getDBox();if(b){var c=b.x,e=b.y,f=b.width,b=b.height,d=!1;if(this.rotate){if(c=0,f=this.width+1,this.clipY!=e||this.clipH!=b)d=!0}else if(e=0,b=this.height+1,this.clipX!=c||this.clipW!=f)d=!0;d&&(this.clipAndUpdate(c,e,f,b),a&&(this.updateOnReleaseOnly||this.dispatchScrollbarEvent()))}},maskGraphs:function(){},clipAndUpdate:function(a,b,c,e){this.clipX=a;this.clipY=b;this.clipW=c;this.clipH=
e;this.selectedBG.clipRect(a,b,c,e);this.updateDragIconPositions();this.maskGraphs(a,b,c,e)},dispatchScrollbarEvent:function(){if(this.skipEvent)this.skipEvent=!1;else{var a=this.chart;a.hideBalloon();var b=this.getDBox(),c=b.x,e=b.y,f=b.width,b=b.height;this.rotate?(c=e,f=this.height/b):f=this.width/f;a={type:"zoomed",position:c,chart:a,target:this,multiplier:f};this.fire(a.type,a)}},updateDragIconPositions:function(){var a=this.getDBox(),b=a.x,c=a.y,e=this.iconLeft,f=this.iconRight,d,h,k=this.scrollbarHeight;
this.rotate?(d=this.dragIconWidth,h=this.dragIconHeight,e.translate((k-h)/2,c-d/2),f.translate((k-h)/2,c+a.height-d/2)):(d=this.dragIconHeight,h=this.dragIconWidth,e.translate(b-h/2,(k-d)/2),f.translate(b-h/2+a.width,(k-d)/2))},showDragIcons:function(){this.resizeEnabled&&(this.iconLeft.show(),this.iconRight.show())},hideDragIcons:function(){if(!this.resizingLeft&&!this.resizingRight&&!this.dragging){if(this.hideResizeGrips||!this.resizeEnabled)this.iconLeft.hide(),this.iconRight.hide();this.removeCursors()}},
removeCursors:function(){this.chart.setMouseCursor("auto")},relativeZoom:function(a,b){this.dragger.stop();this.multiplier=a;this.position=b;this.updateScrollbarSize(b,this.rotate?b+this.height/a:b+this.width/a)},destroy:function(){this.clear();d.remove(this.set);d.remove(this.iconRight);d.remove(this.iconLeft)},clear:function(){clearInterval(this.interval)},handleDragStart:function(){var a=this.chart;this.dragger.stop();this.removeCursors();this.dragging=!0;var b=this.getDBox();this.rotate?(this.initialCoord=
b.y,this.initialMouse=a.mouseY):(this.initialCoord=b.x,this.initialMouse=a.mouseX)},handleDragStop:function(){this.updateOnReleaseOnly&&(this.updateScrollbar(),this.skipEvent=!1,this.dispatchScrollbarEvent());this.dragging=!1;this.mouseIsOver&&this.removeCursors();this.updateScrollbar()},handleDraggerOver:function(){this.handleMouseOver()},leftDragStart:function(){this.dragger.stop();this.resizingLeft=!0},leftDragStop:function(){this.resizingLeft=!1;this.mouseIsOver||this.removeCursors();this.updateOnRelease()},
rightDragStart:function(){this.dragger.stop();this.resizingRight=!0},rightDragStop:function(){this.resizingRight=!1;this.mouseIsOver||this.removeCursors();this.updateOnRelease()},iconRollOut:function(){this.removeCursors()},iconRollOver:function(){this.rotate?this.chart.setMouseCursor("n-resize"):this.chart.setMouseCursor("e-resize");this.handleMouseOver()},getDBox:function(){if(this.dragger)return this.dragger.getBBox()},handleBgClick:function(){var a=this;if(!a.resizingRight&&!a.resizingLeft){a.zooming=
!0;var b,c,e=a.scrollDuration,f=a.dragger;b=a.getDBox();var g=b.height,h=b.width;c=a.chart;var k=a.y,l=a.x,m=a.rotate;m?(b="y",c=c.mouseY-g/2-k,c=d.fitToBounds(c,0,a.height-g)):(b="x",c=c.mouseX-h/2-l,c=d.fitToBounds(c,0,a.width-h));a.updateOnReleaseOnly?(a.skipEvent=!1,f.setAttr(b,c),a.dispatchScrollbarEvent(),a.clipDragger()):(c=Math.round(c),m?f.animate({y:c},e,">"):f.animate({x:c},e,">"),a.forceClip=!0,clearTimeout(a.forceTO),a.forceTO=setTimeout(function(){a.stopForceClip.call(a)},5E3*e))}},
updateOnRelease:function(){this.updateOnReleaseOnly&&(this.updateScrollbar(),this.skipEvent=!1,this.dispatchScrollbarEvent())},handleReleaseOutside:function(){if(this.set){if(this.resizingLeft||this.resizingRight||this.dragging)this.updateOnRelease(),this.removeCursors();this.mouseIsOver=this.dragging=this.resizingRight=this.resizingLeft=!1;this.hideDragIcons();this.updateScrollbar()}},handleMouseOver:function(){this.mouseIsOver=!0;this.showDragIcons()},handleMouseOut:function(){this.mouseIsOver=
!1;this.hideDragIcons()}});d.ChartScrollbar=d.Class({inherits:d.SimpleChartScrollbar,construct:function(a){this.cname="ChartScrollbar";d.ChartScrollbar.base.construct.call(this,a);this.graphLineColor="#BBBBBB";this.graphLineAlpha=0;this.graphFillColor="#BBBBBB";this.graphFillAlpha=1;this.selectedGraphLineColor="#888888";this.selectedGraphLineAlpha=0;this.selectedGraphFillColor="#888888";this.selectedGraphFillAlpha=1;this.gridCount=0;this.gridColor="#FFFFFF";this.gridAlpha=.7;this.skipEvent=this.autoGridCount=
!1;this.color="#FFFFFF";this.scrollbarCreated=!1;this.offset=0;d.applyTheme(this,a,this.cname)},init:function(){var a=this.categoryAxis,b=this.chart;a||(this.categoryAxis=a=new d.CategoryAxis);a.chart=b;a.id="scrollbar";a.dateFormats=b.categoryAxis.dateFormats;a.markPeriodChange=b.categoryAxis.markPeriodChange;a.boldPeriodBeginning=b.categoryAxis.boldPeriodBeginning;a.axisItemRenderer=d.RecItem;a.axisRenderer=d.RecAxis;a.guideFillRenderer=d.RecFill;a.inside=!0;a.fontSize=this.fontSize;a.tickLength=
0;a.axisAlpha=0;d.isString(this.graph)&&(this.graph=d.getObjById(b.graphs,this.graph));if(a=this.graph){var c=this.valueAxis;c||(this.valueAxis=c=new d.ValueAxis,c.visible=!1,c.scrollbar=!0,c.axisItemRenderer=d.RecItem,c.axisRenderer=d.RecAxis,c.guideFillRenderer=d.RecFill,c.labelsEnabled=!1,c.chart=b);(b=this.unselectedGraph)||(b=new d.AmGraph,b.scrollbar=!0,this.unselectedGraph=b,b.negativeBase=a.negativeBase,b.noStepRisers=a.noStepRisers);(b=this.selectedGraph)||(b=new d.AmGraph,b.scrollbar=!0,
this.selectedGraph=b,b.negativeBase=a.negativeBase,b.noStepRisers=a.noStepRisers)}this.scrollbarCreated=!0},draw:function(){var a=this;d.ChartScrollbar.base.draw.call(a);a.scrollbarCreated||a.init();var b=a.chart,c=b.chartData,e=a.categoryAxis,f=a.rotate,g=a.x,h=a.y,k=a.width,l=a.height,m=b.categoryAxis,n=a.set;e.setOrientation(!f);e.parseDates=m.parseDates;e.rotate=f;e.equalSpacing=m.equalSpacing;e.minPeriod=m.minPeriod;e.startOnAxis=m.startOnAxis;e.viW=k;e.viH=l;e.width=k;e.height=l;e.gridCount=
a.gridCount;e.gridColor=a.gridColor;e.gridAlpha=a.gridAlpha;e.color=a.color;e.tickLength=0;e.axisAlpha=0;e.autoGridCount=a.autoGridCount;e.parseDates&&!e.equalSpacing&&e.timeZoom(b.firstTime,b.lastTime);e.zoom(0,c.length-1);if(m=a.graph){var p=a.valueAxis,q=m.valueAxis;p.id=q.id;p.rotate=f;p.setOrientation(f);p.width=k;p.height=l;p.viW=k;p.viH=l;p.dataProvider=c;p.reversed=q.reversed;p.logarithmic=q.logarithmic;p.gridAlpha=0;p.axisAlpha=0;n.push(p.set);f?(p.y=h,p.x=0):(p.x=g,p.y=0);var g=Infinity,
h=-Infinity,r;for(r=0;r<c.length;r++){var t=c[r].axes[q.id].graphs[m.id].values,u;for(u in t)if(t.hasOwnProperty(u)&&"percents"!=u&&"total"!=u){var A=t[u];A<g&&(g=A);A>h&&(h=A)}}Infinity!=g&&(p.minimum=g);-Infinity!=h&&(p.maximum=h+.1*(h-g));g==h&&(--p.minimum,p.maximum+=1);void 0!==a.minimum&&(p.minimum=a.minimum);void 0!==a.maximum&&(p.maximum=a.maximum);p.zoom(0,c.length-1);u=a.unselectedGraph;u.id=m.id;u.rotate=f;u.chart=b;u.data=c;u.valueAxis=p;u.chart=m.chart;u.categoryAxis=a.categoryAxis;u.periodSpan=
m.periodSpan;u.valueField=m.valueField;u.openField=m.openField;u.closeField=m.closeField;u.highField=m.highField;u.lowField=m.lowField;u.lineAlpha=a.graphLineAlpha;u.lineColorR=a.graphLineColor;u.fillAlphas=a.graphFillAlpha;u.fillColorsR=a.graphFillColor;u.connect=m.connect;u.hidden=m.hidden;u.width=k;u.height=l;u.pointPosition=m.pointPosition;u.stepDirection=m.stepDirection;u.periodSpan=m.periodSpan;q=a.selectedGraph;q.id=m.id;q.rotate=f;q.chart=b;q.data=c;q.valueAxis=p;q.chart=m.chart;q.categoryAxis=
e;q.periodSpan=m.periodSpan;q.valueField=m.valueField;q.openField=m.openField;q.closeField=m.closeField;q.highField=m.highField;q.lowField=m.lowField;q.lineAlpha=a.selectedGraphLineAlpha;q.lineColorR=a.selectedGraphLineColor;q.fillAlphas=a.selectedGraphFillAlpha;q.fillColorsR=a.selectedGraphFillColor;q.connect=m.connect;q.hidden=m.hidden;q.width=k;q.height=l;q.pointPosition=m.pointPosition;q.stepDirection=m.stepDirection;q.periodSpan=m.periodSpan;(b=a.graphType)||(b=m.type);u.type=b;q.type=b;c=c.length-
1;u.zoom(0,c);q.zoom(0,c);q.set.click(function(){a.handleBackgroundClick()}).mouseover(function(){a.handleMouseOver()}).mouseout(function(){a.handleMouseOut()});u.set.click(function(){a.handleBackgroundClick()}).mouseover(function(){a.handleMouseOver()}).mouseout(function(){a.handleMouseOut()});n.push(u.set);n.push(q.set)}n.push(e.set);n.push(e.labelsSet);a.bg.toBack();a.invisibleBg.toFront();a.dragger.toFront();a.iconLeft.toFront();a.iconRight.toFront()},timeZoom:function(a,b,c){this.startTime=a;
this.endTime=b;this.timeDifference=b-a;this.skipEvent=!d.toBoolean(c);this.zoomScrollbar();this.skipEvent||this.dispatchScrollbarEvent()},zoom:function(a,b){this.start=a;this.end=b;this.skipEvent=!0;this.zoomScrollbar()},dispatchScrollbarEvent:function(){if(this.skipEvent)this.skipEvent=!1;else{var a=this.chart.chartData,b,c,e=this.dragger.getBBox();b=e.x;var f=e.y,d=e.width,e=e.height,h=this.chart;this.rotate?(b=f,c=e):c=d;d={type:"zoomed",target:this};d.chart=h;var k=this.categoryAxis,l=this.stepWidth,
f=h.minSelectedTime,e=!1;if(k.parseDates&&!k.equalSpacing){if(a=h.lastTime,h=h.firstTime,k.minDuration(),k=Math.round(b/l)+h,b=this.dragging?k+this.timeDifference:Math.round((b+c)/l)+h,k>b&&(k=b),0<f&&b-k<f&&(b=Math.round(k+(b-k)/2),e=Math.round(f/2),k=b-e,b+=e,e=!0),b>a&&(b=a),b-f<k&&(k=b-f),k<h&&(k=h),k+f>b&&(b=k+f),k!=this.startTime||b!=this.endTime)this.startTime=k,this.endTime=b,d.start=k,d.end=b,d.startDate=new Date(k),d.endDate=new Date(b),this.fire(d.type,d)}else if(k.startOnAxis||(b+=l/2),
c-=this.stepWidth/2,f=k.xToIndex(b),b=k.xToIndex(b+c),f!=this.start||this.end!=b)k.startOnAxis&&(this.resizingRight&&f==b&&b++,this.resizingLeft&&f==b&&(0<f?f--:b=1)),this.start=f,this.end=this.dragging?this.start+this.difference:b,d.start=this.start,d.end=this.end,k.parseDates&&(a[this.start]&&(d.startDate=new Date(a[this.start].time)),a[this.end]&&(d.endDate=new Date(a[this.end].time))),this.fire(d.type,d);e&&this.zoomScrollbar()}},zoomScrollbar:function(){var a,b;a=this.chart;var c=a.chartData,
e=this.categoryAxis;e.parseDates&&!e.equalSpacing?(c=e.stepWidth,e=a.firstTime,a=c*(this.startTime-e),b=c*(this.endTime-e)):(a=c[this.start].x[e.id],b=c[this.end].x[e.id],c=e.stepWidth,e.startOnAxis||(e=c/2,a-=e,b+=e));this.stepWidth=c;this.updateScrollbarSize(a,b)},maskGraphs:function(a,b,c,e){var f=this.selectedGraph;f&&f.set.clipRect(a,b,c,e)},handleDragStart:function(){d.ChartScrollbar.base.handleDragStart.call(this);this.difference=this.end-this.start;this.timeDifference=this.endTime-this.startTime;
0>this.timeDifference&&(this.timeDifference=0)},handleBackgroundClick:function(){d.ChartScrollbar.base.handleBackgroundClick.call(this);this.dragging||(this.difference=this.end-this.start,this.timeDifference=this.endTime-this.startTime,0>this.timeDifference&&(this.timeDifference=0))}});d.AmBalloon=d.Class({construct:function(a){this.cname="AmBalloon";this.enabled=!0;this.fillColor="#FFFFFF";this.fillAlpha=.8;this.borderThickness=2;this.borderColor="#FFFFFF";this.borderAlpha=1;this.cornerRadius=0;
this.maxWidth=220;this.horizontalPadding=8;this.verticalPadding=4;this.pointerWidth=6;this.pointerOrientation="V";this.color="#000000";this.adjustBorderColor=!0;this.show=this.follow=this.showBullet=!1;this.bulletSize=3;this.shadowAlpha=.4;this.shadowColor="#000000";this.fadeOutDuration=this.animationDuration=.3;this.fixedPosition=!1;this.offsetY=6;this.offsetX=1;this.textAlign="center";d.isModern||(this.offsetY*=1.5);d.applyTheme(this,a,this.cname)},draw:function(){var a=this.pointToX,b=this.pointToY;
this.deltaSignX=this.deltaSignY=1;var c=this.chart;d.VML&&(this.fadeOutDuration=0);this.xAnim&&c.stopAnim(this.xAnim);this.yAnim&&c.stopAnim(this.yAnim);if(!isNaN(a)){var e=this.follow,f=c.container,g=this.set;d.remove(g);this.removeDiv();g=f.set();g.node.style.pointerEvents="none";this.set=g;c.balloonsSet.push(g);if(this.show){var h=this.l,k=this.t,l=this.r,m=this.b,n=this.balloonColor,p=this.fillColor,q=this.borderColor,r=p;void 0!=n&&(this.adjustBorderColor?r=q=n:p=n);var t=this.horizontalPadding,
u=this.verticalPadding,A=this.pointerWidth,y=this.pointerOrientation,x=this.cornerRadius,w=c.fontFamily,G=this.fontSize;void 0==G&&(G=c.fontSize);var n=document.createElement("div"),z=n.style;z.pointerEvents="none";z.position="absolute";var O=this.minWidth,E="";isNaN(O)||(E="min-width:"+(O-2*t)+"px; ");n.innerHTML='<div style="text-align:'+this.textAlign+"; "+E+"max-width:"+this.maxWidth+"px; font-size:"+G+"px; color:"+this.color+"; font-family:"+w+'">'+this.text+"</div>";c.chartDiv.appendChild(n);
this.textDiv=n;G=n.offsetWidth;w=n.offsetHeight;n.clientHeight&&(G=n.clientWidth,w=n.clientHeight);w+=2*u;E=G+2*t;!isNaN(O)&&E<O&&(E=O);v.opera&&(w+=2);var D=!1,G=this.offsetY;c.handDrawn&&(G+=c.handDrawScatter+2);"H"!=y?(O=a-E/2,b<k+w+10&&"down"!=y?(D=!0,e&&(b+=G),G=b+A,this.deltaSignY=-1):(e&&(b-=G),G=b-w-A,this.deltaSignY=1)):(2*A>w&&(A=w/2),G=b-w/2,a<h+(l-h)/2?(O=a+A,this.deltaSignX=-1):(O=a-E-A,this.deltaSignX=1));G+w>=m&&(G=m-w);G<k&&(G=k);O<h&&(O=h);O+E>l&&(O=l-E);var k=G+u,m=O+t,u=this.shadowAlpha,
F=this.shadowColor,t=this.borderThickness,B=this.bulletSize,ya;0<x||0===A?(0<u&&(a=d.rect(f,E,w,p,0,t+1,F,u,this.cornerRadius),d.isModern?a.translate(1,1):a.translate(4,4),g.push(a)),p=d.rect(f,E,w,p,this.fillAlpha,t,q,this.borderAlpha,this.cornerRadius),this.showBullet&&(ya=d.circle(f,B,r,this.fillAlpha),g.push(ya))):("H"!=y?(h=a-O,h>E-A&&(h=E-A),h<A&&(h=A),r=[0,h-A,a-O,h+A,E,E,0,0],x=D?[0,0,b-G,0,0,w,w,0]:[w,w,b-G,w,w,0,0,w]):(r=b-G,r>w-A&&(r=w-A),r<A&&(r=A),x=[0,r-A,b-G,r+A,w,w,0,0],r=a<h+(l-h)/
2?[0,0,O<a?0:a-O,0,0,E,E,0]:[E,E,O+E>a?E:a-O,E,E,0,0,E]),0<u&&(a=d.polygon(f,r,x,p,0,t,F,u),a.translate(1,1),g.push(a)),p=d.polygon(f,r,x,p,this.fillAlpha,t,q,this.borderAlpha));this.bg=p;g.push(p);p.toFront();f=1*this.deltaSignX;z.left=m+"px";z.top=k+"px";g.translate(O-f,G);p=p.getBBox();this.bottom=G+w+1;this.yPos=p.y+G;ya&&ya.translate(this.pointToX-O+f,b-G);b=this.animationDuration;0<this.animationDuration&&!e&&!isNaN(this.prevX)&&(g.translate(this.prevX,this.prevY),g.animate({translate:O-f+","+
G},b,"easeOutSine"),n&&(z.left=this.prevTX+"px",z.top=this.prevTY+"px",this.xAnim=c.animate({node:n},"left",this.prevTX,m,b,"easeOutSine","px"),this.yAnim=c.animate({node:n},"top",this.prevTY,k,b,"easeOutSine","px")));this.prevX=O-f;this.prevY=G;this.prevTX=m;this.prevTY=k}}},followMouse:function(){if(this.follow&&this.show){var a=this.chart.mouseX-this.offsetX*this.deltaSignX,b=this.chart.mouseY;this.pointToX=a;this.pointToY=b;if(a!=this.previousX||b!=this.previousY)if(this.previousX=a,this.previousY=
b,0===this.cornerRadius)this.draw();else{var c=this.set;if(c){var e=c.getBBox(),a=a-e.width/2,f=b-e.height-10;a<this.l&&(a=this.l);a>this.r-e.width&&(a=this.r-e.width);f<this.t&&(f=b+10);c.translate(a,f);b=this.textDiv.style;b.left=a+this.horizontalPadding+"px";b.top=f+this.verticalPadding+"px"}}}},changeColor:function(a){this.balloonColor=a},setBounds:function(a,b,c,e){this.l=a;this.t=b;this.r=c;this.b=e;this.destroyTO&&clearTimeout(this.destroyTO)},showBalloon:function(a){this.text=a;this.show=
!0;this.destroyTO&&clearTimeout(this.destroyTO);a=this.chart;this.fadeAnim1&&a.stopAnim(this.fadeAnim1);this.fadeAnim2&&a.stopAnim(this.fadeAnim2);this.draw()},hide:function(){var a=this,b=a.fadeOutDuration,c=a.chart;if(0<b){a.destroyTO=setTimeout(function(){a.destroy.call(a)},1E3*b);a.follow=!1;a.show=!1;var e=a.set;e&&(e.setAttr("opacity",a.fillAlpha),a.fadeAnim1=e.animate({opacity:0},b,"easeInSine"));a.textDiv&&(a.fadeAnim2=c.animate({node:a.textDiv},"opacity",1,0,b,"easeInSine",""))}else a.show=
!1,a.follow=!1,a.destroy()},setPosition:function(a,b,c){this.pointToX=a;this.pointToY=b;c&&(a==this.previousX&&b==this.previousY||this.draw());this.previousX=a;this.previousY=b},followCursor:function(a){var b=this;(b.follow=a)?(b.pShowBullet=b.showBullet,b.showBullet=!1):void 0!==b.pShowBullet&&(b.showBullet=b.pShowBullet);clearInterval(b.interval);var c=b.chart.mouseX,e=b.chart.mouseY;!isNaN(c)&&a&&(b.pointToX=c-b.offsetX*b.deltaSignX,b.pointToY=e,b.followMouse(),b.interval=setInterval(function(){b.followMouse.call(b)},
40))},removeDiv:function(){if(this.textDiv){var a=this.textDiv.parentNode;a&&a.removeChild(this.textDiv)}},destroy:function(){clearInterval(this.interval);d.remove(this.set);this.removeDiv();this.set=null}});d.AmCoordinateChart=d.Class({inherits:d.AmChart,construct:function(a){d.AmCoordinateChart.base.construct.call(this,a);this.theme=a;this.createEvents("rollOverGraphItem","rollOutGraphItem","clickGraphItem","doubleClickGraphItem","rightClickGraphItem","clickGraph","rollOverGraph","rollOutGraph");
this.startAlpha=1;this.startDuration=0;this.startEffect="elastic";this.sequencedAnimation=!0;this.colors="#FF6600 #FCD202 #B0DE09 #0D8ECF #2A0CD0 #CD0D74 #CC0000 #00CC00 #0000CC #DDDDDD #999999 #333333 #990000".split(" ");this.balloonDateFormat="MMM DD, YYYY";this.valueAxes=[];this.graphs=[];this.guides=[];this.gridAboveGraphs=!1;d.applyTheme(this,a,"AmCoordinateChart")},initChart:function(){d.AmCoordinateChart.base.initChart.call(this);var a=this.categoryAxis;a&&(this.categoryAxis=d.processObject(a,
d.CategoryAxis,this.theme));this.processValueAxes();this.createValueAxes();this.processGraphs();this.processGuides();d.VML&&(this.startAlpha=1);this.setLegendData(this.graphs);this.gridAboveGraphs&&this.gridSet.toFront()},createValueAxes:function(){if(0===this.valueAxes.length){var a=new d.ValueAxis;this.addValueAxis(a)}},parseData:function(){this.processValueAxes();this.processGraphs()},parseSerialData:function(){var a=this.graphs,b,c={},e=this.seriesIdField;e||(e=this.categoryField);this.chartData=
[];var f=this.dataProvider;if(f){var g=!1,h,k=this.categoryAxis,l,m;k&&(g=k.parseDates,l=k.forceShowField,m=k.labelColorField,h=k.categoryFunction);var n,p,q={},r;g&&(b=d.extractPeriod(k.minPeriod),n=b.period,p=b.count,r=d.getPeriodDuration(n,p));var t={};this.lookupTable=t;var u,A=this.dataDateFormat,y={};for(u=0;u<f.length;u++){var x={},w=f[u];b=w[this.categoryField];x.dataContext=w;x.category=h?h(b,w,k):String(b);l&&(x.forceShow=w[l]);m&&(x.labelColor=w[m]);t[w[e]]=x;if(!g||(b=k.categoryFunction?
k.categoryFunction(b,w,k):b instanceof Date?d.newDate(b,k.minPeriod):A?d.stringToDate(b,A):new Date(b),b=d.resetDateToMin(b,n,p,k.firstDayOfWeek),x.category=b,x.time=b.getTime(),!isNaN(x.time))){var G=this.valueAxes;x.axes={};x.x={};var v;for(v=0;v<G.length;v++){var z=G[v].id;x.axes[z]={};x.axes[z].graphs={};var E;for(E=0;E<a.length;E++){b=a[E];var D=b.id,F=b.periodValue;if(b.valueAxis.id==z){x.axes[z].graphs[D]={};var B={};B.index=u;var ya=w;b.dataProvider&&(ya=c);B.values=this.processValues(ya,
b,F);!b.connect&&y&&y[D]&&x.time-q[D]>1.1*r&&(y[D].gap=!0);this.processFields(b,B,ya);B.category=x.category;B.serialDataItem=x;B.graph=b;x.axes[z].graphs[D]=B;q[D]=x.time;y[D]=B}}}this.chartData[u]=x}}}for(c=0;c<a.length;c++)b=a[c],b.dataProvider&&this.parseGraphData(b)},processValues:function(a,b,c){var e={},f,d=!1;"candlestick"!=b.type&&"ohlc"!=b.type||""===c||(d=!0);f=Number(a[b.valueField+c]);isNaN(f)||(e.value=f);f=Number(a[b.errorField+c]);isNaN(f)||(e.error=f);d&&(c="Open");f=Number(a[b.openField+
c]);isNaN(f)||(e.open=f);d&&(c="Close");f=Number(a[b.closeField+c]);isNaN(f)||(e.close=f);d&&(c="Low");f=Number(a[b.lowField+c]);isNaN(f)||(e.low=f);d&&(c="High");f=Number(a[b.highField+c]);isNaN(f)||(e.high=f);return e},parseGraphData:function(a){var b=a.dataProvider,c=a.seriesIdField;c||(c=this.seriesIdField);c||(c=this.categoryField);var e;for(e=0;e<b.length;e++){var f=b[e],d=this.lookupTable[String(f[c])],h=a.valueAxis.id;d&&(h=d.axes[h].graphs[a.id],h.serialDataItem=d,h.values=this.processValues(f,
a,a.periodValue),this.processFields(a,h,f))}},addValueAxis:function(a){a.chart=this;this.valueAxes.push(a);this.validateData()},removeValueAxesAndGraphs:function(){var a=this.valueAxes,b;for(b=a.length-1;-1<b;b--)this.removeValueAxis(a[b])},removeValueAxis:function(a){var b=this.graphs,c;for(c=b.length-1;0<=c;c--){var e=b[c];e&&e.valueAxis==a&&this.removeGraph(e)}b=this.valueAxes;for(c=b.length-1;0<=c;c--)b[c]==a&&b.splice(c,1);this.validateData()},addGraph:function(a){this.graphs.push(a);this.chooseGraphColor(a,
this.graphs.length-1);this.validateData()},removeGraph:function(a){var b=this.graphs,c;for(c=b.length-1;0<=c;c--)b[c]==a&&(b.splice(c,1),a.destroy());this.validateData()},processValueAxes:function(){var a=this.valueAxes,b;for(b=0;b<a.length;b++){var c=a[b],c=d.processObject(c,d.ValueAxis,this.theme);a[b]=c;c.chart=this;c.id||(c.id="valueAxisAuto"+b+"_"+(new Date).getTime());void 0===c.usePrefixes&&(c.usePrefixes=this.usePrefixes)}},processGuides:function(){var a=this.guides,b=this.categoryAxis;if(a)for(var c=
0;c<a.length;c++){var e=a[c];(void 0!==e.category||void 0!==e.date)&&b&&b.addGuide(e);var f=e.valueAxis;f?(d.isString(f)&&(f=this.getValueAxisById(f)),f?f.addGuide(e):this.valueAxes[0].addGuide(e)):isNaN(e.value)||this.valueAxes[0].addGuide(e)}},processGraphs:function(){var a=this.graphs,b;for(b=0;b<a.length;b++){var c=a[b],c=d.processObject(c,d.AmGraph,this.theme);a[b]=c;this.chooseGraphColor(c,b);c.chart=this;d.isString(c.valueAxis)&&(c.valueAxis=this.getValueAxisById(c.valueAxis));c.valueAxis||
(c.valueAxis=this.valueAxes[0]);c.id||(c.id="graphAuto"+b+"_"+(new Date).getTime())}},formatString:function(a,b,c){var e=b.graph,f=e.valueAxis;f.duration&&b.values.value&&(f=d.formatDuration(b.values.value,f.duration,"",f.durationUnits,f.maxInterval,f.numberFormatter),a=a.split("[[value]]").join(f));a=d.massReplace(a,{"[[title]]":e.title,"[[description]]":b.description});a=c?d.fixNewLines(a):d.fixBrakes(a);return d.cleanFromEmpty(a)},getBalloonColor:function(a,b,c){var e=a.lineColor,f=a.balloonColor;
c&&(f=e);c=a.fillColorsR;"object"==typeof c?e=c[0]:void 0!==c&&(e=c);b.isNegative&&(c=a.negativeLineColor,a=a.negativeFillColors,"object"==typeof a?c=a[0]:void 0!==a&&(c=a),void 0!==c&&(e=c));void 0!==b.color&&(e=b.color);void 0===f&&(f=e);return f},getGraphById:function(a){return d.getObjById(this.graphs,a)},getValueAxisById:function(a){return d.getObjById(this.valueAxes,a)},processFields:function(a,b,c){if(a.itemColors){var e=a.itemColors,f=b.index;b.color=f<e.length?e[f]:d.randomColor()}e="lineColor color alpha fillColors description bullet customBullet bulletSize bulletConfig url labelColor dashLength pattern".split(" ");
for(f=0;f<e.length;f++){var g=e[f],h=a[g+"Field"];h&&(h=c[h],d.isDefined(h)&&(b[g]=h))}b.dataContext=c},chooseGraphColor:function(a,b){if(a.lineColor)a.lineColorR=a.lineColor;else{var c;c=this.colors.length>b?this.colors[b]:d.randomColor();a.lineColorR=c}a.fillColorsR=a.fillColors?a.fillColors:a.lineColorR;a.bulletBorderColorR=a.bulletBorderColor?a.bulletBorderColor:a.useLineColorForBulletBorder?a.lineColorR:a.bulletColor;a.bulletColorR=a.bulletColor?a.bulletColor:a.lineColorR;if(c=this.patterns)a.pattern=
c[b]},handleLegendEvent:function(a){var b=a.type;a=a.dataItem;if(!this.legend.data&&a){var c=a.hidden,e=a.showBalloon;switch(b){case "clickMarker":this.textClickEnabled&&(e?this.hideGraphsBalloon(a):this.showGraphsBalloon(a));break;case "clickLabel":e?this.hideGraphsBalloon(a):this.showGraphsBalloon(a);break;case "rollOverItem":c||this.highlightGraph(a);break;case "rollOutItem":c||this.unhighlightGraph();break;case "hideItem":this.hideGraph(a);break;case "showItem":this.showGraph(a)}}},highlightGraph:function(a){var b=
this.graphs,c,e=.2;this.legend&&(e=this.legend.rollOverGraphAlpha);if(1!=e)for(c=0;c<b.length;c++){var f=b[c];f!=a&&f.changeOpacity(e)}},unhighlightGraph:function(){var a;this.legend&&(a=this.legend.rollOverGraphAlpha);if(1!=a){a=this.graphs;var b;for(b=0;b<a.length;b++)a[b].changeOpacity(1)}},showGraph:function(a){a.switchable&&(a.hidden=!1,this.dataChanged=!0,"xy"!=this.type&&(this.marginsUpdated=!1),this.chartCreated&&this.initChart())},hideGraph:function(a){a.switchable&&(this.dataChanged=!0,
"xy"!=this.type&&(this.marginsUpdated=!1),a.hidden=!0,this.chartCreated&&this.initChart())},hideGraphsBalloon:function(a){a.showBalloon=!1;this.updateLegend()},showGraphsBalloon:function(a){a.showBalloon=!0;this.updateLegend()},updateLegend:function(){this.legend&&this.legend.invalidateSize()},resetAnimation:function(){var a=this.graphs;if(a){var b;for(b=0;b<a.length;b++)a[b].animationPlayed=!1}},animateAgain:function(){this.resetAnimation();this.validateNow()}});d.AmSlicedChart=d.Class({inherits:d.AmChart,
construct:function(a){this.createEvents("rollOverSlice","rollOutSlice","clickSlice","pullOutSlice","pullInSlice","rightClickSlice");d.AmSlicedChart.base.construct.call(this,a);this.colors="#FF0F00 #FF6600 #FF9E01 #FCD202 #F8FF01 #B0DE09 #04D215 #0D8ECF #0D52D1 #2A0CD0 #8A0CCF #CD0D74 #754DEB #DDDDDD #999999 #333333 #000000 #57032A #CA9726 #990000 #4B0C25".split(" ");this.alpha=1;this.groupPercent=0;this.groupedTitle="Other";this.groupedPulled=!1;this.groupedAlpha=1;this.marginLeft=0;this.marginBottom=
this.marginTop=10;this.marginRight=0;this.hoverAlpha=1;this.outlineColor="#FFFFFF";this.outlineAlpha=0;this.outlineThickness=1;this.startAlpha=0;this.startDuration=1;this.startEffect="bounce";this.sequencedAnimation=!0;this.pullOutDuration=1;this.pullOutEffect="bounce";this.pullOnHover=this.pullOutOnlyOne=!1;this.labelsEnabled=!0;this.labelTickColor="#000000";this.labelTickAlpha=.2;this.hideLabelsPercent=0;this.urlTarget="_self";this.autoMarginOffset=10;this.gradientRatio=[];this.maxLabelWidth=200;
d.applyTheme(this,a,"AmSlicedChart")},initChart:function(){d.AmSlicedChart.base.initChart.call(this);this.dataChanged&&(this.parseData(),this.dispatchDataUpdated=!0,this.dataChanged=!1,this.setLegendData(this.chartData));this.drawChart()},handleLegendEvent:function(a){var b=a.type,c=a.dataItem,e=this.legend;if(!e.data&&c){var f=c.hidden;a=a.event;switch(b){case "clickMarker":f||e.switchable||this.clickSlice(c,a);break;case "clickLabel":f||this.clickSlice(c,a,!1);break;case "rollOverItem":f||this.rollOverSlice(c,
!1,a);break;case "rollOutItem":f||this.rollOutSlice(c,a);break;case "hideItem":this.hideSlice(c,a);break;case "showItem":this.showSlice(c,a)}}},invalidateVisibility:function(){this.recalculatePercents();this.initChart();var a=this.legend;a&&a.invalidateSize()},addEventListeners:function(a,b){var c=this;a.mouseover(function(a){c.rollOverSlice(b,!0,a)}).mouseout(function(a){c.rollOutSlice(b,a)}).touchend(function(a){c.rollOverSlice(b,a);c.panEventsEnabled&&c.clickSlice(b,a)}).touchstart(function(a){c.rollOverSlice(b,
a)}).click(function(a){c.clickSlice(b,a)}).contextmenu(function(a){c.handleRightClick(b,a)})},formatString:function(a,b,c){a=d.formatValue(a,b,["value"],this.nf,"",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers);a=d.formatValue(a,b,["percents"],this.pf);a=d.massReplace(a,{"[[title]]":b.title,"[[description]]":b.description});-1!=a.indexOf("[[")&&(a=d.formatDataContextValue(a,b.dataContext));a=c?d.fixNewLines(a):d.fixBrakes(a);return d.cleanFromEmpty(a)},startSlices:function(){var a;
for(a=0;a<this.chartData.length;a++)0<this.startDuration&&this.sequencedAnimation?this.setStartTO(a):this.startSlice(this.chartData[a])},setStartTO:function(a){var b=this;a=setTimeout(function(){b.startSequenced.call(b)},b.startDuration/b.chartData.length*500*a);b.timeOuts.push(a)},pullSlices:function(a){var b=this.chartData,c;for(c=0;c<b.length;c++){var e=b[c];e.pulled&&this.pullSlice(e,1,a)}},startSequenced:function(){var a=this.chartData,b;for(b=0;b<a.length;b++)if(!a[b].started){this.startSlice(this.chartData[b]);
break}},startSlice:function(a){a.started=!0;var b=a.wedge,c=this.startDuration;b&&0<c&&(0<a.alpha&&b.show(),b.translate(a.startX,a.startY),b.animate({opacity:1,translate:"0,0"},c,this.startEffect))},showLabels:function(){var a=this.chartData,b;for(b=0;b<a.length;b++){var c=a[b];if(0<c.alpha){var e=c.label;e&&e.show();(c=c.tick)&&c.show()}}},showSlice:function(a){isNaN(a)?a.hidden=!1:this.chartData[a].hidden=!1;this.invalidateVisibility()},hideSlice:function(a){isNaN(a)?a.hidden=!0:this.chartData[a].hidden=
!0;this.hideBalloon();this.invalidateVisibility()},rollOverSlice:function(a,b,c){isNaN(a)||(a=this.chartData[a]);clearTimeout(this.hoverInt);if(!a.hidden){this.pullOnHover&&this.pullSlice(a,1);1>this.hoverAlpha&&a.wedge&&a.wedge.attr({opacity:this.hoverAlpha});var e=a.balloonX,f=a.balloonY;a.pulled&&(e+=a.pullX,f+=a.pullY);var g=this.formatString(this.balloonText,a,!0),h=this.balloonFunction;h&&(g=h(a,g));h=d.adjustLuminosity(a.color,-.15);this.showBalloon(g,h,b,e,f);a={type:"rollOverSlice",dataItem:a,
chart:this,event:c};this.fire(a.type,a)}},rollOutSlice:function(a,b){isNaN(a)||(a=this.chartData[a]);a.wedge&&a.wedge.attr({opacity:1});this.hideBalloon();var c={type:"rollOutSlice",dataItem:a,chart:this,event:b};this.fire(c.type,c)},clickSlice:function(a,b,c){isNaN(a)||(a=this.chartData[a]);a.pulled?this.pullSlice(a,0):this.pullSlice(a,1);d.getURL(a.url,this.urlTarget);c||(a={type:"clickSlice",dataItem:a,chart:this,event:b},this.fire(a.type,a))},handleRightClick:function(a,b){isNaN(a)||(a=this.chartData[a]);
var c={type:"rightClickSlice",dataItem:a,chart:this,event:b};this.fire(c.type,c)},drawTicks:function(){var a=this.chartData,b;for(b=0;b<a.length;b++){var c=a[b];if(c.label){var e=c.ty,e=d.line(this.container,[c.tx0,c.tx,c.tx2],[c.ty0,e,e],this.labelTickColor,this.labelTickAlpha);c.tick=e;c.wedge.push(e)}}},initialStart:function(){var a=this,b=a.startDuration,c=setTimeout(function(){a.showLabels.call(a)},1E3*b);a.timeOuts.push(c);a.chartCreated?a.pullSlices(!0):(a.startSlices(),0<b?(b=setTimeout(function(){a.pullSlices.call(a)},
1200*b),a.timeOuts.push(b)):a.pullSlices(!0))},pullSlice:function(a,b,c){var e=this.pullOutDuration;!0===c&&(e=0);(c=a.wedge)&&(0<e?c.animate({translate:b*a.pullX+","+b*a.pullY},e,this.pullOutEffect):c.translate(b*a.pullX,b*a.pullY));1==b?(a.pulled=!0,this.pullOutOnlyOne&&this.pullInAll(a.index),a={type:"pullOutSlice",dataItem:a,chart:this}):(a.pulled=!1,a={type:"pullInSlice",dataItem:a,chart:this});this.fire(a.type,a)},pullInAll:function(a){var b=this.chartData,c;for(c=0;c<this.chartData.length;c++)c!=
a&&b[c].pulled&&this.pullSlice(b[c],0)},pullOutAll:function(a){a=this.chartData;var b;for(b=0;b<a.length;b++)a[b].pulled||this.pullSlice(a[b],1)},parseData:function(){var a=[];this.chartData=a;var b=this.dataProvider;isNaN(this.pieAlpha)||(this.alpha=this.pieAlpha);if(void 0!==b){var c=b.length,e=0,f,g,h;for(f=0;f<c;f++){g={};var k=b[f];g.dataContext=k;g.value=Number(k[this.valueField]);(h=k[this.titleField])||(h="");g.title=h;g.pulled=d.toBoolean(k[this.pulledField],!1);(h=k[this.descriptionField])||
(h="");g.description=h;g.labelRadius=Number(k[this.labelRadiusField]);g.switchable=!0;g.url=k[this.urlField];h=k[this.patternField];!h&&this.patterns&&(h=this.patterns[f]);g.pattern=h;g.visibleInLegend=d.toBoolean(k[this.visibleInLegendField],!0);h=k[this.alphaField];g.alpha=void 0!==h?Number(h):this.alpha;h=k[this.colorField];void 0!==h&&(g.color=d.toColor(h));g.labelColor=d.toColor(k[this.labelColorField]);e+=g.value;g.hidden=!1;a[f]=g}for(f=b=0;f<c;f++)g=a[f],g.percents=g.value/e*100,g.percents<
this.groupPercent&&b++;1<b&&(this.groupValue=0,this.removeSmallSlices(),a.push({title:this.groupedTitle,value:this.groupValue,percents:this.groupValue/e*100,pulled:this.groupedPulled,color:this.groupedColor,url:this.groupedUrl,description:this.groupedDescription,alpha:this.groupedAlpha,pattern:this.groupedPattern,dataContext:{}}));(c=this.baseColor)||(c=this.pieBaseColor);(e=this.brightnessStep)||(e=this.pieBrightnessStep);for(f=0;f<a.length;f++)c?h=d.adjustLuminosity(c,f*e/100):(h=this.colors[f],
void 0===h&&(h=d.randomColor())),void 0===a[f].color&&(a[f].color=h);this.recalculatePercents()}},recalculatePercents:function(){var a=this.chartData,b=0,c,e;for(c=0;c<a.length;c++)e=a[c],!e.hidden&&0<e.value&&(b+=e.value);for(c=0;c<a.length;c++)e=this.chartData[c],e.percents=!e.hidden&&0<e.value?100*e.value/b:0},removeSmallSlices:function(){var a=this.chartData,b;for(b=a.length-1;0<=b;b--)a[b].percents<this.groupPercent&&(this.groupValue+=a[b].value,a.splice(b,1))},animateAgain:function(){var a=
this;a.startSlices();for(var b=0;b<a.chartData.length;b++){var c=a.chartData[b];c.started=!1;var e=c.wedge;e&&e.translate(c.startX,c.startY)}b=a.startDuration;0<b?(b=setTimeout(function(){a.pullSlices.call(a)},1200*b),a.timeOuts.push(b)):a.pullSlices()},measureMaxLabel:function(){var a=this.chartData,b=0,c;for(c=0;c<a.length;c++){var e=a[c],f=this.formatString(this.labelText,e),g=this.labelFunction;g&&(f=g(e,f));e=d.text(this.container,f,this.color,this.fontFamily,this.fontSize);f=e.getBBox().width;
f>b&&(b=f);e.remove()}return b}});d.AmRectangularChart=d.Class({inherits:d.AmCoordinateChart,construct:function(a){d.AmRectangularChart.base.construct.call(this,a);this.theme=a;this.createEvents("zoomed");this.marginRight=this.marginBottom=this.marginTop=this.marginLeft=20;this.verticalPosition=this.horizontalPosition=this.depth3D=this.angle=0;this.heightMultiplier=this.widthMultiplier=1;this.plotAreaFillColors="#FFFFFF";this.plotAreaFillAlphas=0;this.plotAreaBorderColor="#000000";this.plotAreaBorderAlpha=
0;this.zoomOutButtonImageSize=17;this.zoomOutButtonImage="lens.png";this.zoomOutText="Show all";this.zoomOutButtonColor="#e5e5e5";this.zoomOutButtonAlpha=0;this.zoomOutButtonRollOverAlpha=1;this.zoomOutButtonPadding=8;this.trendLines=[];this.autoMargins=!0;this.marginsUpdated=!1;this.autoMarginOffset=10;d.applyTheme(this,a,"AmRectangularChart")},initChart:function(){d.AmRectangularChart.base.initChart.call(this);this.updateDxy();var a=!0;!this.marginsUpdated&&this.autoMargins&&(this.resetMargins(),
a=!1);this.processScrollbars();this.updateMargins();this.updatePlotArea();this.updateScrollbars();this.updateTrendLines();this.updateChartCursor();this.updateValueAxes();a&&(this.scrollbarOnly||this.updateGraphs())},drawChart:function(){d.AmRectangularChart.base.drawChart.call(this);this.drawPlotArea();if(d.ifArray(this.chartData)){var a=this.chartCursor;a&&a.draw();a=this.zoomOutText;""!==a&&a&&this.drawZoomOutButton()}},resetMargins:function(){var a={},b;if("serial"==this.type){var c=this.valueAxes;
for(b=0;b<c.length;b++){var e=c[b];e.ignoreAxisWidth||(e.setOrientation(this.rotate),e.fixAxisPosition(),a[e.position]=!0)}(b=this.categoryAxis)&&!b.ignoreAxisWidth&&(b.setOrientation(!this.rotate),b.fixAxisPosition(),b.fixAxisPosition(),a[b.position]=!0)}else{e=this.xAxes;c=this.yAxes;for(b=0;b<e.length;b++){var f=e[b];f.ignoreAxisWidth||(f.setOrientation(!0),f.fixAxisPosition(),a[f.position]=!0)}for(b=0;b<c.length;b++)e=c[b],e.ignoreAxisWidth||(e.setOrientation(!1),e.fixAxisPosition(),a[e.position]=
!0)}a.left&&(this.marginLeft=0);a.right&&(this.marginRight=0);a.top&&(this.marginTop=0);a.bottom&&(this.marginBottom=0);this.fixMargins=a},measureMargins:function(){var a=this.valueAxes,b,c=this.autoMarginOffset,e=this.fixMargins,f=this.realWidth,d=this.realHeight,h=c,k=c,l=f;b=d;var m;for(m=0;m<a.length;m++)b=this.getAxisBounds(a[m],h,l,k,b),h=Math.round(b.l),l=Math.round(b.r),k=Math.round(b.t),b=Math.round(b.b);if(a=this.categoryAxis)b=this.getAxisBounds(a,h,l,k,b),h=Math.round(b.l),l=Math.round(b.r),
k=Math.round(b.t),b=Math.round(b.b);e.left&&h<c&&(this.marginLeft=Math.round(-h+c));e.right&&l>=f-c&&(this.marginRight=Math.round(l-f+c));e.top&&k<c+this.titleHeight&&(this.marginTop=Math.round(this.marginTop-k+c+this.titleHeight));e.bottom&&b>d-c&&(this.marginBottom=Math.round(this.marginBottom+b-d+c));this.initChart()},getAxisBounds:function(a,b,c,e,f){if(!a.ignoreAxisWidth){var d=a.labelsSet,h=a.tickLength;a.inside&&(h=0);if(d)switch(d=a.getBBox(),a.position){case "top":a=d.y;e>a&&(e=a);break;
case "bottom":a=d.y+d.height;f<a&&(f=a);break;case "right":a=d.x+d.width+h+3;c<a&&(c=a);break;case "left":a=d.x-h,b>a&&(b=a)}}return{l:b,t:e,r:c,b:f}},drawZoomOutButton:function(){var a=this,b=a.container.set();a.zoomButtonSet.push(b);var c=a.color,e=a.fontSize,f=a.zoomOutButtonImageSize,g=a.zoomOutButtonImage,h=d.lang.zoomOutText||a.zoomOutText,k=a.zoomOutButtonColor,l=a.zoomOutButtonAlpha,m=a.zoomOutButtonFontSize,n=a.zoomOutButtonPadding;isNaN(m)||(e=m);(m=a.zoomOutButtonFontColor)&&(c=m);var m=
a.zoomOutButton,p;m&&(m.fontSize&&(e=m.fontSize),m.color&&(c=m.color),m.backgroundColor&&(k=m.backgroundColor),isNaN(m.backgroundAlpha)||(a.zoomOutButtonRollOverAlpha=m.backgroundAlpha));var q=m=0;void 0!==a.pathToImages&&g&&(p=a.container.image(a.pathToImages+g,0,0,f,f),b.push(p),p=p.getBBox(),m=p.width+5);void 0!==h&&(c=d.text(a.container,h,c,a.fontFamily,e,"start"),e=c.getBBox(),q=p?p.height/2-3:e.height/2,c.translate(m,q),b.push(c));p=b.getBBox();c=1;d.isModern||(c=0);k=d.rect(a.container,p.width+
2*n+5,p.height+2*n-2,k,1,1,k,c);k.setAttr("opacity",l);k.translate(-n,-n);b.push(k);k.toBack();a.zbBG=k;p=k.getBBox();b.translate(a.marginLeftReal+a.plotAreaWidth-p.width+n,a.marginTopReal+n);b.hide();b.mouseover(function(){a.rollOverZB()}).mouseout(function(){a.rollOutZB()}).click(function(){a.clickZB()}).touchstart(function(){a.rollOverZB()}).touchend(function(){a.rollOutZB();a.clickZB()});for(l=0;l<b.length;l++)b[l].attr({cursor:"pointer"});a.zbSet=b},rollOverZB:function(){this.zbBG.setAttr("opacity",
this.zoomOutButtonRollOverAlpha)},rollOutZB:function(){this.zbBG.setAttr("opacity",this.zoomOutButtonAlpha)},clickZB:function(){this.zoomOut()},zoomOut:function(){this.updateScrollbar=!0;this.zoom()},drawPlotArea:function(){var a=this.dx,b=this.dy,c=this.marginLeftReal,e=this.marginTopReal,f=this.plotAreaWidth-1,g=this.plotAreaHeight-1,h=this.plotAreaFillColors,k=this.plotAreaFillAlphas,l=this.plotAreaBorderColor,m=this.plotAreaBorderAlpha;this.trendLinesSet.clipRect(c,e,f,g);"object"==typeof k&&
(k=k[0]);h=d.polygon(this.container,[0,f,f,0,0],[0,0,g,g,0],h,k,1,l,m,this.plotAreaGradientAngle);h.translate(c+a,e+b);this.set.push(h);0!==a&&0!==b&&(h=this.plotAreaFillColors,"object"==typeof h&&(h=h[0]),h=d.adjustLuminosity(h,-.15),f=d.polygon(this.container,[0,a,f+a,f,0],[0,b,b,0,0],h,k,1,l,m),f.translate(c,e+g),this.set.push(f),a=d.polygon(this.container,[0,0,a,a,0],[0,g,g+b,b,0],h,k,1,l,m),a.translate(c,e),this.set.push(a));(c=this.bbset)&&this.scrollbarOnly&&c.remove()},updatePlotArea:function(){var a=
this.updateWidth(),b=this.updateHeight(),c=this.container;this.realWidth=a;this.realWidth=b;c&&this.container.setSize(a,b);a=a-this.marginLeftReal-this.marginRightReal-this.dx;b=b-this.marginTopReal-this.marginBottomReal;1>a&&(a=1);1>b&&(b=1);this.plotAreaWidth=Math.round(a);this.plotAreaHeight=Math.round(b)},updateDxy:function(){this.dx=Math.round(this.depth3D*Math.cos(this.angle*Math.PI/180));this.dy=Math.round(-this.depth3D*Math.sin(this.angle*Math.PI/180));this.d3x=Math.round(this.columnSpacing3D*
Math.cos(this.angle*Math.PI/180));this.d3y=Math.round(-this.columnSpacing3D*Math.sin(this.angle*Math.PI/180))},updateMargins:function(){var a=this.getTitleHeight();this.titleHeight=a;this.marginTopReal=this.marginTop-this.dy+a;this.marginBottomReal=this.marginBottom;this.marginLeftReal=this.marginLeft;this.marginRightReal=this.marginRight},updateValueAxes:function(){var a=this.valueAxes,b=this.marginLeftReal,c=this.marginTopReal,e=this.plotAreaHeight,f=this.plotAreaWidth,g;for(g=0;g<a.length;g++){var h=
a[g];h.axisRenderer=d.RecAxis;h.guideFillRenderer=d.RecFill;h.axisItemRenderer=d.RecItem;h.dx=this.dx;h.dy=this.dy;h.viW=f-1;h.viH=e-1;h.marginsChanged=!0;h.viX=b;h.viY=c;this.updateObjectSize(h)}},updateObjectSize:function(a){a.width=(this.plotAreaWidth-1)*this.widthMultiplier;a.height=(this.plotAreaHeight-1)*this.heightMultiplier;a.x=this.marginLeftReal+this.horizontalPosition;a.y=this.marginTopReal+this.verticalPosition},updateGraphs:function(){var a=this.graphs,b;for(b=0;b<a.length;b++){var c=
a[b];c.x=this.marginLeftReal+this.horizontalPosition;c.y=this.marginTopReal+this.verticalPosition;c.width=this.plotAreaWidth*this.widthMultiplier;c.height=this.plotAreaHeight*this.heightMultiplier;c.index=b;c.dx=this.dx;c.dy=this.dy;c.rotate=this.rotate}},updateChartCursor:function(){var a=this.chartCursor;a&&(a=d.processObject(a,d.ChartCursor,this.theme),this.addChartCursor(a),a.x=this.marginLeftReal,a.y=this.marginTopReal,a.width=this.plotAreaWidth-1,a.height=this.plotAreaHeight-1,a.chart=this)},
processScrollbars:function(){var a=this.chartScrollbar;a&&(a=d.processObject(a,d.ChartScrollbar,this.theme),this.addChartScrollbar(a))},updateScrollbars:function(){},addChartCursor:function(a){d.callMethod("destroy",[this.chartCursor]);a&&(this.listenTo(a,"changed",this.handleCursorChange),this.listenTo(a,"zoomed",this.handleCursorZoom));this.chartCursor=a},removeChartCursor:function(){d.callMethod("destroy",[this.chartCursor]);this.chartCursor=null},zoomTrendLines:function(){var a=this.trendLines,
b;for(b=0;b<a.length;b++){var c=a[b];c.valueAxis.recalculateToPercents?c.set&&c.set.hide():(c.x=this.marginLeftReal+this.horizontalPosition,c.y=this.marginTopReal+this.verticalPosition,c.draw())}},addTrendLine:function(a){this.trendLines.push(a)},removeTrendLine:function(a){var b=this.trendLines,c;for(c=b.length-1;0<=c;c--)b[c]==a&&b.splice(c,1)},adjustMargins:function(a,b){var c=a.scrollbarHeight+a.offset;"top"==a.position?b?this.marginLeftReal+=c:this.marginTopReal+=c:b?this.marginRightReal+=c:
this.marginBottomReal+=c},getScrollbarPosition:function(a,b,c){a.position=b?"bottom"==c||"left"==c?"bottom":"top":"top"==c||"right"==c?"bottom":"top"},updateChartScrollbar:function(a,b){if(a){a.rotate=b;var c=this.marginTopReal,e=this.marginLeftReal,f=a.scrollbarHeight,d=this.dx,h=this.dy,k=a.offset;"top"==a.position?b?(a.y=c,a.x=e-f-k):(a.y=c-f+h-1-k,a.x=e+d):b?(a.y=c+h,a.x=e+this.plotAreaWidth+d+k):(a.y=c+this.plotAreaHeight+k,a.x=this.marginLeftReal)}},showZB:function(a){var b=this.zbSet;b&&(a?
b.show():b.hide(),this.rollOutZB())},handleReleaseOutside:function(a){d.AmRectangularChart.base.handleReleaseOutside.call(this,a);(a=this.chartCursor)&&a.handleReleaseOutside()},handleMouseDown:function(a){d.AmRectangularChart.base.handleMouseDown.call(this,a);var b=this.chartCursor;b&&b.handleMouseDown(a)},handleCursorChange:function(a){}});d.TrendLine=d.Class({construct:function(a){this.cname="TrendLine";this.createEvents("click");this.isProtected=!1;this.dashLength=0;this.lineColor="#00CC00";this.lineThickness=
this.lineAlpha=1;d.applyTheme(this,a,this.cname)},draw:function(){var a=this;a.destroy();var b=a.chart,c=b.container,e,f,g,h,k=a.categoryAxis,l=a.initialDate,m=a.initialCategory,n=a.finalDate,p=a.finalCategory,q=a.valueAxis,r=a.valueAxisX,t=a.initialXValue,u=a.finalXValue,A=a.initialValue,y=a.finalValue,x=q.recalculateToPercents,w=b.dataDateFormat;k&&(l&&(l instanceof Date||(l=w?d.stringToDate(l,w):new Date(l)),a.initialDate=l,e=k.dateToCoordinate(l)),m&&(e=k.categoryToCoordinate(m)),n&&(n instanceof
Date||(n=w?d.stringToDate(n,w):new Date(n)),a.finalDate=n,f=k.dateToCoordinate(n)),p&&(f=k.categoryToCoordinate(p)));r&&!x&&(isNaN(t)||(e=r.getCoordinate(t)),isNaN(u)||(f=r.getCoordinate(u)));q&&!x&&(isNaN(A)||(g=q.getCoordinate(A)),isNaN(y)||(h=q.getCoordinate(y)));isNaN(e)||isNaN(f)||isNaN(g)||isNaN(g)||(b.rotate?(k=[g,h],f=[e,f]):(k=[e,f],f=[g,h]),g=a.lineColor,e=d.line(c,k,f,g,a.lineAlpha,a.lineThickness,a.dashLength),h=k,l=f,p=k[1]-k[0],q=f[1]-f[0],0===p&&(p=.01),0===q&&(q=.01),m=p/Math.abs(p),
n=q/Math.abs(q),q=p*q/Math.abs(p*q)*Math.sqrt(Math.pow(p,2)+Math.pow(q,2)),p=Math.asin(p/q),q=90*Math.PI/180-p,p=Math.abs(5*Math.cos(q)),q=Math.abs(5*Math.sin(q)),h.push(k[1]-m*q,k[0]-m*q),l.push(f[1]+n*p,f[0]+n*p),k=d.polygon(c,h,l,g,.005,0),c=c.set([k,e]),c.translate(b.marginLeftReal,b.marginTopReal),b.trendLinesSet.push(c),a.line=e,a.set=c,k.mouseup(function(){a.handleLineClick()}).mouseover(function(){a.handleLineOver()}).mouseout(function(){a.handleLineOut()}),k.touchend&&k.touchend(function(){a.handleLineClick()}))},
handleLineClick:function(){var a={type:"click",trendLine:this,chart:this.chart};this.fire(a.type,a)},handleLineOver:function(){var a=this.rollOverColor;void 0!==a&&this.line.attr({stroke:a})},handleLineOut:function(){this.line.attr({stroke:this.lineColor})},destroy:function(){d.remove(this.set)}});d.circle=function(a,b,c,e,f,g,h,k,l){if(void 0==f||0===f)f=.01;void 0===g&&(g="#000000");void 0===h&&(h=0);e={fill:c,stroke:g,"fill-opacity":e,"stroke-width":f,"stroke-opacity":h};a=isNaN(l)?a.circle(0,
0,b).attr(e):a.ellipse(0,0,b,l).attr(e);k&&a.gradient("radialGradient",[c,d.adjustLuminosity(c,-.6)]);return a};d.text=function(a,b,c,e,f,g,h,k){g||(g="middle");"right"==g&&(g="end");isNaN(k)&&(k=1);void 0!==b&&(b=String(b),d.isIE&&!d.isModern&&(b=b.replace("&amp;","&"),b=b.replace("&","&amp;")));c={fill:c,"font-family":e,"font-size":f,opacity:k};!0===h&&(c["font-weight"]="bold");c["text-anchor"]=g;return a.text(b,c)};d.polygon=function(a,b,c,e,f,g,h,k,l,m,n){isNaN(g)&&(g=.01);isNaN(k)&&(k=f);var p=
e,q=!1;"object"==typeof p&&1<p.length&&(q=!0,p=p[0]);void 0===h&&(h=p);f={fill:p,stroke:h,"fill-opacity":f,"stroke-width":g,"stroke-opacity":k};void 0!==n&&0<n&&(f["stroke-dasharray"]=n);n=d.dx;g=d.dy;a.handDrawn&&(c=d.makeHD(b,c,a.handDrawScatter),b=c[0],c=c[1]);h=Math.round;m&&(h=d.doNothing);m="M"+(h(b[0])+n)+","+(h(c[0])+g);for(k=1;k<b.length;k++)m+=" L"+(h(b[k])+n)+","+(h(c[k])+g);a=a.path(m+" Z").attr(f);q&&a.gradient("linearGradient",e,l);return a};d.rect=function(a,b,c,e,f,g,h,k,l,m,n){isNaN(g)&&
(g=0);void 0===l&&(l=0);void 0===m&&(m=270);isNaN(f)&&(f=0);var p=e,q=!1;"object"==typeof p&&(p=p[0],q=!0);void 0===h&&(h=p);void 0===k&&(k=f);b=Math.round(b);c=Math.round(c);var r=0,t=0;0>b&&(b=Math.abs(b),r=-b);0>c&&(c=Math.abs(c),t=-c);r+=d.dx;t+=d.dy;f={fill:p,stroke:h,"fill-opacity":f,"stroke-opacity":k};void 0!==n&&0<n&&(f["stroke-dasharray"]=n);a=a.rect(r,t,b,c,l,g).attr(f);q&&a.gradient("linearGradient",e,m);return a};d.bullet=function(a,b,c,e,f,g,h,k,l,m,n){var p;"circle"==b&&(b="round");
switch(b){case "round":p=d.circle(a,c/2,e,f,g,h,k);break;case "square":p=d.polygon(a,[-c/2,c/2,c/2,-c/2],[c/2,c/2,-c/2,-c/2],e,f,g,h,k,m-180);break;case "rectangle":p=d.polygon(a,[-c,c,c,-c],[c/2,c/2,-c/2,-c/2],e,f,g,h,k,m-180);break;case "diamond":p=d.polygon(a,[-c/2,0,c/2,0],[0,-c/2,0,c/2],e,f,g,h,k);break;case "triangleUp":p=d.triangle(a,c,0,e,f,g,h,k);break;case "triangleDown":p=d.triangle(a,c,180,e,f,g,h,k);break;case "triangleLeft":p=d.triangle(a,c,270,e,f,g,h,k);break;case "triangleRight":p=
d.triangle(a,c,90,e,f,g,h,k);break;case "bubble":p=d.circle(a,c/2,e,f,g,h,k,!0);break;case "line":p=d.line(a,[-c/2,c/2],[0,0],e,f,g,h,k);break;case "yError":p=a.set();p.push(d.line(a,[0,0],[-c/2,c/2],e,f,g));p.push(d.line(a,[-l,l],[-c/2,-c/2],e,f,g));p.push(d.line(a,[-l,l],[c/2,c/2],e,f,g));break;case "xError":p=a.set(),p.push(d.line(a,[-c/2,c/2],[0,0],e,f,g)),p.push(d.line(a,[-c/2,-c/2],[-l,l],e,f,g)),p.push(d.line(a,[c/2,c/2],[-l,l],e,f,g))}p&&p.pattern(n);return p};d.triangle=function(a,b,c,e,
f,d,h,k){if(void 0===d||0===d)d=1;void 0===h&&(h="#000");void 0===k&&(k=0);e={fill:e,stroke:h,"fill-opacity":f,"stroke-width":d,"stroke-opacity":k};b/=2;var l;0===c&&(l=" M"+-b+","+b+" L0,"+-b+" L"+b+","+b+" Z");180==c&&(l=" M"+-b+","+-b+" L0,"+b+" L"+b+","+-b+" Z");90==c&&(l=" M"+-b+","+-b+" L"+b+",0 L"+-b+","+b+" Z");270==c&&(l=" M"+-b+",0 L"+b+","+b+" L"+b+","+-b+" Z");return a.path(l).attr(e)};d.line=function(a,b,c,e,f,g,h,k,l,m,n){if(a.handDrawn&&!n)return d.handDrawnLine(a,b,c,e,f,g,h,k,l,m,
n);g={fill:"none","stroke-width":g};void 0!==h&&0<h&&(g["stroke-dasharray"]=h);isNaN(f)||(g["stroke-opacity"]=f);e&&(g.stroke=e);e=Math.round;m&&(e=d.doNothing);m=d.dx;f=d.dy;h="M"+(e(b[0])+m)+","+(e(c[0])+f);for(k=1;k<b.length;k++)h+=" L"+(e(b[k])+m)+","+(e(c[k])+f);if(d.VML)return a.path(h,void 0,!0).attr(g);l&&(h+=" M0,0 L0,0");return a.path(h).attr(g)};d.makeHD=function(a,b,c){for(var e=[],f=[],d=1;d<a.length;d++)for(var h=Number(a[d-1]),k=Number(b[d-1]),l=Number(a[d]),m=Number(b[d]),n=Math.sqrt(Math.pow(l-
h,2)+Math.pow(m-k,2)),n=Math.round(n/50)+1,l=(l-h)/n,m=(m-k)/n,p=0;p<=n;p++){var q=h+p*l+Math.random()*c,r=k+p*m+Math.random()*c;e.push(q);f.push(r)}return[e,f]};d.handDrawnLine=function(a,b,c,e,f,g,h,k,l,m,n){var p=a.set();for(n=1;n<b.length;n++)for(var q=[b[n-1],b[n]],r=[c[n-1],c[n]],r=d.makeHD(q,r,a.handDrawScatter),q=r[0],r=r[1],t=1;t<q.length;t++)p.push(d.line(a,[q[t-1],q[t]],[r[t-1],r[t]],e,f,g+Math.random()*a.handDrawThickness-a.handDrawThickness/2,h,k,l,m,!0));return p};d.doNothing=function(a){return a};
d.wedge=function(a,b,c,e,f,g,h,k,l,m,n,p){var q=Math.round;g=q(g);h=q(h);k=q(k);var r=q(h/g*k),t=d.VML,u=359.5+g/100;359.94<u&&(u=359.94);f>=u&&(f=u);var A=1/180*Math.PI,u=b+Math.sin(e*A)*k,y=c-Math.cos(e*A)*r,x=b+Math.sin(e*A)*g,w=c-Math.cos(e*A)*h,v=b+Math.sin((e+f)*A)*g,z=c-Math.cos((e+f)*A)*h,B=b+Math.sin((e+f)*A)*k,A=c-Math.cos((e+f)*A)*r,E={fill:d.adjustLuminosity(m.fill,-.2),"stroke-opacity":0,"fill-opacity":m["fill-opacity"]},D=0;180<Math.abs(f)&&(D=1);e=a.set();var F;t&&(u=q(10*u),x=q(10*
x),v=q(10*v),B=q(10*B),y=q(10*y),w=q(10*w),z=q(10*z),A=q(10*A),b=q(10*b),l=q(10*l),c=q(10*c),g*=10,h*=10,k*=10,r*=10,1>Math.abs(f)&&1>=Math.abs(v-x)&&1>=Math.abs(z-w)&&(F=!0));f="";var ea;p&&(E["fill-opacity"]=0,E["stroke-opacity"]=m["stroke-opacity"]/2,E.stroke=m.stroke);0<l&&(ea=" M"+u+","+(y+l)+" L"+x+","+(w+l),t?(F||(ea+=" A"+(b-g)+","+(l+c-h)+","+(b+g)+","+(l+c+h)+","+x+","+(w+l)+","+v+","+(z+l)),ea+=" L"+B+","+(A+l),0<k&&(F||(ea+=" B"+(b-k)+","+(l+c-r)+","+(b+k)+","+(l+c+r)+","+B+","+(l+A)+
","+u+","+(l+y)))):(ea+=" A"+g+","+h+",0,"+D+",1,"+v+","+(z+l)+" L"+B+","+(A+l),0<k&&(ea+=" A"+k+","+r+",0,"+D+",0,"+u+","+(y+l))),ea=a.path(ea+" Z",void 0,void 0,"1000,1000").attr(E),e.push(ea),ea=a.path(" M"+u+","+y+" L"+u+","+(y+l)+" L"+x+","+(w+l)+" L"+x+","+w+" L"+u+","+y+" Z",void 0,void 0,"1000,1000").attr(E),l=a.path(" M"+v+","+z+" L"+v+","+(z+l)+" L"+B+","+(A+l)+" L"+B+","+A+" L"+v+","+z+" Z",void 0,void 0,"1000,1000").attr(E),e.push(ea),e.push(l));t?(F||(f=" A"+q(b-g)+","+q(c-h)+","+q(b+
g)+","+q(c+h)+","+q(x)+","+q(w)+","+q(v)+","+q(z)),g=" M"+q(u)+","+q(y)+" L"+q(x)+","+q(w)+f+" L"+q(B)+","+q(A)):g=" M"+u+","+y+" L"+x+","+w+(" A"+g+","+h+",0,"+D+",1,"+v+","+z)+" L"+B+","+A;0<k&&(t?F||(g+=" B"+(b-k)+","+(c-r)+","+(b+k)+","+(c+r)+","+B+","+A+","+u+","+y):g+=" A"+k+","+r+",0,"+D+",0,"+u+","+y);a.handDrawn&&(b=d.line(a,[u,x],[y,w],m.stroke,m.thickness*Math.random()*a.handDrawThickness,m["stroke-opacity"]),e.push(b));a=a.path(g+" Z",void 0,void 0,"1000,1000").attr(m);if(n){b=[];for(c=
0;c<n.length;c++)b.push(d.adjustLuminosity(m.fill,n[c]));0<b.length&&a.gradient("linearGradient",b)}a.pattern(p);e.push(a);return e};d.adjustLuminosity=function(a,b){a=String(a).replace(/[^0-9a-f]/gi,"");6>a.length&&(a=String(a[0])+String(a[0])+String(a[1])+String(a[1])+String(a[2])+String(a[2]));b=b||0;var c="#",e,f;for(f=0;3>f;f++)e=parseInt(a.substr(2*f,2),16),e=Math.round(Math.min(Math.max(0,e+e*b),255)).toString(16),c+=("00"+e).substr(e.length);return c};d.Bezier=d.Class({construct:function(a,
b,c,e,f,g,h,k,l,m){"object"==typeof h&&(h=h[0]);"object"==typeof k&&(k=k[0]);g={fill:h,"fill-opacity":k,"stroke-width":g};void 0!==l&&0<l&&(g["stroke-dasharray"]=l);isNaN(f)||(g["stroke-opacity"]=f);e&&(g.stroke=e);e="M"+Math.round(b[0])+","+Math.round(c[0]);f=[];for(l=0;l<b.length;l++)f.push({x:Number(b[l]),y:Number(c[l])});1<f.length&&(b=this.interpolate(f),e+=this.drawBeziers(b));m?e+=m:d.VML||(e+="M0,0 L0,0");this.path=a.path(e).attr(g)},interpolate:function(a){var b=[];b.push({x:a[0].x,y:a[0].y});
var c=a[1].x-a[0].x,e=a[1].y-a[0].y,f=d.bezierX,g=d.bezierY;b.push({x:a[0].x+c/f,y:a[0].y+e/g});var h;for(h=1;h<a.length-1;h++){var k=a[h-1],l=a[h],e=a[h+1];isNaN(e.x)&&(e=l);isNaN(l.x)&&(l=k);isNaN(k.x)&&(k=l);c=e.x-l.x;e=e.y-k.y;k=l.x-k.x;k>c&&(k=c);b.push({x:l.x-k/f,y:l.y-e/g});b.push({x:l.x,y:l.y});b.push({x:l.x+k/f,y:l.y+e/g})}e=a[a.length-1].y-a[a.length-2].y;c=a[a.length-1].x-a[a.length-2].x;b.push({x:a[a.length-1].x-c/f,y:a[a.length-1].y-e/g});b.push({x:a[a.length-1].x,y:a[a.length-1].y});
return b},drawBeziers:function(a){var b="",c;for(c=0;c<(a.length-1)/3;c++)b+=this.drawBezierMidpoint(a[3*c],a[3*c+1],a[3*c+2],a[3*c+3]);return b},drawBezierMidpoint:function(a,b,c,e){var f=Math.round,d=this.getPointOnSegment(a,b,.75),h=this.getPointOnSegment(e,c,.75),k=(e.x-a.x)/16,l=(e.y-a.y)/16,m=this.getPointOnSegment(a,b,.375);a=this.getPointOnSegment(d,h,.375);a.x-=k;a.y-=l;b=this.getPointOnSegment(h,d,.375);b.x+=k;b.y+=l;c=this.getPointOnSegment(e,c,.375);k=this.getMiddle(m,a);d=this.getMiddle(d,
h);h=this.getMiddle(b,c);m=" Q"+f(m.x)+","+f(m.y)+","+f(k.x)+","+f(k.y);m+=" Q"+f(a.x)+","+f(a.y)+","+f(d.x)+","+f(d.y);m+=" Q"+f(b.x)+","+f(b.y)+","+f(h.x)+","+f(h.y);return m+(" Q"+f(c.x)+","+f(c.y)+","+f(e.x)+","+f(e.y))},getMiddle:function(a,b){return{x:(a.x+b.x)/2,y:(a.y+b.y)/2}},getPointOnSegment:function(a,b,c){return{x:a.x+(b.x-a.x)*c,y:a.y+(b.y-a.y)*c}}});d.AmDraw=d.Class({construct:function(a,b,c,e){d.SVG_NS="http://www.w3.org/2000/svg";d.SVG_XLINK="http://www.w3.org/1999/xlink";d.hasSVG=
!!document.createElementNS&&!!document.createElementNS(d.SVG_NS,"svg").createSVGRect;1>b&&(b=10);1>c&&(c=10);this.div=a;this.width=b;this.height=c;this.rBin=document.createElement("div");if(d.hasSVG){d.SVG=!0;var f=this.createSvgElement("svg");f.style.position="absolute";f.style.width=b+"px";f.style.height=c+"px";b=this.createSvgElement("desc");b.appendChild(document.createTextNode("JavaScript chart by amCharts "+e.version));f.appendChild(b);d.rtl&&(f.setAttribute("direction","rtl"),f.style.left=
"auto",f.style.right="0px");f.setAttribute("version","1.1");a.appendChild(f);this.container=f;this.R=new d.SVGRenderer(this)}else d.isIE&&d.VMLRenderer&&(d.VML=!0,d.vmlStyleSheet||(document.namespaces.add("amvml","urn:schemas-microsoft-com:vml"),31>document.styleSheets.length?(f=document.createStyleSheet(),f.addRule(".amvml","behavior:url(#default#VML); display:inline-block; antialias:true"),d.vmlStyleSheet=f):document.styleSheets[0].addRule(".amvml","behavior:url(#default#VML); display:inline-block; antialias:true")),
this.container=a,this.R=new d.VMLRenderer(this,e),this.R.disableSelection(a))},createSvgElement:function(a){return document.createElementNS(d.SVG_NS,a)},circle:function(a,b,c,e){var f=new d.AmDObject("circle",this);f.attr({r:c,cx:a,cy:b});this.addToContainer(f.node,e);return f},ellipse:function(a,b,c,e,f){var g=new d.AmDObject("ellipse",this);g.attr({rx:c,ry:e,cx:a,cy:b});this.addToContainer(g.node,f);return g},setSize:function(a,b){0<a&&0<b&&(this.container.style.width=a+"px",this.container.style.height=
b+"px")},rect:function(a,b,c,e,f,g,h){var k=new d.AmDObject("rect",this);d.VML&&(f=Math.round(100*f/Math.min(c,e)),c+=2*g,e+=2*g,k.bw=g,k.node.style.marginLeft=-g,k.node.style.marginTop=-g);1>c&&(c=1);1>e&&(e=1);k.attr({x:a,y:b,width:c,height:e,rx:f,ry:f,"stroke-width":g});this.addToContainer(k.node,h);return k},image:function(a,b,c,e,f,g){var h=new d.AmDObject("image",this);h.attr({x:b,y:c,width:e,height:f});this.R.path(h,a);this.addToContainer(h.node,g);return h},addToContainer:function(a,b){b||
(b=this.container);b.appendChild(a)},text:function(a,b,c){return this.R.text(a,b,c)},path:function(a,b,c,e){var f=new d.AmDObject("path",this);e||(e="100,100");f.attr({cs:e});c?f.attr({dd:a}):f.attr({d:a});this.addToContainer(f.node,b);return f},set:function(a){return this.R.set(a)},remove:function(a){if(a){var b=this.rBin;b.appendChild(a);b.innerHTML=""}},renderFix:function(){var a=this.container,b=a.style,c;try{c=a.getScreenCTM()||a.createSVGMatrix()}catch(e){c=a.createSVGMatrix()}a=1-c.e%1;c=1-
c.f%1;.5<a&&--a;.5<c&&--c;a&&(b.left=a+"px");c&&(b.top=c+"px")},update:function(){this.R.update()}});d.AmDObject=d.Class({construct:function(a,b){this.D=b;this.R=b.R;this.node=this.R.create(this,a);this.y=this.x=0;this.scale=1},attr:function(a){this.R.attr(this,a);return this},getAttr:function(a){return this.node.getAttribute(a)},setAttr:function(a,b){this.R.setAttr(this,a,b);return this},clipRect:function(a,b,c,e){this.R.clipRect(this,a,b,c,e)},translate:function(a,b,c,e){e||(a=Math.round(a),b=Math.round(b));
this.R.move(this,a,b,c);this.x=a;this.y=b;this.scale=c;this.angle&&this.rotate(this.angle)},rotate:function(a,b){this.R.rotate(this,a,b);this.angle=a},animate:function(a,b,c){for(var e in a)if(a.hasOwnProperty(e)){var f=e,g=a[e];c=d.getEffect(c);this.R.animate(this,f,g,b,c)}},push:function(a){if(a){var b=this.node;b.appendChild(a.node);var c=a.clipPath;c&&b.appendChild(c);(a=a.grad)&&b.appendChild(a)}},text:function(a){this.R.setText(this,a)},remove:function(){this.R.remove(this)},clear:function(){var a=
this.node;if(a.hasChildNodes())for(;1<=a.childNodes.length;)a.removeChild(a.firstChild)},hide:function(){this.setAttr("visibility","hidden")},show:function(){this.setAttr("visibility","visible")},getBBox:function(){return this.R.getBBox(this)},toFront:function(){var a=this.node;if(a){this.prevNextNode=a.nextSibling;var b=a.parentNode;b&&b.appendChild(a)}},toPrevious:function(){var a=this.node;a&&this.prevNextNode&&(a=a.parentNode)&&a.insertBefore(this.prevNextNode,null)},toBack:function(){var a=this.node;
if(a){this.prevNextNode=a.nextSibling;var b=a.parentNode;if(b){var c=b.firstChild;c&&b.insertBefore(a,c)}}},mouseover:function(a){this.R.addListener(this,"mouseover",a);return this},mouseout:function(a){this.R.addListener(this,"mouseout",a);return this},click:function(a){this.R.addListener(this,"click",a);return this},dblclick:function(a){this.R.addListener(this,"dblclick",a);return this},mousedown:function(a){this.R.addListener(this,"mousedown",a);return this},mouseup:function(a){this.R.addListener(this,
"mouseup",a);return this},touchstart:function(a){this.R.addListener(this,"touchstart",a);return this},touchend:function(a){this.R.addListener(this,"touchend",a);return this},contextmenu:function(a){this.node.addEventListener?this.node.addEventListener("contextmenu",a,!0):this.R.addListener(this,"contextmenu",a);return this},stop:function(a){d.removeFromArray(this.R.animations,this.an_x);d.removeFromArray(this.R.animations,this.an_y)},length:function(){return this.node.childNodes.length},gradient:function(a,
b,c){this.R.gradient(this,a,b,c)},pattern:function(a,b){a&&this.R.pattern(this,a,b)}});d.VMLRenderer=d.Class({construct:function(a,b){this.chart=b;this.D=a;this.cNames={circle:"oval",ellipse:"oval",rect:"roundrect",path:"shape"};this.styleMap={x:"left",y:"top",width:"width",height:"height","font-family":"fontFamily","font-size":"fontSize",visibility:"visibility"}},create:function(a,b){var c;if("group"==b)c=document.createElement("div"),a.type="div";else if("text"==b)c=document.createElement("div"),
a.type="text";else if("image"==b)c=document.createElement("img"),a.type="image";else{a.type="shape";a.shapeType=this.cNames[b];c=document.createElement("amvml:"+this.cNames[b]);var e=document.createElement("amvml:stroke");c.appendChild(e);a.stroke=e;var f=document.createElement("amvml:fill");c.appendChild(f);a.fill=f;f.className="amvml";e.className="amvml";c.className="amvml"}c.style.position="absolute";c.style.top=0;c.style.left=0;return c},path:function(a,b){a.node.setAttribute("src",b)},setAttr:function(a,
b,c){if(void 0!==c){var e;8===document.documentMode&&(e=!0);var f=a.node,g=a.type,h=f.style;"r"==b&&(h.width=2*c,h.height=2*c);"oval"==a.shapeType&&("rx"==b&&(h.width=2*c),"ry"==b&&(h.height=2*c));"roundrect"==a.shapeType&&("width"!=b&&"height"!=b||--c);"cursor"==b&&(h.cursor=c);"cx"==b&&(h.left=c-d.removePx(h.width)/2);"cy"==b&&(h.top=c-d.removePx(h.height)/2);var k=this.styleMap[b];void 0!==k&&(h[k]=c);"text"==g&&("text-anchor"==b&&(a.anchor=c,k=f.clientWidth,"end"==c&&(h.marginLeft=-k+"px"),"middle"==
c&&(h.marginLeft=-(k/2)+"px",h.textAlign="center"),"start"==c&&(h.marginLeft="0px")),"fill"==b&&(h.color=c),"font-weight"==b&&(h.fontWeight=c));if(h=a.children)for(k=0;k<h.length;k++)h[k].setAttr(b,c);if("shape"==g){"cs"==b&&(f.style.width="100px",f.style.height="100px",f.setAttribute("coordsize",c));"d"==b&&f.setAttribute("path",this.svgPathToVml(c));"dd"==b&&f.setAttribute("path",c);g=a.stroke;a=a.fill;"stroke"==b&&(e?g.color=c:g.setAttribute("color",c));"stroke-width"==b&&(e?g.weight=c:g.setAttribute("weight",
c));"stroke-opacity"==b&&(e?g.opacity=c:g.setAttribute("opacity",c));"stroke-dasharray"==b&&(h="solid",0<c&&3>c&&(h="dot"),3<=c&&6>=c&&(h="dash"),6<c&&(h="longdash"),e?g.dashstyle=h:g.setAttribute("dashstyle",h));if("fill-opacity"==b||"opacity"==b)0===c?e?a.on=!1:a.setAttribute("on",!1):e?a.opacity=c:a.setAttribute("opacity",c);"fill"==b&&(e?a.color=c:a.setAttribute("color",c));"rx"==b&&(e?f.arcSize=c+"%":f.setAttribute("arcsize",c+"%"))}}},attr:function(a,b){for(var c in b)b.hasOwnProperty(c)&&this.setAttr(a,
c,b[c])},text:function(a,b,c){var e=new d.AmDObject("text",this.D),f=e.node;f.style.whiteSpace="pre";f.innerHTML=a;this.D.addToContainer(f,c);this.attr(e,b);return e},getBBox:function(a){return this.getBox(a.node)},getBox:function(a){var b=a.offsetLeft,c=a.offsetTop,e=a.offsetWidth,f=a.offsetHeight,d;if(a.hasChildNodes()){var h,k,l;for(l=0;l<a.childNodes.length;l++){d=this.getBox(a.childNodes[l]);var m=d.x;isNaN(m)||(isNaN(h)?h=m:m<h&&(h=m));var n=d.y;isNaN(n)||(isNaN(k)?k=n:n<k&&(k=n));m=d.width+
m;isNaN(m)||(e=Math.max(e,m));d=d.height+n;isNaN(d)||(f=Math.max(f,d))}0>h&&(b+=h);0>k&&(c+=k)}return{x:b,y:c,width:e,height:f}},setText:function(a,b){var c=a.node;c&&(c.innerHTML=b);this.setAttr(a,"text-anchor",a.anchor)},addListener:function(a,b,c){a.node["on"+b]=c},move:function(a,b,c){var e=a.node,f=e.style;"text"==a.type&&(c-=d.removePx(f.fontSize)/2-1);"oval"==a.shapeType&&(b-=d.removePx(f.width)/2,c-=d.removePx(f.height)/2);a=a.bw;isNaN(a)||(b-=a,c-=a);isNaN(b)||isNaN(c)||(e.style.left=b+"px",
e.style.top=c+"px")},svgPathToVml:function(a){var b=a.split(" ");a="";var c,e=Math.round,f;for(f=0;f<b.length;f++){var d=b[f],h=d.substring(0,1),d=d.substring(1),k=d.split(","),l=e(k[0])+","+e(k[1]);"M"==h&&(a+=" m "+l);"L"==h&&(a+=" l "+l);"Z"==h&&(a+=" x e");if("Q"==h){var m=c.length,n=c[m-1],p=k[0],q=k[1],l=k[2],r=k[3];c=e(c[m-2]/3+2/3*p);n=e(n/3+2/3*q);p=e(2/3*p+l/3);q=e(2/3*q+r/3);a+=" c "+c+","+n+","+p+","+q+","+l+","+r}"A"==h&&(a+=" wa "+d);"B"==h&&(a+=" at "+d);c=k}return a},animate:function(a,
b,c,e,f){var d=a.node,h=this.chart;if("translate"==b){b=c.split(",");c=b[1];var k=d.offsetTop;h.animate(a,"left",d.offsetLeft,b[0],e,f,"px");h.animate(a,"top",k,c,e,f,"px")}},clipRect:function(a,b,c,e,f){a=a.node;0===b&&0===c?(a.style.width=e+"px",a.style.height=f+"px",a.style.overflow="hidden"):a.style.clip="rect("+c+"px "+(b+e)+"px "+(c+f)+"px "+b+"px)"},rotate:function(a,b,c){if(0!==Number(b)){var e=a.node;a=e.style;c||(c=this.getBGColor(e.parentNode));a.backgroundColor=c;a.paddingLeft=1;c=b*Math.PI/
180;var f=Math.cos(c),g=Math.sin(c),h=d.removePx(a.left),k=d.removePx(a.top),l=e.offsetWidth,e=e.offsetHeight;b/=Math.abs(b);a.left=h+l/2-l/2*Math.cos(c)-b*e/2*Math.sin(c)+3;a.top=k-b*l/2*Math.sin(c)+b*e/2*Math.sin(c);a.cssText=a.cssText+"; filter:progid:DXImageTransform.Microsoft.Matrix(M11='"+f+"', M12='"+-g+"', M21='"+g+"', M22='"+f+"', sizingmethod='auto expand');"}},getBGColor:function(a){var b="#FFFFFF";if(a.style){var c=a.style.backgroundColor;""!==c?b=c:a.parentNode&&(b=this.getBGColor(a.parentNode))}return b},
set:function(a){var b=new d.AmDObject("group",this.D);this.D.container.appendChild(b.node);if(a){var c;for(c=0;c<a.length;c++)b.push(a[c])}return b},gradient:function(a,b,c,e){var f="";"radialGradient"==b&&(b="gradientradial",c.reverse());"linearGradient"==b&&(b="gradient");var d;for(d=0;d<c.length;d++){var h=Math.round(100*d/(c.length-1)),f=f+(h+"% "+c[d]);d<c.length-1&&(f+=",")}a=a.fill;90==e?e=0:270==e?e=180:180==e?e=90:0===e&&(e=270);8===document.documentMode?(a.type=b,a.angle=e):(a.setAttribute("type",
b),a.setAttribute("angle",e));f&&(a.colors.value=f)},remove:function(a){a.clipPath&&this.D.remove(a.clipPath);this.D.remove(a.node)},disableSelection:function(a){void 0!==typeof a.onselectstart&&(a.onselectstart=function(){return!1});a.style.cursor="default"},pattern:function(a,b){var c=a.node,e=a.fill,f="none";b.color&&(f=b.color);c.fillColor=f;8===document.documentMode?(e.type="tile",e.src=b.url):(e.setAttribute("type","tile"),e.setAttribute("src",b.url))},update:function(){}});d.SVGRenderer=d.Class({construct:function(a){this.D=
a;this.animations=[]},create:function(a,b){return document.createElementNS(d.SVG_NS,b)},attr:function(a,b){for(var c in b)b.hasOwnProperty(c)&&this.setAttr(a,c,b[c])},setAttr:function(a,b,c){void 0!==c&&a.node.setAttribute(b,c)},animate:function(a,b,c,e,f){var g=a.node;a["an_"+b]&&d.removeFromArray(this.animations,a["an_"+b]);"translate"==b?(g=(g=g.getAttribute("transform"))?String(g).substring(10,g.length-1):"0,0",g=g.split(", ").join(" "),g=g.split(" ").join(","),0===g&&(g="0,0")):g=Number(g.getAttribute(b));
c={obj:a,frame:0,attribute:b,from:g,to:c,time:e,effect:f};this.animations.push(c);a["an_"+b]=c},update:function(){var a,b=this.animations;for(a=b.length-1;0<=a;a--){var c=b[a],e=1E3*c.time/d.updateRate,f=c.frame+1,g=c.obj,h=c.attribute,k,l,m;f<=e?(c.frame++,"translate"==h?(k=c.from.split(","),h=Number(k[0]),k=Number(k[1]),isNaN(k)&&(k=0),l=c.to.split(","),m=Number(l[0]),l=Number(l[1]),m=0===m-h?m:Math.round(d[c.effect](0,f,h,m-h,e)),c=0===l-k?l:Math.round(d[c.effect](0,f,k,l-k,e)),h="transform",c=
"translate("+m+","+c+")"):(l=Number(c.from),k=Number(c.to),m=k-l,c=d[c.effect](0,f,l,m,e),isNaN(c)&&(c=k),0===m&&this.animations.splice(a,1)),this.setAttr(g,h,c)):("translate"==h?(l=c.to.split(","),m=Number(l[0]),l=Number(l[1]),g.translate(m,l)):(k=Number(c.to),this.setAttr(g,h,k)),this.animations.splice(a,1))}},getBBox:function(a){if(a=a.node)try{return a.getBBox()}catch(b){}return{width:0,height:0,x:0,y:0}},path:function(a,b){a.node.setAttributeNS(d.SVG_XLINK,"xlink:href",b)},clipRect:function(a,
b,c,e,f){var g=a.node,h=a.clipPath;h&&this.D.remove(h);var k=g.parentNode;k&&(g=document.createElementNS(d.SVG_NS,"clipPath"),h=d.getUniqueId(),g.setAttribute("id",h),this.D.rect(b,c,e,f,0,0,g),k.appendChild(g),b="#",d.baseHref&&!d.isIE&&(b=this.removeTarget(v.location.href)+b),this.setAttr(a,"clip-path","url("+b+h+")"),this.clipPathC++,a.clipPath=g)},text:function(a,b,c){var e=new d.AmDObject("text",this.D);a=String(a).split("\n");var f=b["font-size"],g;for(g=0;g<a.length;g++){var h=this.create(null,
"tspan");h.appendChild(document.createTextNode(a[g]));h.setAttribute("y",(f+2)*g+Math.round(f/2));h.setAttribute("x",0);h.style.fontSize=f+"px";e.node.appendChild(h)}e.node.setAttribute("y",Math.round(f/2));this.attr(e,b);this.D.addToContainer(e.node,c);return e},setText:function(a,b){var c=a.node;c&&(c.removeChild(c.firstChild),c.appendChild(document.createTextNode(b)))},move:function(a,b,c,e){isNaN(b)&&(b=0);isNaN(c)&&(c=0);b="translate("+b+","+c+")";e&&(b=b+" scale("+e+")");this.setAttr(a,"transform",
b)},rotate:function(a,b){var c=a.node.getAttribute("transform"),e="rotate("+b+")";c&&(e=c+" "+e);this.setAttr(a,"transform",e)},set:function(a){var b=new d.AmDObject("g",this.D);this.D.container.appendChild(b.node);if(a){var c;for(c=0;c<a.length;c++)b.push(a[c])}return b},addListener:function(a,b,c){a.node["on"+b]=c},gradient:function(a,b,c,e){var f=a.node,g=a.grad;g&&this.D.remove(g);b=document.createElementNS(d.SVG_NS,b);g=d.getUniqueId();b.setAttribute("id",g);if(!isNaN(e)){var h=0,k=0,l=0,m=0;
90==e?l=100:270==e?m=100:180==e?h=100:0===e&&(k=100);b.setAttribute("x1",h+"%");b.setAttribute("x2",k+"%");b.setAttribute("y1",l+"%");b.setAttribute("y2",m+"%")}for(e=0;e<c.length;e++)h=document.createElementNS(d.SVG_NS,"stop"),k=100*e/(c.length-1),0===e&&(k=0),h.setAttribute("offset",k+"%"),h.setAttribute("stop-color",c[e]),b.appendChild(h);f.parentNode.appendChild(b);c="#";d.baseHref&&!d.isIE&&(c=this.removeTarget(v.location.href)+c);f.setAttribute("fill","url("+c+g+")");a.grad=b},removeTarget:function(a){urlArr=
a.split("#");return urlArr[0]},pattern:function(a,b,c){var e=a.node;isNaN(c)&&(c=1);var f=a.patternNode;f&&this.D.remove(f);var f=document.createElementNS(d.SVG_NS,"pattern"),g=d.getUniqueId(),h=b;b.url&&(h=b.url);var k=Number(b.width);isNaN(k)&&(k=4);var l=Number(b.height);isNaN(l)&&(l=4);k/=c;l/=c;c=b.x;isNaN(c)&&(c=0);var m=-Math.random()*Number(b.randomX);isNaN(m)||(c=m);m=b.y;isNaN(m)&&(m=0);var n=-Math.random()*Number(b.randomY);isNaN(n)||(m=n);f.setAttribute("id",g);f.setAttribute("width",
k);f.setAttribute("height",l);f.setAttribute("patternUnits","userSpaceOnUse");f.setAttribute("xlink:href",h);b.color&&(n=document.createElementNS(d.SVG_NS,"rect"),n.setAttributeNS(null,"height",k),n.setAttributeNS(null,"width",l),n.setAttributeNS(null,"fill",b.color),f.appendChild(n));this.D.image(h,0,0,k,l,f).translate(c,m);h="#";d.baseHref&&!d.isIE&&(h=this.removeTarget(v.location.href)+h);e.setAttribute("fill","url("+h+g+")");a.patternNode=f;e.parentNode.appendChild(f)},remove:function(a){a.clipPath&&
this.D.remove(a.clipPath);a.grad&&this.D.remove(a.grad);a.patternNode&&this.D.remove(a.patternNode);this.D.remove(a.node)}});d.AmDSet=d.Class({construct:function(a){this.create("g")},attr:function(a){this.R.attr(this.node,a)},move:function(a,b){this.R.move(this.node,a,b)}});d.AmLegend=d.Class({construct:function(a){this.cname="AmLegend";this.createEvents("rollOverMarker","rollOverItem","rollOutMarker","rollOutItem","showItem","hideItem","clickMarker","rollOverItem","rollOutItem","clickLabel");this.position=
"bottom";this.borderColor=this.color="#000000";this.borderAlpha=0;this.markerLabelGap=5;this.verticalGap=10;this.align="left";this.horizontalGap=0;this.spacing=10;this.markerDisabledColor="#AAB3B3";this.markerType="square";this.markerSize=16;this.markerBorderThickness=this.markerBorderAlpha=1;this.marginBottom=this.marginTop=0;this.marginLeft=this.marginRight=20;this.autoMargins=!0;this.valueWidth=50;this.switchable=!0;this.switchType="x";this.switchColor="#FFFFFF";this.rollOverColor="#CC0000";this.reversedOrder=
!1;this.labelText="[[title]]";this.valueText="[[value]]";this.useMarkerColorForLabels=!1;this.rollOverGraphAlpha=1;this.textClickEnabled=!1;this.equalWidths=!0;this.dateFormat="DD-MM-YYYY";this.backgroundColor="#FFFFFF";this.backgroundAlpha=0;this.useGraphSettings=!1;this.showEntries=!0;d.applyTheme(this,a,this.cname)},setData:function(a){this.legendData=a;this.invalidateSize()},invalidateSize:function(){this.destroy();this.entries=[];this.valueLabels=[];(d.ifArray(this.legendData)||d.ifArray(this.data))&&
this.drawLegend()},drawLegend:function(){var a=this.chart,b=this.position,c=this.width,e=a.divRealWidth,f=a.divRealHeight,g=this.div,h=this.legendData;this.data&&(h=this.data);isNaN(this.fontSize)&&(this.fontSize=a.fontSize);if("right"==b||"left"==b)this.maxColumns=1,this.autoMargins&&(this.marginLeft=this.marginRight=10);else if(this.autoMargins){this.marginRight=a.marginRight;this.marginLeft=a.marginLeft;var k=a.autoMarginOffset;"bottom"==b?(this.marginBottom=k,this.marginTop=0):(this.marginTop=
k,this.marginBottom=0)}var l;void 0!==c?l=d.toCoordinate(c,e):"right"!=b&&"left"!=b&&(l=a.realWidth);"outside"==b?(l=g.offsetWidth,f=g.offsetHeight,g.clientHeight&&(l=g.clientWidth,f=g.clientHeight)):(isNaN(l)||(g.style.width=l+"px"),g.className="amChartsLegend");this.divWidth=l;(b=this.container)?(b.container.innerHTML="",g.appendChild(b.container),b.setSize(l,f)):b=new d.AmDraw(g,l,f,a);this.container=b;this.lx=0;this.ly=8;f=this.markerSize;f>this.fontSize&&(this.ly=f/2-1);0<f&&(this.lx+=f+this.markerLabelGap);
this.titleWidth=0;if(f=this.title)a=d.text(this.container,f,this.color,a.fontFamily,this.fontSize,"start",!0),a.translate(this.marginLeft,this.marginTop+this.verticalGap+this.ly+1),a=a.getBBox(),this.titleWidth=a.width+15,this.titleHeight=a.height+6;this.index=this.maxLabelWidth=0;if(this.showEntries){for(a=0;a<h.length;a++)this.createEntry(h[a]);for(a=this.index=0;a<h.length;a++)this.createValue(h[a])}this.arrangeEntries();this.updateValues()},arrangeEntries:function(){var a=this.position,b=this.marginLeft+
this.titleWidth,c=this.marginRight,e=this.marginTop,f=this.marginBottom,g=this.horizontalGap,h=this.div,k=this.divWidth,l=this.maxColumns,m=this.verticalGap,n=this.spacing,p=k-c-b,q=0,r=0,t=this.container;this.set&&this.set.remove();var u=t.set();this.set=u;var A=t.set();u.push(A);var y=this.entries,x,w;for(w=0;w<y.length;w++){x=y[w].getBBox();var v=x.width;v>q&&(q=v);x=x.height;x>r&&(r=x)}var v=r=0,z=g,B=0,E=0;for(w=0;w<y.length;w++){var D=y[w];this.reversedOrder&&(D=y[y.length-w-1]);x=D.getBBox();
var F;this.equalWidths?F=g+v*(q+n+this.markerLabelGap):(F=z,z=z+x.width+g+n);x.height>E&&(E=x.height);F+x.width>p&&0<w&&0!==v&&(r++,v=0,F=g,z=F+x.width+g+n,B=B+E+m,E=0);D.translate(F,B);v++;!isNaN(l)&&v>=l&&(v=0,r++,B=B+E+m,E=0);A.push(D)}x=A.getBBox();l=x.height+2*m-1;"left"==a||"right"==a?(k=x.width+2*g,h.style.width=k+b+c+"px"):k=k-b-c-1;c=d.polygon(this.container,[0,k,k,0],[0,0,l,l],this.backgroundColor,this.backgroundAlpha,1,this.borderColor,this.borderAlpha);u.push(c);u.translate(b,e);c.toBack();
b=g;if("top"==a||"bottom"==a||"absolute"==a||"outside"==a)"center"==this.align?b=g+(k-x.width)/2:"right"==this.align&&(b=g+k-x.width);A.translate(b,m+1);this.titleHeight>l&&(l=this.titleHeight);a=l+e+f+1;0>a&&(a=0);h.style.height=Math.round(a)+"px";t.setSize(this.divWidth,a)},createEntry:function(a){if(!1!==a.visibleInLegend){var b=this.chart,c=a.markerType;a.legendEntryWidth=this.markerSize;c||(c=this.markerType);var e=a.color,f=a.alpha;a.legendKeyColor&&(e=a.legendKeyColor());a.legendKeyAlpha&&
(f=a.legendKeyAlpha());var g;!0===a.hidden&&(g=e=this.markerDisabledColor);var h=a.pattern,k=a.customMarker;k||(k=this.customMarker);var l=this.container,m=this.markerSize,n=0,p=0,q=m/2;if(this.useGraphSettings)if(n=a.type,this.switchType=void 0,"line"==n||"step"==n||"smoothedLine"==n||"ohlc"==n)h=l.set(),a.hidden||(e=a.lineColorR,g=a.bulletBorderColorR),p=d.line(l,[0,2*m],[m/2,m/2],e,a.lineAlpha,a.lineThickness,a.dashLength),h.push(p),a.bullet&&(a.hidden||(e=a.bulletColorR),p=d.bullet(l,a.bullet,
a.bulletSize,e,a.bulletAlpha,a.bulletBorderThickness,g,a.bulletBorderAlpha))&&(p.translate(m+1,m/2),h.push(p)),q=0,n=m,p=m/3;else{var r;a.getGradRotation&&(r=a.getGradRotation());n=a.fillColorsR;!0===a.hidden&&(n=e);if(h=this.createMarker("rectangle",n,a.fillAlphas,a.lineThickness,e,a.lineAlpha,r,h))q=m,h.translate(q,m/2);n=m}else k?(b.path&&(k=b.path+k),h=l.image(k,0,0,m,m)):(h=this.createMarker(c,e,f,void 0,void 0,void 0,void 0,h))&&h.translate(m/2,m/2);this.addListeners(h,a);l=l.set([h]);this.switchable&&
a.switchable&&l.setAttr("cursor","pointer");(g=this.switchType)&&"none"!=g&&("x"==g?(r=this.createX(),r.translate(m/2,m/2)):r=this.createV(),r.dItem=a,!0!==a.hidden?"x"==g?r.hide():r.show():"x"!=g&&r.hide(),this.switchable||r.hide(),this.addListeners(r,a),a.legendSwitch=r,l.push(r));g=this.color;a.showBalloon&&this.textClickEnabled&&void 0!==this.selectedColor&&(g=this.selectedColor);this.useMarkerColorForLabels&&(g=e);!0===a.hidden&&(g=this.markerDisabledColor);e=d.massReplace(this.labelText,{"[[title]]":a.title});
r=this.fontSize;h&&(m<=r&&h.translate(q,m/2+this.ly-r/2+(r+2-m)/2-p),a.legendEntryWidth=h.getBBox().width);var t;e&&(e=d.fixBrakes(e),a.legendTextReal=e,t=this.labelWidth,t=isNaN(t)?d.text(this.container,e,g,b.fontFamily,r,"start"):d.wrappedText(this.container,e,g,b.fontFamily,r,"start",!1,t,0),t.translate(this.lx+n,this.ly),l.push(t),b=t.getBBox().width,this.maxLabelWidth<b&&(this.maxLabelWidth=b));this.entries[this.index]=l;a.legendEntry=this.entries[this.index];a.legendLabel=t;this.index++}},addListeners:function(a,
b){var c=this;a&&a.mouseover(function(a){c.rollOverMarker(b,a)}).mouseout(function(a){c.rollOutMarker(b,a)}).click(function(a){c.clickMarker(b,a)})},rollOverMarker:function(a,b){this.switchable&&this.dispatch("rollOverMarker",a,b);this.dispatch("rollOverItem",a,b)},rollOutMarker:function(a,b){this.switchable&&this.dispatch("rollOutMarker",a,b);this.dispatch("rollOutItem",a,b)},clickMarker:function(a,b){this.switchable&&(!0===a.hidden?this.dispatch("showItem",a,b):this.dispatch("hideItem",a,b));this.dispatch("clickMarker",
a,b)},rollOverLabel:function(a,b){a.hidden||(this.textClickEnabled&&a.legendLabel&&a.legendLabel.attr({fill:this.rollOverColor}),this.dispatch("rollOverItem",a,b))},rollOutLabel:function(a,b){if(!a.hidden){if(this.textClickEnabled&&a.legendLabel){var c=this.color;void 0!==this.selectedColor&&a.showBalloon&&(c=this.selectedColor);this.useMarkerColorForLabels&&(c=a.lineColor,void 0===c&&(c=a.color));a.legendLabel.attr({fill:c})}this.dispatch("rollOutItem",a,b)}},clickLabel:function(a,b){this.textClickEnabled?
a.hidden||this.dispatch("clickLabel",a,b):this.switchable&&(!0===a.hidden?this.dispatch("showItem",a,b):this.dispatch("hideItem",a,b))},dispatch:function(a,b,c){this.fire(a,{type:a,dataItem:b,target:this,event:c,chart:this.chart})},createValue:function(a){var b=this,c=b.fontSize;if(!1!==a.visibleInLegend){var e=b.maxLabelWidth;b.equalWidths||(b.valueAlign="left");"left"==b.valueAlign&&(e=a.legendEntry.getBBox().width);var f=e;if(b.valueText&&0<b.valueWidth){var g=b.color;b.useMarkerColorForValues&&
(g=a.color,a.legendKeyColor&&(g=a.legendKeyColor()));!0===a.hidden&&(g=b.markerDisabledColor);var h=b.valueText,e=e+b.lx+b.markerLabelGap+b.valueWidth,k="end";"left"==b.valueAlign&&(e-=b.valueWidth,k="start");g=d.text(b.container,h,g,b.chart.fontFamily,c,k);g.translate(e,b.ly);b.entries[b.index].push(g);f+=b.valueWidth+2*b.markerLabelGap;g.dItem=a;b.valueLabels.push(g)}b.index++;g=b.markerSize;g<c+7&&(g=c+7,d.VML&&(g+=3));c=b.container.rect(a.legendEntryWidth,0,f,g,0,0).attr({stroke:"none",fill:"#fff",
"fill-opacity":.005});c.dItem=a;b.entries[b.index-1].push(c);c.mouseover(function(c){b.rollOverLabel(a,c)}).mouseout(function(c){b.rollOutLabel(a,c)}).click(function(c){b.clickLabel(a,c)})}},createV:function(){var a=this.markerSize;return d.polygon(this.container,[a/5,a/2,a-a/5,a/2],[a/3,a-a/5,a/5,a/1.7],this.switchColor)},createX:function(){var a=(this.markerSize-4)/2,b={stroke:this.switchColor,"stroke-width":3},c=this.container,e=d.line(c,[-a,a],[-a,a]).attr(b),a=d.line(c,[-a,a],[a,-a]).attr(b);
return this.container.set([e,a])},createMarker:function(a,b,c,e,f,g,h,k){var l=this.markerSize,m=this.container;f||(f=this.markerBorderColor);f||(f=b);isNaN(e)&&(e=this.markerBorderThickness);isNaN(g)&&(g=this.markerBorderAlpha);return d.bullet(m,a,l,b,c,e,f,g,l,h,k)},validateNow:function(){this.invalidateSize()},updateValues:function(){var a=this.valueLabels,b=this.chart,c,e=this.data;for(c=0;c<a.length;c++){var f=a[c],d=f.dItem,h=" ";if(e)d.value?f.text(d.value):f.text("");else{if(void 0!==d.type){var k=
d.currentDataItem,l=this.periodValueText;d.legendPeriodValueText&&(l=d.legendPeriodValueText);k?(h=this.valueText,d.legendValueText&&(h=d.legendValueText),h=b.formatString(h,k)):l&&(h=b.formatPeriodString(l,d))}else h=b.formatString(this.valueText,d);if(l=this.valueFunction)k&&(d=k),h=l(d,h);f.text(h)}}},renderFix:function(){if(!d.VML){var a=this.container;a&&a.renderFix()}},destroy:function(){this.div.innerHTML="";d.remove(this.set)}});d.formatMilliseconds=function(a,b){if(-1!=a.indexOf("fff")){var c=
b.getMilliseconds(),e=String(c);10>c&&(e="00"+c);10<=c&&100>c&&(e="0"+c);a=a.replace(/fff/g,e)}return a};d.extractPeriod=function(a){var b=d.stripNumbers(a),c=1;b!=a&&(c=Number(a.slice(0,a.indexOf(b))));return{period:b,count:c}};d.newDate=function(a,b){return date="fff"==b?d.useUTC?new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()):new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),
a.getMilliseconds()):new Date(a)};d.resetDateToMin=function(a,b,c,e){void 0===e&&(e=1);var f,g,h,k,l,m,n;d.useUTC?(f=a.getUTCFullYear(),g=a.getUTCMonth(),h=a.getUTCDate(),k=a.getUTCHours(),l=a.getUTCMinutes(),m=a.getUTCSeconds(),n=a.getUTCMilliseconds(),a=a.getUTCDay()):(f=a.getFullYear(),g=a.getMonth(),h=a.getDate(),k=a.getHours(),l=a.getMinutes(),m=a.getSeconds(),n=a.getMilliseconds(),a=a.getDay());switch(b){case "YYYY":f=Math.floor(f/c)*c;g=0;h=1;n=m=l=k=0;break;case "MM":g=Math.floor(g/c)*c;h=
1;n=m=l=k=0;break;case "WW":0===a&&0<e&&(a=7);h=h-a+e;n=m=l=k=0;break;case "DD":n=m=l=k=0;break;case "hh":k=Math.floor(k/c)*c;n=m=l=0;break;case "mm":l=Math.floor(l/c)*c;n=m=0;break;case "ss":m=Math.floor(m/c)*c;n=0;break;case "fff":n=Math.floor(n/c)*c}d.useUTC?(a=new Date,a.setUTCFullYear(f,g,h),a.setUTCHours(k,l,m,n)):a=new Date(f,g,h,k,l,m,n);return a};d.getPeriodDuration=function(a,b){void 0===b&&(b=1);var c;switch(a){case "YYYY":c=316224E5;break;case "MM":c=26784E5;break;case "WW":c=6048E5;break;
case "DD":c=864E5;break;case "hh":c=36E5;break;case "mm":c=6E4;break;case "ss":c=1E3;break;case "fff":c=1}return c*b};d.intervals={s:{nextInterval:"ss",contains:1E3},ss:{nextInterval:"mm",contains:60,count:0},mm:{nextInterval:"hh",contains:60,count:1},hh:{nextInterval:"DD",contains:24,count:2},DD:{nextInterval:"",contains:Infinity,count:3}};d.getMaxInterval=function(a,b){var c=d.intervals;return a>=c[b].contains?(a=Math.round(a/c[b].contains),b=c[b].nextInterval,d.getMaxInterval(a,b)):"ss"==b?c[b].nextInterval:
b};d.dayNames="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ");d.shortDayNames="Sun Mon Tue Wed Thu Fri Sat".split(" ");d.monthNames="January February March April May June July August September October November December".split(" ");d.shortMonthNames="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");d.getWeekNumber=function(a){a=new Date(a);a.setHours(0,0,0);a.setDate(a.getDate()+4-(a.getDay()||7));var b=new Date(a.getFullYear(),0,1);return Math.ceil(((a-b)/864E5+1)/
7)};d.stringToDate=function(a,b){var c={},e=[{pattern:"YYYY",period:"year"},{pattern:"YY",period:"year"},{pattern:"MM",period:"month"},{pattern:"M",period:"month"},{pattern:"DD",period:"date"},{pattern:"D",period:"date"},{pattern:"JJ",period:"hours"},{pattern:"J",period:"hours"},{pattern:"HH",period:"hours"},{pattern:"H",period:"hours"},{pattern:"KK",period:"hours"},{pattern:"K",period:"hours"},{pattern:"LL",period:"hours"},{pattern:"L",period:"hours"},{pattern:"NN",period:"minutes"},{pattern:"N",
period:"minutes"},{pattern:"SS",period:"seconds"},{pattern:"S",period:"seconds"},{pattern:"QQQ",period:"milliseconds"},{pattern:"QQ",period:"milliseconds"},{pattern:"Q",period:"milliseconds"}],f=!0,g=b.indexOf("AA");-1!=g&&(a.substr(g,2),"pm"==a.toLowerCase&&(f=!1));var g=b,h,k,l;for(l=0;l<e.length;l++)k=e[l].period,c[k]=0,"date"==k&&(c[k]=1);for(l=0;l<e.length;l++)if(h=e[l].pattern,k=e[l].period,-1!=b.indexOf(h)){var m=d.getFromDateString(h,a,g);b=b.replace(h,"");if("KK"==h||"K"==h||"LL"==h||"L"==
h)f||(m+=12);c[k]=m}d.useUTC?(e=new Date,e.setUTCFullYear(c.year,c.month,c.date),e.setUTCHours(c.hours,c.minutes,c.seconds,c.milliseconds)):e=new Date(c.year,c.month,c.date,c.hours,c.minutes,c.seconds,c.milliseconds);return e};d.getFromDateString=function(a,b,c){if(void 0!==b)return c=c.indexOf(a),b=b.substr(c,a.length),"0"==b.charAt(0)&&(b=b.substr(1,b.length-1)),b=Number(b),isNaN(b)&&(b=0),-1!=a.indexOf("M")&&b--,b};d.formatDate=function(a,b,c){c||(c=d);var e,f,g,h,k,l,m,n=d.getWeekNumber(a);d.useUTC?
(e=a.getUTCFullYear(),f=a.getUTCMonth(),g=a.getUTCDate(),h=a.getUTCDay(),k=a.getUTCHours(),l=a.getUTCMinutes(),m=a.getUTCSeconds(),a=a.getUTCMilliseconds()):(e=a.getFullYear(),f=a.getMonth(),g=a.getDate(),h=a.getDay(),k=a.getHours(),l=a.getMinutes(),m=a.getSeconds(),a=a.getMilliseconds());var p=String(e).substr(2,2),q=f+1;9>f&&(q="0"+q);var r="0"+h;b=b.replace(/W/g,n);n=k;24==n&&(n=0);var t=n;10>t&&(t="0"+t);b=b.replace(/JJ/g,t);b=b.replace(/J/g,n);t=k;0===t&&(t=24,-1!=b.indexOf("H")&&g--);n=g;10>
g&&(n="0"+g);var u=t;10>u&&(u="0"+u);b=b.replace(/HH/g,u);b=b.replace(/H/g,t);t=k;11<t&&(t-=12);u=t;10>u&&(u="0"+u);b=b.replace(/KK/g,u);b=b.replace(/K/g,t);t=k;0===t&&(t=12);12<t&&(t-=12);u=t;10>u&&(u="0"+u);b=b.replace(/LL/g,u);b=b.replace(/L/g,t);t=l;10>t&&(t="0"+t);b=b.replace(/NN/g,t);b=b.replace(/N/g,l);l=m;10>l&&(l="0"+l);b=b.replace(/SS/g,l);b=b.replace(/S/g,m);m=a;10>m&&(m="00"+m);100>m&&(m="0"+m);l=a;10>l&&(l="00"+l);b=b.replace(/QQQ/g,m);b=b.replace(/QQ/g,l);b=b.replace(/Q/g,a);b=12>k?
b.replace(/A/g,"am"):b.replace(/A/g,"pm");b=b.replace(/YYYY/g,"@IIII@");b=b.replace(/YY/g,"@II@");b=b.replace(/MMMM/g,"@XXXX@");b=b.replace(/MMM/g,"@XXX@");b=b.replace(/MM/g,"@XX@");b=b.replace(/M/g,"@X@");b=b.replace(/DD/g,"@RR@");b=b.replace(/D/g,"@R@");b=b.replace(/EEEE/g,"@PPPP@");b=b.replace(/EEE/g,"@PPP@");b=b.replace(/EE/g,"@PP@");b=b.replace(/E/g,"@P@");b=b.replace(/@IIII@/g,e);b=b.replace(/@II@/g,p);b=b.replace(/@XXXX@/g,c.monthNames[f]);b=b.replace(/@XXX@/g,c.shortMonthNames[f]);b=b.replace(/@XX@/g,
q);b=b.replace(/@X@/g,f+1);b=b.replace(/@RR@/g,n);b=b.replace(/@R@/g,g);b=b.replace(/@PPPP@/g,c.dayNames[h]);b=b.replace(/@PPP@/g,c.shortDayNames[h]);b=b.replace(/@PP@/g,r);return b.replace(/@P@/g,h)};d.changeDate=function(a,b,c,e,f){if(d.useUTC)return d.changeUTCDate(a,b,c,e,f);var g=-1;void 0===e&&(e=!0);void 0===f&&(f=!1);!0===e&&(g=1);switch(b){case "YYYY":a.setFullYear(a.getFullYear()+c*g);e||f||a.setDate(a.getDate()+1);break;case "MM":b=a.getMonth();a.setMonth(a.getMonth()+c*g);a.getMonth()>
b+c*g&&a.setDate(a.getDate()-1);e||f||a.setDate(a.getDate()+1);break;case "DD":a.setDate(a.getDate()+c*g);break;case "WW":a.setDate(a.getDate()+c*g*7);break;case "hh":a.setHours(a.getHours()+c*g);break;case "mm":a.setMinutes(a.getMinutes()+c*g);break;case "ss":a.setSeconds(a.getSeconds()+c*g);break;case "fff":a.setMilliseconds(a.getMilliseconds()+c*g)}return a};d.changeUTCDate=function(a,b,c,e,f){var d=-1;void 0===e&&(e=!0);void 0===f&&(f=!1);!0===e&&(d=1);switch(b){case "YYYY":a.setUTCFullYear(a.getUTCFullYear()+
c*d);e||f||a.setUTCDate(a.getUTCDate()+1);break;case "MM":b=a.getUTCMonth();a.setUTCMonth(a.getUTCMonth()+c*d);a.getUTCMonth()>b+c*d&&a.setUTCDate(a.getUTCDate()-1);e||f||a.setUTCDate(a.getUTCDate()+1);break;case "DD":a.setUTCDate(a.getUTCDate()+c*d);break;case "WW":a.setUTCDate(a.getUTCDate()+c*d*7);break;case "hh":a.setUTCHours(a.getUTCHours()+c*d);break;case "mm":a.setUTCMinutes(a.getUTCMinutes()+c*d);break;case "ss":a.setUTCSeconds(a.getUTCSeconds()+c*d);break;case "fff":a.setUTCMilliseconds(a.getUTCMilliseconds()+
c*d)}return a};d.AmSerialChart=d.Class({inherits:d.AmRectangularChart,construct:function(a){this.type="serial";d.AmSerialChart.base.construct.call(this,a);this.cname="AmSerialChart";this.theme=a;this.createEvents("changed");this.columnSpacing=5;this.columnSpacing3D=0;this.columnWidth=.8;this.updateScrollbar=!0;var b=new d.CategoryAxis(a);b.chart=this;this.categoryAxis=b;this.zoomOutOnDataUpdate=!0;this.mouseWheelZoomEnabled=this.mouseWheelScrollEnabled=this.rotate=this.skipZoom=!1;this.minSelectedTime=
0;d.applyTheme(this,a,this.cname)},initChart:function(){d.AmSerialChart.base.initChart.call(this);this.updateCategoryAxis(this.categoryAxis,this.rotate,"categoryAxis");this.dataChanged&&(this.updateData(),this.dataChanged=!1,this.dispatchDataUpdated=!0);var a=this.chartCursor;a&&(a.updateData(),a.fullWidth&&(a.fullRectSet=this.cursorLineSet));var a=this.countColumns(),b=this.graphs,c;for(c=0;c<b.length;c++)b[c].columnCount=a;this.updateScrollbar=!0;this.drawChart();this.autoMargins&&!this.marginsUpdated&&
(this.marginsUpdated=!0,this.measureMargins())},handleWheelReal:function(a,b){if(!this.wheelBusy){var c=this.categoryAxis,e=c.parseDates,f=c.minDuration(),d=c=1;this.mouseWheelZoomEnabled?b||(c=-1):b&&(c=-1);var h=this.chartData.length,k=this.lastTime,l=this.firstTime;0>a?e?(h=this.endTime-this.startTime,e=this.startTime+c*f,f=this.endTime+d*f,0<d&&0<c&&f>=k&&(f=k,e=k-h),this.zoomToDates(new Date(e),new Date(f))):(0<d&&0<c&&this.end>=h-1&&(c=d=0),e=this.start+c,f=this.end+d,this.zoomToIndexes(e,f)):
e?(h=this.endTime-this.startTime,e=this.startTime-c*f,f=this.endTime-d*f,0<d&&0<c&&e<=l&&(e=l,f=l+h),this.zoomToDates(new Date(e),new Date(f))):(0<d&&0<c&&1>this.start&&(c=d=0),e=this.start-c,f=this.end-d,this.zoomToIndexes(e,f))}},validateData:function(a){this.marginsUpdated=!1;this.zoomOutOnDataUpdate&&!a&&(this.endTime=this.end=this.startTime=this.start=NaN);d.AmSerialChart.base.validateData.call(this)},drawChart:function(){d.AmSerialChart.base.drawChart.call(this);var a=this.chartData;if(d.ifArray(a)){var b=
this.chartScrollbar;b&&b.draw();if(0<this.realWidth&&0<this.realHeight){var a=a.length-1,c,b=this.categoryAxis;if(b.parseDates&&!b.equalSpacing){if(b=this.startTime,c=this.endTime,isNaN(b)||isNaN(c))b=this.firstTime,c=this.lastTime}else if(b=this.start,c=this.end,isNaN(b)||isNaN(c))b=0,c=a;this.endTime=this.startTime=this.end=this.start=void 0;this.zoom(b,c)}}else this.cleanChart();this.dispDUpd();this.chartCreated=!0},cleanChart:function(){d.callMethod("destroy",[this.valueAxes,this.graphs,this.categoryAxis,
this.chartScrollbar,this.chartCursor])},updateCategoryAxis:function(a,b,c){a.chart=this;a.id=c;a.rotate=b;a.axisRenderer=d.RecAxis;a.guideFillRenderer=d.RecFill;a.axisItemRenderer=d.RecItem;a.setOrientation(!this.rotate);a.x=this.marginLeftReal;a.y=this.marginTopReal;a.dx=this.dx;a.dy=this.dy;a.width=this.plotAreaWidth-1;a.height=this.plotAreaHeight-1;a.viW=this.plotAreaWidth-1;a.viH=this.plotAreaHeight-1;a.viX=this.marginLeftReal;a.viY=this.marginTopReal;a.marginsChanged=!0},updateValueAxes:function(){d.AmSerialChart.base.updateValueAxes.call(this);
var a=this.valueAxes,b;for(b=0;b<a.length;b++){var c=a[b],e=this.rotate;c.rotate=e;c.setOrientation(e);e=this.categoryAxis;if(!e.startOnAxis||e.parseDates)c.expandMinMax=!0}},updateData:function(){this.parseData();var a=this.graphs,b,c=this.chartData;for(b=0;b<a.length;b++)a[b].data=c;0<c.length&&(this.firstTime=this.getStartTime(c[0].time),this.lastTime=this.getEndTime(c[c.length-1].time))},getStartTime:function(a){var b=this.categoryAxis;return d.resetDateToMin(new Date(a),b.minPeriod,1,b.firstDayOfWeek).getTime()},
getEndTime:function(a){var b=d.extractPeriod(this.categoryAxis.minPeriod);return d.changeDate(new Date(a),b.period,b.count,!0).getTime()-1},updateMargins:function(){d.AmSerialChart.base.updateMargins.call(this);var a=this.chartScrollbar;a&&(this.getScrollbarPosition(a,this.rotate,this.categoryAxis.position),this.adjustMargins(a,this.rotate))},updateScrollbars:function(){d.AmSerialChart.base.updateScrollbars.call(this);this.updateChartScrollbar(this.chartScrollbar,this.rotate)},zoom:function(a,b){var c=
this.categoryAxis;c.parseDates&&!c.equalSpacing?this.timeZoom(a,b):this.indexZoom(a,b);this.updateLegendValues()},timeZoom:function(a,b){var c=this.maxSelectedTime;isNaN(c)||(b!=this.endTime&&b-a>c&&(a=b-c,this.updateScrollbar=!0),a!=this.startTime&&b-a>c&&(b=a+c,this.updateScrollbar=!0));var e=this.minSelectedTime;if(0<e&&b-a<e){var f=Math.round(a+(b-a)/2),e=Math.round(e/2);a=f-e;b=f+e}var g=this.chartData,f=this.categoryAxis;if(d.ifArray(g)&&(a!=this.startTime||b!=this.endTime)){var h=f.minDuration(),
e=this.firstTime,k=this.lastTime;a||(a=e,isNaN(c)||(a=k-c));b||(b=k);a>k&&(a=k);b<e&&(b=e);a<e&&(a=e);b>k&&(b=k);b<a&&(b=a+h);b-a<h/5&&(b<k?b=a+h/5:a=b-h/5);this.startTime=a;this.endTime=b;c=g.length-1;h=this.getClosestIndex(g,"time",a,!0,0,c);g=this.getClosestIndex(g,"time",b,!1,h,c);f.timeZoom(a,b);f.zoom(h,g);this.start=d.fitToBounds(h,0,c);this.end=d.fitToBounds(g,0,c);this.zoomAxesAndGraphs();this.zoomScrollbar();a!=e||b!=k?this.showZB(!0):this.showZB(!1);this.updateColumnsDepth();this.dispatchTimeZoomEvent()}},
indexZoom:function(a,b){var c=this.maxSelectedSeries;isNaN(c)||(b!=this.end&&b-a>c&&(a=b-c,this.updateScrollbar=!0),a!=this.start&&b-a>c&&(b=a+c,this.updateScrollbar=!0));if(a!=this.start||b!=this.end){var e=this.chartData.length-1;isNaN(a)&&(a=0,isNaN(c)||(a=e-c));isNaN(b)&&(b=e);b<a&&(b=a);b>e&&(b=e);a>e&&(a=e-1);0>a&&(a=0);this.start=a;this.end=b;this.categoryAxis.zoom(a,b);this.zoomAxesAndGraphs();this.zoomScrollbar();0!==a||b!=this.chartData.length-1?this.showZB(!0):this.showZB(!1);this.updateColumnsDepth();
this.dispatchIndexZoomEvent()}},updateGraphs:function(){d.AmSerialChart.base.updateGraphs.call(this);var a=this.graphs,b;for(b=0;b<a.length;b++){var c=a[b];c.columnWidthReal=this.columnWidth;c.categoryAxis=this.categoryAxis;d.isString(c.fillToGraph)&&(c.fillToGraph=this.getGraphById(c.fillToGraph))}},updateColumnsDepth:function(){var a,b=this.graphs,c;d.remove(this.columnsSet);this.columnsArray=[];for(a=0;a<b.length;a++){c=b[a];var e=c.columnsArray;if(e){var f;for(f=0;f<e.length;f++)this.columnsArray.push(e[f])}}this.columnsArray.sort(this.compareDepth);
if(0<this.columnsArray.length){b=this.container.set();this.columnSet.push(b);for(a=0;a<this.columnsArray.length;a++)b.push(this.columnsArray[a].column.set);c&&b.translate(c.x,c.y);this.columnsSet=b}},compareDepth:function(a,b){return a.depth>b.depth?1:-1},zoomScrollbar:function(){var a=this.chartScrollbar,b=this.categoryAxis;a&&this.updateScrollbar&&(a.dragger.stop(),b.parseDates&&!b.equalSpacing?a.timeZoom(this.startTime,this.endTime):a.zoom(this.start,this.end),this.updateScrollbar=!0)},updateTrendLines:function(){var a=
this.trendLines,b;for(b=0;b<a.length;b++){var c=a[b],c=d.processObject(c,d.TrendLine,this.theme);a[b]=c;c.chart=this;d.isString(c.valueAxis)&&(c.valueAxis=this.getValueAxisById(c.valueAxis));c.valueAxis||(c.valueAxis=this.valueAxes[0]);c.categoryAxis=this.categoryAxis}},zoomAxesAndGraphs:function(){if(!this.scrollbarOnly){var a=this.valueAxes,b;for(b=0;b<a.length;b++)a[b].zoom(this.start,this.end);a=this.graphs;for(b=0;b<a.length;b++)a[b].zoom(this.start,this.end);this.zoomTrendLines();(b=this.chartCursor)&&
b.zoom(this.start,this.end,this.startTime,this.endTime)}},countColumns:function(){var a=0,b=this.valueAxes.length,c=this.graphs.length,e,f,d=!1,h,k;for(k=0;k<b;k++){f=this.valueAxes[k];var l=f.stackType;if("100%"==l||"regular"==l)for(d=!1,h=0;h<c;h++)e=this.graphs[h],e.tcc=1,e.valueAxis==f&&"column"==e.type&&(!d&&e.stackable&&(a++,d=!0),(!e.stackable&&e.clustered||e.newStack)&&a++,e.columnIndex=a-1,e.clustered||(e.columnIndex=0));if("none"==l||"3d"==l){d=!1;for(h=0;h<c;h++)e=this.graphs[h],e.valueAxis==
f&&"column"==e.type&&(e.clustered?(e.tcc=1,e.newStack&&(a=0),e.hidden||(e.columnIndex=a,a++)):e.hidden||(d=!0,e.tcc=1,e.columnIndex=0));d&&0==a&&(a=1)}if("3d"==l){f=1;for(k=0;k<c;k++)e=this.graphs[k],e.newStack&&f++,e.depthCount=f,e.tcc=a;a=f}}return a},parseData:function(){d.AmSerialChart.base.parseData.call(this);this.parseSerialData()},getCategoryIndexByValue:function(a){var b=this.chartData,c,e;for(e=0;e<b.length;e++)b[e].category==a&&(c=e);return c},handleCursorChange:function(a){this.updateLegendValues(a.index)},
handleCursorZoom:function(a){this.updateScrollbar=!0;this.zoom(a.start,a.end)},handleScrollbarZoom:function(a){this.updateScrollbar=!1;this.zoom(a.start,a.end)},dispatchTimeZoomEvent:function(){if(this.prevStartTime!=this.startTime||this.prevEndTime!=this.endTime){var a={type:"zoomed"};a.startDate=new Date(this.startTime);a.endDate=new Date(this.endTime);a.startIndex=this.start;a.endIndex=this.end;this.startIndex=this.start;this.endIndex=this.end;this.startDate=a.startDate;this.endDate=a.endDate;
this.prevStartTime=this.startTime;this.prevEndTime=this.endTime;var b=this.categoryAxis,c=d.extractPeriod(b.minPeriod).period,b=b.dateFormatsObject[c];a.startValue=d.formatDate(a.startDate,b,this);a.endValue=d.formatDate(a.endDate,b,this);a.chart=this;a.target=this;this.fire(a.type,a)}},dispatchIndexZoomEvent:function(){if(this.prevStartIndex!=this.start||this.prevEndIndex!=this.end){this.startIndex=this.start;this.endIndex=this.end;var a=this.chartData;if(d.ifArray(a)&&!isNaN(this.start)&&!isNaN(this.end)){var b=
{chart:this,target:this,type:"zoomed"};b.startIndex=this.start;b.endIndex=this.end;b.startValue=a[this.start].category;b.endValue=a[this.end].category;this.categoryAxis.parseDates&&(this.startTime=a[this.start].time,this.endTime=a[this.end].time,b.startDate=new Date(this.startTime),b.endDate=new Date(this.endTime));this.prevStartIndex=this.start;this.prevEndIndex=this.end;this.fire(b.type,b)}}},updateLegendValues:function(a){var b=this.graphs,c;for(c=0;c<b.length;c++){var e=b[c];isNaN(a)?e.currentDataItem=
void 0:e.currentDataItem=this.chartData[a].axes[e.valueAxis.id].graphs[e.id]}this.legend&&this.legend.updateValues()},getClosestIndex:function(a,b,c,e,f,d){0>f&&(f=0);d>a.length-1&&(d=a.length-1);var h=f+Math.round((d-f)/2),k=a[h][b];if(1>=d-f){if(e)return f;e=a[d][b];return Math.abs(a[f][b]-c)<Math.abs(e-c)?f:d}return c==k?h:c<k?this.getClosestIndex(a,b,c,e,f,h):this.getClosestIndex(a,b,c,e,h,d)},zoomToIndexes:function(a,b){this.updateScrollbar=!0;var c=this.chartData;if(c){var e=c.length;0<e&&(0>
a&&(a=0),b>e-1&&(b=e-1),e=this.categoryAxis,e.parseDates&&!e.equalSpacing?this.zoom(c[a].time,this.getEndTime(c[b].time)):this.zoom(a,b))}},zoomToDates:function(a,b){this.updateScrollbar=!0;var c=this.chartData;if(this.categoryAxis.equalSpacing){var e=this.getClosestIndex(c,"time",a.getTime(),!0,0,c.length);b=d.resetDateToMin(b,this.categoryAxis.minPeriod,1);c=this.getClosestIndex(c,"time",b.getTime(),!1,0,c.length);this.zoom(e,c)}else this.zoom(a.getTime(),b.getTime())},zoomToCategoryValues:function(a,
b){this.updateScrollbar=!0;this.zoom(this.getCategoryIndexByValue(a),this.getCategoryIndexByValue(b))},formatPeriodString:function(a,b){if(b){var c=["value","open","low","high","close"],e="value open low high close average sum count".split(" "),f=b.valueAxis,g=this.chartData,h=b.numberFormatter;h||(h=this.nf);for(var k=0;k<c.length;k++){for(var l=c[k],m=0,n=0,p,q,r,t,u,A=0,y=0,x,w,v,z,B,E=this.start;E<=this.end;E++){var D=g[E];if(D&&(D=D.axes[f.id].graphs[b.id])){if(D.values){var F=D.values[l];if(this.rotate){if(0>
D.x||D.x>D.graph.height)F=NaN}else if(0>D.x||D.x>D.graph.width)F=NaN;if(!isNaN(F)){isNaN(p)&&(p=F);q=F;if(isNaN(r)||r>F)r=F;if(isNaN(t)||t<F)t=F;u=d.getDecimals(m);var ea=d.getDecimals(F),m=m+F,m=d.roundTo(m,Math.max(u,ea));n++;u=m/n}}if(D.percents&&(D=D.percents[l],!isNaN(D))){isNaN(x)&&(x=D);w=D;if(isNaN(v)||v>D)v=D;if(isNaN(z)||z<D)z=D;B=d.getDecimals(A);F=d.getDecimals(D);A+=D;A=d.roundTo(A,Math.max(B,F));y++;B=A/y}}}A={open:x,close:w,high:z,low:v,average:B,sum:A,count:y};a=d.formatValue(a,{open:p,
close:q,high:t,low:r,average:u,sum:m,count:n},e,h,l+"\\.",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers);a=d.formatValue(a,A,e,this.pf,"percents\\."+l+"\\.")}}return d.cleanFromEmpty(a)},formatString:function(a,b,c){var e=b.graph;if(-1!=a.indexOf("[[category]]")){var f=b.serialDataItem.category;if(this.categoryAxis.parseDates){var g=this.balloonDateFormat,h=this.chartCursor;h&&(g=h.categoryBalloonDateFormat);-1!=a.indexOf("[[category]]")&&(g=d.formatDate(f,g,this),-1!=g.indexOf("fff")&&
(g=d.formatMilliseconds(g,f)),f=g)}a=a.replace(/\[\[category\]\]/g,String(f))}(e=e.numberFormatter)||(e=this.nf);f=b.graph.valueAxis;(g=f.duration)&&!isNaN(b.values.value)&&(f=d.formatDuration(b.values.value,g,"",f.durationUnits,f.maxInterval,e),a=a.replace(/\[\[value\]\]/g,f));f="value open low high close total".split(" ");g=this.pf;a=d.formatValue(a,b.percents,f,g,"percents\\.");a=d.formatValue(a,b.values,f,e,"",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers);a=d.formatValue(a,
b.values,["percents"],g);-1!=a.indexOf("[[")&&(a=d.formatDataContextValue(a,b.dataContext));return d.AmSerialChart.base.formatString.call(this,a,b,c)},addChartScrollbar:function(a){d.callMethod("destroy",[this.chartScrollbar]);a&&(a.chart=this,this.listenTo(a,"zoomed",this.handleScrollbarZoom));this.rotate?void 0===a.width&&(a.width=a.scrollbarHeight):void 0===a.height&&(a.height=a.scrollbarHeight);this.chartScrollbar=a},removeChartScrollbar:function(){d.callMethod("destroy",[this.chartScrollbar]);
this.chartScrollbar=null},handleReleaseOutside:function(a){d.AmSerialChart.base.handleReleaseOutside.call(this,a);d.callMethod("handleReleaseOutside",[this.chartScrollbar])}});d.Cuboid=d.Class({construct:function(a,b,c,e,f,d,h,k,l,m,n,p,q,r,t,u){this.set=a.set();this.container=a;this.h=Math.round(c);this.w=Math.round(b);this.dx=e;this.dy=f;this.colors=d;this.alpha=h;this.bwidth=k;this.bcolor=l;this.balpha=m;this.dashLength=r;this.topRadius=u;this.pattern=t;(this.rotate=q)?0>b&&0===n&&(n=180):0>c&&
270==n&&(n=90);this.gradientRotation=n;0===e&&0===f&&(this.cornerRadius=p);this.draw()},draw:function(){var a=this.set;a.clear();var b=this.container,c=this.w,e=this.h,f=this.dx,g=this.dy,h=this.colors,k=this.alpha,l=this.bwidth,m=this.bcolor,n=this.balpha,p=this.gradientRotation,q=this.cornerRadius,r=this.dashLength,t=this.pattern,u=this.topRadius,A=h,y=h;"object"==typeof h&&(A=h[0],y=h[h.length-1]);var x,w,v,z,B,E,D,F,ea,ya=k;t&&(k=0);var L,Y,T,aa,za=this.rotate;if(0<Math.abs(f)||0<Math.abs(g))if(isNaN(u))D=
y,d.adjustLuminosity(A,-.2),y=d.adjustLuminosity(A,-.2),x=d.polygon(b,[0,f,c+f,c,0],[0,g,g,0,0],y,k,1,m,0,p),0<n&&(ea=d.line(b,[0,f,c+f],[0,g,g],m,n,l,r)),w=d.polygon(b,[0,0,c,c,0],[0,e,e,0,0],y,k,1,m,0,p),w.translate(f,g),0<n&&(v=d.line(b,[f,f],[g,g+e],m,n,l,r)),z=d.polygon(b,[0,0,f,f,0],[0,e,e+g,g,0],y,k,1,m,0,p),B=d.polygon(b,[c,c,c+f,c+f,c],[0,e,e+g,g,0],y,k,1,m,0,p),0<n&&(E=d.line(b,[c,c+f,c+f,c],[0,g,e+g,e],m,n,l,r)),y=d.adjustLuminosity(D,.2),D=d.polygon(b,[0,f,c+f,c,0],[e,e+g,e+g,e,e],y,k,
1,m,0,p),0<n&&(F=d.line(b,[0,f,c+f],[e,e+g,e+g],m,n,l,r));else{var la,ca,P;za?(la=e/2,y=f/2,P=e/2,ca=c+f/2,Y=Math.abs(e/2),L=Math.abs(f/2)):(y=c/2,la=g/2,ca=c/2,P=e+g/2+1,L=Math.abs(c/2),Y=Math.abs(g/2));T=L*u;aa=Y*u;.1<L&&.1<L&&(x=d.circle(b,L,A,k,l,m,n,!1,Y),x.translate(y,la));.1<T&&.1<T&&(D=d.circle(b,T,d.adjustLuminosity(A,.5),k,l,m,n,!1,aa),D.translate(ca,P))}k=ya;1>Math.abs(e)&&(e=0);1>Math.abs(c)&&(c=0);!isNaN(u)&&(0<Math.abs(f)||0<Math.abs(g))?(h=[A],h={fill:h,stroke:m,"stroke-width":l,"stroke-opacity":n,
"fill-opacity":k},za?(k="M0,0 L"+c+","+(e/2-e/2*u),l=" B",0<c&&(l=" A"),d.VML?(k+=l+Math.round(c-T)+","+Math.round(e/2-aa)+","+Math.round(c+T)+","+Math.round(e/2+aa)+","+c+",0,"+c+","+e,k=k+(" L0,"+e)+(l+Math.round(-L)+","+Math.round(e/2-Y)+","+Math.round(L)+","+Math.round(e/2+Y)+",0,"+e+",0,0")):(k+="A"+T+","+aa+",0,0,0,"+c+","+(e-e/2*(1-u))+"L0,"+e,k+="A"+L+","+Y+",0,0,1,0,0"),L=90):(l=c/2-c/2*u,k="M0,0 L"+l+","+e,d.VML?(k="M0,0 L"+l+","+e,l=" B",0>e&&(l=" A"),k+=l+Math.round(c/2-T)+","+Math.round(e-
aa)+","+Math.round(c/2+T)+","+Math.round(e+aa)+",0,"+e+","+c+","+e,k+=" L"+c+",0",k+=l+Math.round(c/2+L)+","+Math.round(Y)+","+Math.round(c/2-L)+","+Math.round(-Y)+","+c+",0,0,0"):(k+="A"+T+","+aa+",0,0,0,"+(c-c/2*(1-u))+","+e+"L"+c+",0",k+="A"+L+","+Y+",0,0,1,0,0"),L=180),b=b.path(k).attr(h),b.gradient("linearGradient",[A,d.adjustLuminosity(A,-.3),d.adjustLuminosity(A,-.3),A],L),za?b.translate(f/2,0):b.translate(0,g/2)):b=0===e?d.line(b,[0,c],[0,0],m,n,l,r):0===c?d.line(b,[0,0],[0,e],m,n,l,r):0<
q?d.rect(b,c,e,h,k,l,m,n,q,p,r):d.polygon(b,[0,0,c,c,0],[0,e,e,0,0],h,k,l,m,n,p,!1,r);c=isNaN(u)?0>e?[x,ea,w,v,z,B,E,D,F,b]:[D,F,w,v,z,B,x,ea,E,b]:za?0<c?[x,b,D]:[D,b,x]:0>e?[x,b,D]:[D,b,x];for(e=0;e<c.length;e++)(f=c[e])&&a.push(f);t&&b.pattern(t)},width:function(a){this.w=Math.round(a);this.draw()},height:function(a){this.h=Math.round(a);this.draw()},animateHeight:function(a,b){var c=this;c.easing=b;c.totalFrames=Math.round(1E3*a/d.updateRate);c.rh=c.h;c.frame=0;c.height(1);setTimeout(function(){c.updateHeight.call(c)},
d.updateRate)},updateHeight:function(){var a=this;a.frame++;var b=a.totalFrames;a.frame<=b&&(b=a.easing(0,a.frame,1,a.rh-1,b),a.height(b),setTimeout(function(){a.updateHeight.call(a)},d.updateRate))},animateWidth:function(a,b){var c=this;c.easing=b;c.totalFrames=Math.round(1E3*a/d.updateRate);c.rw=c.w;c.frame=0;c.width(1);setTimeout(function(){c.updateWidth.call(c)},d.updateRate)},updateWidth:function(){var a=this;a.frame++;var b=a.totalFrames;a.frame<=b&&(b=a.easing(0,a.frame,1,a.rw-1,b),a.width(b),
setTimeout(function(){a.updateWidth.call(a)},d.updateRate))}});d.CategoryAxis=d.Class({inherits:d.AxisBase,construct:function(a){this.cname="CategoryAxis";d.CategoryAxis.base.construct.call(this,a);this.minPeriod="DD";this.equalSpacing=this.parseDates=!1;this.position="bottom";this.startOnAxis=!1;this.firstDayOfWeek=1;this.gridPosition="middle";this.markPeriodChange=this.boldPeriodBeginning=!0;this.safeDistance=30;this.centerLabelOnFullPeriod=!0;this.periods=[{period:"ss",count:1},{period:"ss",count:5},
{period:"ss",count:10},{period:"ss",count:30},{period:"mm",count:1},{period:"mm",count:5},{period:"mm",count:10},{period:"mm",count:30},{period:"hh",count:1},{period:"hh",count:3},{period:"hh",count:6},{period:"hh",count:12},{period:"DD",count:1},{period:"DD",count:2},{period:"DD",count:3},{period:"DD",count:4},{period:"DD",count:5},{period:"WW",count:1},{period:"MM",count:1},{period:"MM",count:2},{period:"MM",count:3},{period:"MM",count:6},{period:"YYYY",count:1},{period:"YYYY",count:2},{period:"YYYY",
count:5},{period:"YYYY",count:10},{period:"YYYY",count:50},{period:"YYYY",count:100}];this.dateFormats=[{period:"fff",format:"JJ:NN:SS"},{period:"ss",format:"JJ:NN:SS"},{period:"mm",format:"JJ:NN"},{period:"hh",format:"JJ:NN"},{period:"DD",format:"MMM DD"},{period:"WW",format:"MMM DD"},{period:"MM",format:"MMM"},{period:"YYYY",format:"YYYY"}];this.nextPeriod={};this.nextPeriod.fff="ss";this.nextPeriod.ss="mm";this.nextPeriod.mm="hh";this.nextPeriod.hh="DD";this.nextPeriod.DD="MM";this.nextPeriod.MM=
"YYYY";d.applyTheme(this,a,this.cname)},draw:function(){d.CategoryAxis.base.draw.call(this);this.generateDFObject();var a=this.chart.chartData;this.data=a;if(d.ifArray(a)){var b,c=this.chart,e=this.start,f=this.labelFrequency,g=0;b=this.end-e+1;var h=this.gridCountR,k=this.showFirstLabel,l=this.showLastLabel,m,n="",p=d.extractPeriod(this.minPeriod);m=d.getPeriodDuration(p.period,p.count);var q,r,t,u,A,y;q=this.rotate;var x=this.firstDayOfWeek,w=this.boldPeriodBeginning,a=d.resetDateToMin(new Date(a[a.length-
1].time+1.05*m),this.minPeriod,1,x).getTime(),v;this.endTime>a&&(this.endTime=a);y=this.minorGridEnabled;var z,a=this.gridAlpha,B;if(this.parseDates&&!this.equalSpacing){this.timeDifference=this.endTime-this.startTime;e=this.choosePeriod(0);f=e.period;q=e.count;r=d.getPeriodDuration(f,q);r<m&&(f=p.period,q=p.count,r=m);t=f;"WW"==t&&(t="DD");this.stepWidth=this.getStepWidth(this.timeDifference);var h=Math.ceil(this.timeDifference/r)+5,E=n=d.resetDateToMin(new Date(this.startTime-r),f,q,x).getTime();
t==f&&1==q&&this.centerLabelOnFullPeriod&&(A=r*this.stepWidth);this.cellWidth=m*this.stepWidth;b=Math.round(n/r);e=-1;b/2==Math.round(b/2)&&(e=-2,n-=r);var D=c.firstTime,F=0;y&&1<q&&(z=this.chooseMinorFrequency(q),B=d.getPeriodDuration(f,z));if(0<this.gridCountR)for(b=e;b<=h;b++){p=D+r*(b+Math.floor((E-D)/r))-F;"DD"==f&&(p+=36E5);p=d.resetDateToMin(new Date(p),f,q,x).getTime();"MM"==f&&(y=(p-n)/r,1.5<=(p-n)/r&&(p=p-(y-1)*r+d.getPeriodDuration("DD",3),p=d.resetDateToMin(new Date(p),f,1).getTime(),
F+=r));m=(p-this.startTime)*this.stepWidth;y=!1;this.nextPeriod[t]&&(y=this.checkPeriodChange(this.nextPeriod[t],1,p,n,t));v=!1;y&&this.markPeriodChange?(y=this.dateFormatsObject[this.nextPeriod[t]],this.twoLineMode&&(y=this.dateFormatsObject[t]+"\n"+y,y=d.fixBrakes(y)),v=!0):y=this.dateFormatsObject[t];w||(v=!1);n=d.formatDate(new Date(p),y,c);if(b==e&&!k||b==h&&!l)n=" ";this.labelFunction&&(n=this.labelFunction(n,new Date(p),this,f,q,u).toString());this.boldLabels&&(v=!0);u=new this.axisItemRenderer(this,
m,n,!1,A,0,!1,v);this.pushAxisItem(u);u=n=p;if(!isNaN(z))for(m=1;m<q;m+=z)this.gridAlpha=this.minorGridAlpha,y=p+B*m,y=d.resetDateToMin(new Date(y),f,z,x).getTime(),y=new this.axisItemRenderer(this,(y-this.startTime)*this.stepWidth),this.pushAxisItem(y);this.gridAlpha=a}}else if(!this.parseDates){if(this.cellWidth=this.getStepWidth(b),b<h&&(h=b),g+=this.start,this.stepWidth=this.getStepWidth(b),0<h)for(w=Math.floor(b/h),z=this.chooseMinorFrequency(w),m=g,m/2==Math.round(m/2)&&m--,0>m&&(m=0),h=0,this.end-
m+1>=this.autoRotateCount&&(this.labelRotation=this.autoRotateAngle),b=m;b<=this.end+2;b++){u=!1;0<=b&&b<this.data.length?(t=this.data[b],n=t.category,u=t.forceShow):n="";if(y&&!isNaN(z))if(b/z==Math.round(b/z)||u)b/w==Math.round(b/w)||u||(this.gridAlpha=this.minorGridAlpha,n=void 0);else continue;else if(b/w!=Math.round(b/w)&&!u)continue;m=this.getCoordinate(b-g);u=0;"start"==this.gridPosition&&(m-=this.cellWidth/2,u=this.cellWidth/2);x=!0;tickShift=u;"start"==this.tickPosition&&(tickShift=0,x=!1,
u=0);if(b==e&&!k||b==this.end&&!l)n=void 0;Math.round(h/f)!=h/f&&(n=void 0);h++;E=this.cellWidth;q&&(E=NaN);this.labelFunction&&t&&(n=this.labelFunction(n,t,this));n=d.fixBrakes(n);v=!1;this.boldLabels&&(v=!0);b>this.end&&"start"==this.tickPosition&&(n=" ");u=new this.axisItemRenderer(this,m,n,x,E,u,void 0,v,tickShift,!1,t.labelColor);u.serialDataItem=t;this.pushAxisItem(u);this.gridAlpha=a}}else if(this.parseDates&&this.equalSpacing){g=this.start;this.startTime=this.data[this.start].time;this.endTime=
this.data[this.end].time;this.timeDifference=this.endTime-this.startTime;e=this.choosePeriod(0);f=e.period;q=e.count;r=d.getPeriodDuration(f,q);r<m&&(f=p.period,q=p.count,r=m);t=f;"WW"==t&&(t="DD");this.stepWidth=this.getStepWidth(b);h=Math.ceil(this.timeDifference/r)+1;n=d.resetDateToMin(new Date(this.startTime-r),f,q,x).getTime();this.cellWidth=this.getStepWidth(b);b=Math.round(n/r);e=-1;b/2==Math.round(b/2)&&(e=-2,n-=r);m=this.start;m/2==Math.round(m/2)&&m--;0>m&&(m=0);A=this.end+2;A>=this.data.length&&
(A=this.data.length);B=!k;this.previousPos=-1E3;20<this.labelRotation&&(this.safeDistance=5);r=m;if(this.data[m].time!=d.resetDateToMin(new Date(this.data[m].time),f,q,x).getTime())for(x=0,v=n,b=m;b<A;b++)p=this.data[b].time,this.checkPeriodChange(f,q,p,v)&&(x++,2<=x&&(r=b,b=A),v=p);y&&1<q&&(z=this.chooseMinorFrequency(q),d.getPeriodDuration(f,z));if(0<this.gridCountR)for(b=m;b<A;b++)if(p=this.data[b].time,this.checkPeriodChange(f,q,p,n)&&b>=r){m=this.getCoordinate(b-this.start);y=!1;this.nextPeriod[t]&&
(y=this.checkPeriodChange(this.nextPeriod[t],1,p,n,t));v=!1;y&&this.markPeriodChange?(y=this.dateFormatsObject[this.nextPeriod[t]],v=!0):y=this.dateFormatsObject[t];n=d.formatDate(new Date(p),y,c);if(b==e&&!k||b==h&&!l)n=" ";B?B=!1:(w||(v=!1),m-this.previousPos>this.safeDistance*Math.cos(this.labelRotation*Math.PI/180)&&(this.labelFunction&&(n=this.labelFunction(n,new Date(p),this,f,q,u)),this.boldLabels&&(v=!0),u=new this.axisItemRenderer(this,m,n,void 0,void 0,void 0,void 0,v),x=u.graphics(),this.pushAxisItem(u),
u=x.getBBox().width,d.isModern||(u-=m),this.previousPos=m+u));u=n=p}else isNaN(z)||(this.checkPeriodChange(f,z,p,E)&&(this.gridAlpha=this.minorGridAlpha,m=this.getCoordinate(b-this.start),y=new this.axisItemRenderer(this,m),this.pushAxisItem(y),E=p),this.gridAlpha=a)}for(b=0;b<this.data.length;b++)if(k=this.data[b])l=this.parseDates&&!this.equalSpacing?Math.round((k.time-this.startTime)*this.stepWidth+this.cellWidth/2):this.getCoordinate(b-g),k.x[this.id]=l;k=this.guides.length;for(b=0;b<k;b++)l=
this.guides[b],w=w=w=a=e=NaN,z=l.above,l.toCategory&&(w=c.getCategoryIndexByValue(l.toCategory),isNaN(w)||(e=this.getCoordinate(w-g),l.expand&&(e+=this.cellWidth/2),u=new this.axisItemRenderer(this,e,"",!0,NaN,NaN,l),this.pushAxisItem(u,z))),l.category&&(w=c.getCategoryIndexByValue(l.category),isNaN(w)||(a=this.getCoordinate(w-g),l.expand&&(a-=this.cellWidth/2),w=(e-a)/2,u=new this.axisItemRenderer(this,a,l.label,!0,NaN,w,l),this.pushAxisItem(u,z))),l.toDate&&(l.toDate instanceof Date||(l.toDate=
d.stringToDate(l.toDate,c.dataDateFormat)),this.equalSpacing?(w=c.getClosestIndex(this.data,"time",l.toDate.getTime(),!1,0,this.data.length-1),isNaN(w)||(e=this.getCoordinate(w-g))):e=(l.toDate.getTime()-this.startTime)*this.stepWidth,u=new this.axisItemRenderer(this,e,"",!0,NaN,NaN,l),this.pushAxisItem(u,z)),l.date&&(l.date instanceof Date||(l.date=d.stringToDate(l.date,c.dataDateFormat)),this.equalSpacing?(w=c.getClosestIndex(this.data,"time",l.date.getTime(),!1,0,this.data.length-1),isNaN(w)||
(a=this.getCoordinate(w-g))):a=(l.date.getTime()-this.startTime)*this.stepWidth,w=(e-a)/2,u="H"==this.orientation?new this.axisItemRenderer(this,a,l.label,!1,2*w,NaN,l):new this.axisItemRenderer(this,a,l.label,!1,NaN,w,l),this.pushAxisItem(u,z)),(0<e||0<a)&&(e<this.width||a<this.width)&&(e=new this.guideFillRenderer(this,a,e,l),a=e.graphics(),this.pushAxisItem(e,z),l.graphics=a,a.index=b,l.balloonText&&this.addEventListeners(a,l))}this.axisCreated=!0;c=this.x;g=this.y;this.set.translate(c,g);this.labelsSet.translate(c,
g);this.positionTitle();(c=this.axisLine.set)&&c.toFront();c=this.getBBox().height;2<c-this.previousHeight&&this.autoWrap&&!this.parseDates&&(this.axisCreated=this.chart.marginsUpdated=!1);this.previousHeight=c},chooseMinorFrequency:function(a){for(var b=10;0<b;b--)if(a/b==Math.round(a/b))return a/b},choosePeriod:function(a){var b=d.getPeriodDuration(this.periods[a].period,this.periods[a].count),c=Math.ceil(this.timeDifference/b),e=this.periods;return this.timeDifference<b&&0<a?e[a-1]:c<=this.gridCountR?
e[a]:a+1<e.length?this.choosePeriod(a+1):e[a]},getStepWidth:function(a){var b;this.startOnAxis?(b=this.axisWidth/(a-1),1==a&&(b=this.axisWidth)):b=this.axisWidth/a;return b},getCoordinate:function(a){a*=this.stepWidth;this.startOnAxis||(a+=this.stepWidth/2);return Math.round(a)},timeZoom:function(a,b){this.startTime=a;this.endTime=b},minDuration:function(){var a=d.extractPeriod(this.minPeriod);return d.getPeriodDuration(a.period,a.count)},checkPeriodChange:function(a,b,c,e,f){c=new Date(c);var g=
new Date(e),h=this.firstDayOfWeek;e=b;"DD"==a&&(b=1);c=d.resetDateToMin(c,a,b,h).getTime();b=d.resetDateToMin(g,a,b,h).getTime();return"DD"==a&&"hh"!=f&&c-b<=d.getPeriodDuration(a,e)?!1:c!=b?!0:!1},generateDFObject:function(){this.dateFormatsObject={};var a;for(a=0;a<this.dateFormats.length;a++){var b=this.dateFormats[a];this.dateFormatsObject[b.period]=b.format}},xToIndex:function(a){var b=this.data,c=this.chart,e=c.rotate,f=this.stepWidth;this.parseDates&&!this.equalSpacing?(a=this.startTime+Math.round(a/
f)-this.minDuration()/2,c=c.getClosestIndex(b,"time",a,!1,this.start,this.end+1)):(this.startOnAxis||(a-=f/2),c=this.start+Math.round(a/f));var c=d.fitToBounds(c,0,b.length-1),g;b[c]&&(g=b[c].x[this.id]);e?g>this.height+1&&c--:g>this.width+1&&c--;0>g&&c++;return d.fitToBounds(c,0,b.length-1)},dateToCoordinate:function(a){return this.parseDates&&!this.equalSpacing?(a.getTime()-this.startTime)*this.stepWidth:this.parseDates&&this.equalSpacing?(a=this.chart.getClosestIndex(this.data,"time",a.getTime(),
!1,0,this.data.length-1),this.getCoordinate(a-this.start)):NaN},categoryToCoordinate:function(a){return this.chart?(a=this.chart.getCategoryIndexByValue(a),this.getCoordinate(a-this.start)):NaN},coordinateToDate:function(a){return this.equalSpacing?(a=this.xToIndex(a),new Date(this.data[a].time)):new Date(this.startTime+a/this.stepWidth)}});return d})});