(function(I){var C=window.AmazonUIPageJS||window.P,z=C._namespace||C.attributeErrors,e=z?z("SellerPartnerAthenaUIAssets"):C;e.guardFatal?e.guardFatal(I)(e,window):e.execute(function(){I(e,window)})})(function(I,C,z){ASPP.when("ASPA","spaui-util","spaui-metrics","spaui-history").register("spaui-ajax",function(e,g,l,d){var a={get:function(b,d,f,k){a.core("GET",b,d,f,k)},post:function(b,d,f,k){a.core("POST",b,d,f,k)},core:function(a,b,f,k,c){f=e.$.extend({url:b,data:"",dataType:z,payload:{},method:a,
type:a},f);e.$.ajax(f).done(function(a,b,c){e.$.isFunction(k)&&(f.payload.data=a,k(f.payload))}).fail(function(a,k){g.handleSigninRedirect(a.status)?l.send({from:d.getFrom(),where:"someAjaxRequest",to:"responseWasLoginPage",additionalObj:{url:b,statusCode:a.status}}):e.$.isFunction(c)&&(f.payload.data=a,f.payload.errorStatus=k,c(f.payload))})},mockGet:function(h,d,f,k,c,q){b.get=a.mockCore(h,d,f,k,c)},mockPost:function(d,e,f,k,c,q){b.post=a.mockCore(d,e,f,k,c)},mockCore:function(a,b,f,k,c,d){return function(t,
n,p,r){var A=function(){var c=e.$.extend({},n.payload,{data:b});t.match(a)&&(d!==z&&d(n),e.$.isFunction(k)&&k(t,n,p,r),f?e.$.isFunction(r)&&r(c):e.$.isFunction(p)&&p(c))};c?setTimeout(A,c):A()}},mockFailedGet:function(d,e,f){b.get=a.mockFailedCore(d,e,f)},mockFailedPost:function(d,e,f){b.post=a.mockFailedCore(d,e,f)},mockFailedCore:function(a,b,d){return function(k,c,q,t){c=e.$.extend({},c.payload,{data:b,errorStatus:d});k.match(a)&&e.$.isFunction(t)&&t(c)}}},b={get:a.get,post:a.post,mockGet:a.mockGet,
mockPost:a.mockPost,mockFailedGet:a.mockFailedGet,mockFailedPost:a.mockFailedPost};return b});ASPP.when("ASPA","spaui-util","spaui-metrics","spaui-theming","spaui-history","spaui-content","spaui-ui","spaui-push-notification","spaui-events","spaui-discovery","spaui-state","spaui-async","spaui-grouped-alerts","spaui-eci-widget","spaui-alert-metrics","spaui-alert-util").register("spaui-alerts",function(e,g,l,d,a,b,h,m,f,k,c,q,t,n,p,r){var A={},v={parentRequestId:null,athenaInitializedWithoutSummon:!1,
onInfoCard:!1,isInfoCardLoaded:!1,alertLoaded:!1,alertFlushed:!1,marketplaceId:null,overrideContext:null,overrideAlertId:null,alertContent:null,shinyCount:0,alertHandles:[]},x={init:function(a){v.marketplaceId=e.state("spaui-state").marketplaceID||e.state("spaui-state").marketplaceId;x.hydrate(a);x.bind()},hydrate:function(a){A.spaui=a;A.gatewayHelpLink=e.$("#sc-quicklink-help").find(".sc-ql-a").find(".sc-quick-txt");A.templateHolder=e.$("#spaui-template-shiny-object");f.subscribeAsyncModuleEvent("alerts",
q.LOADED_EVENT,x.onLoad);f.subscribeAsyncModuleEvent("alerts",q.COMPLETED_EVENT,x.onCompleteLoad);f.subscribe(f.getName("newPage"),x.onNewPage);f.subscribe(f.getName("initializedWithoutSummon"),x.onInitialize);f.subscribe(f.getName("dismissed"),x.onAthenaDismissed);k.register("alerts","info",!1,x.firstDiscovery);a={simpleRegister:x.registerSimpleAlert,customRegister:x.registerAlert};n.registerHandles(a);t.registerHandles(a);x.registerSimpleAlert(function(){return!0},l.getContext("alert"),l.getContext("pushNotification"))},
registerSimpleAlert:function(a,b,c,n){x.registerAlert(a,x.createInstrumentClosure(p.discover,b,c),x.createInstrumentClosure(p.read,b,c),x.createInstrumentClosure(p.dismiss,b,c),x.createInstrumentClosure(p.minimize,b,c),n)},createInstrumentClosure:function(a,b,c){return function(p){a(b,c,r.getAlertDetails(p))}},registerAlert:function(a,b,c,p,n,d){v.alertHandles.push({checkFunc:a,onDiscover:b,onOpen:c,onDismiss:p,onMinimize:n,pushConfig:d})},onLoad:function(a){v.alertLoaded=!0;v.alertContent=a?a:A.spaui.find(".spaui-alerts");
0>=e.$(v.alertContent).find(".spaui-alert").length&&x.instrumentNoAlertsToShow(l.getContext("alert"),{});x.attemptMastheadDisplay()},onInitialize:function(){v.athenaInitializedWithoutSummon=!0;x.attemptMastheadDisplay()},onAthenaDismissed:function(){v.onInfoCard=!1;v.athenaInitializedWithoutSummon=!0;x.attemptMastheadDisplay()},attemptMastheadDisplay:function(){if(!(v.onInfoCard||r.isAlertsHidden()||r.alertsAreSuppressed())&&v.alertLoaded&&v.athenaInitializedWithoutSummon&&null!==v.alertContent){var a=
e.$(v.alertContent);v.shinyCount=a.data("shiny-count");a=a.find(".spaui-alert");if(0<a.length){v.alertContent=null;var b=x.getPushNotificationConfig(a);a.data("is-push")&&!1!==b?x.displayPushNotification(a):x.displayShinyObjectAlert(a)}}},onNewPage:function(a){a.type===b.getPageType("info")&&x.dynamicHydrate()},onCompleteLoad:function(){v.alertFlushed=!0;f.publish(f.getName("alertsLoaded"));x.dynamicHydrate();if(r.isAlertsHidden()||r.alertsAreSuppressed())if(A.alerts.hide(),A.viewNotificationCardLink.hide(),
r.isAlertsHidden())return;if(x.isTimeToDiscover())x.onDiscover()},dynamicHydrate:function(){A.alerts=A.spaui.find("#spaui-content .spaui-alerts");A.viewNotificationCardLink=A.spaui.find(".spaui-view-notification-card");A.alerts.find(".spaui-alert").each(function(){var a=e.$(this),b=x.getIconTemplate(a),a=a.find(".spaui-alert-badge"),b=b.find(".spaui-alert-icon");a.empty();a.append(b.clone())})},bind:function(){A.spaui.delegate(".spaui-alert-toggle","click",x.toggle);A.spaui.delegate(".spaui-alert-dismiss",
"click",x.dismiss);A.spaui.delegate(".spaui-alert-load-all","click",x.loadAllHandle);e.$("#sc-quicklinks-top").delegate("#spaui-pn-content .spaui-alert-load-all","click",x.pushNotificationLoadAll)},toggle:function(a){a.preventDefault();a=e.$(a.currentTarget);var b=r.getAlertFromChild(a);a.hasClass("spaui-alert-toggle-closed")?(a.removeClass("spaui-alert-toggle-closed").addClass("spaui-alert-toggle-open"),a.parent().find(".spaui-alert-content").css("display","block"),g.updateScrollTop(a,70),x.callAlertHandle("onOpen",
b)):(a.removeClass("spaui-alert-toggle-open").addClass("spaui-alert-toggle-closed"),a.parent().find(".spaui-alert-content").css("display","none"),x.callAlertHandle("onMinimize",b))},dismiss:function(a){a.preventDefault();e.$("#spaui-alerts-icon").remove();A.gatewayHelpLink.css("padding-right","");a=r.getAlertFromChild(e.$(a.currentTarget));x.callAlertHandle("onDismiss",a);r.hideSingleAlert(r.getAlertDetails(a).id)},loadAllHandle:function(a,b){a.preventDefault();x.displayAllAlerts({where:b?l.getContext("pushNotification"):
l.getContext("alert")})},displayAllAlerts:function(p){h.getVisible()||h.summoner({});var n=a.getAthenaUrlPrefix()+"athena-all-alerts?requestId="+l.incrementChildRequestId();b.placeEndpoint("alerts",c.enhanceUrl(n),function(b){l.send(e.$.extend({from:a.getFrom(),where:l.getContext("alert"),to:l.getPlace("alerts")},p));x.onLoadAllAlerts({})})},pushNotificationLoadAll:function(a){x.loadAllHandle(a,!0)},onLoadAllAlerts:function(a){x.loadAllDiscover(a);x.loadAllRead(a)},loadAllDiscover:function(a){var b=
[];e.$(".spaui-alerts-all .spaui-alert-info:visible").each(function(){b.push(g.gda(this,"id"))});0>=b.length?x.instrumentNoAlertsToShow(l.getContext("allAlerts"),a):p.massDiscover(l.getContext("allAlerts"),b,a);x.dynamicHydrate()},loadAllRead:function(a){var b=[];e.$(".spaui-alerts-all .spaui-alert-info.spaui-alert-fixed").each(function(){b.push(g.gda(this,"id"))});0<b.length&&p.massRead(l.getContext("allAlerts"),b,a)},onDiscover:function(){var b=A.alerts.find(".spaui-alert");if(0<b.length&&!r.isAlertsHidden()){var p=
A.shinyIcon===z?z:parseInt(A.shinyIcon.data("priority"),10);d.shouldHideAlerts(p)||r.alertsAreSuppressed()?(b=r.getAlertDetails(b),l.send({from:a.getFrom(),where:l.getContext("alert"),to:l.getPlace("alertSuppressed"),payloadObj:{notificationId:b.id,notificationType:b.type,notificationName:b.name}})):(x.callAlertHandle("onDiscover",b),x.isNonToggleAlert(b)&&x.callAlertHandle("onOpen",b))}},isTimeToDiscover:function(){return v.isInfoCardLoaded&&v.alertFlushed},isNonToggleAlert:function(a){return!r.getAlertDetails(a).expandable},
firstDiscovery:function(){v.onInfoCard=!0;v.isInfoCardLoaded=!0;if(x.isTimeToDiscover())x.onDiscover()},instrumentNoAlertsToShow:function(b,p){l.send({from:a.getFrom(),where:b,to:l.getPlace("noAlertToShow"),additionalObj:p})},displayShinyObjectAlert:function(b,p){var c=x.getIconTemplate(b,p).find(".spaui-alert-shiny").clone(),n=g.gda(c,"priority");if(!(b!==z&&d.shouldHideAlerts(n)||n>=(A.shinyIcon===z?999:g.gda(A.shinyIcon,"priority")))){0===A.gatewayHelpLink.length&&(A.gatewayHelpLink=e.$("#helpMenuID .sc_quicklink"));
A.shinyIcon!==z&&A.shinyIcon.remove();A.shinyIcon=c;A.gatewayHelpLink.append(c);A.gatewayHelpLink.css("padding-right","25px");var r=null,n=p||g.gda(b,"severity"),k=x.getSeverity(n);if(null===r||k.priority<r.priority)r=k;r&&(A.gatewayHelpLink.attr("aria-label","Help - "+r.ariaLabel),k=A.alerts!==z?A.alerts.data("shiny-count"):v.shinyCount,r.showCount&&0<k?(c.removeClass("spaui-sprite"),c.addClass("spaui-alert-shiny-count"),c.text(k),c=c.clone(),b.find(".spaui-alert-load-all-node .spaui-alert-load-all").append(c)):
k=0,l.send({from:a.getFrom(),where:l.getContext("alertShinyObject"),to:"discovered",additionalObj:{severityShow:n,count:k}}))}},getShinyIconOverrideCode:function(){return{A1F83G8C2ARO7P:"GB",A1PA6795UKMFR9:"EU",A13V1IB3VIYZZH:"EU",A1RKKUPIHCS9HS:"EU",AJZF8LZ1EJVJN:"EU",APJ6JRA9NG5V4:"EU",A3HOBANJMCMD83:"EU",A21TJRUUN4KGV:"IN",A2XZLSVIQ0F4JT:"IN",AAHKV2X7AFYLW:"SEA",A1VC38T7YXB528:"SEA"}[v.marketplaceId]||"default"},getSeverity:function(a){return{ALERT_HIGH:{priority:0,ariaLabel:"Urgent notification",
showCount:!0},ALERT_MEDIUM:{priority:1,ariaLabel:"Important notification",showCount:!0},INFORMATION:{priority:2,ariaLabel:"Information alert",showCount:!1},OPPORTUNITY:{priority:3,ariaLabel:"Opportunity alert",showCount:!1}}[a]},displayPushNotification:function(a){var b=a.find(".spaui-alert-header").data("expandable"),c=a.find(".spaui-alert-content").clone(),p;p=b?a.find(".spaui-alert-toggle").text():a.find(".spaui-alert-header-inline-push").text();var n=x.getPushNotificationConfig(a);a=r.getAlertDetails(a);
var k=m.create(p,c,n.pushNotificationSev,n.hasMinimizeButton,b);k.data("id",a.id);k.data("type",a.type);k.data("name",a.name);k.data("is-push",!0);x.callAlertHandle("onDiscover",k);b||x.callAlertHandle("onOpen",k);f.subscribe(f.getName("pushNotificationOpened"),function(a){x.callAlertHandle("onOpen",k)});f.subscribe(f.getName("pushNotificationClosed"),function(a){x.callAlertHandle("onDismiss",k)});f.subscribe(f.getName("pushNotificationMinimize"),function(a){x.callAlertHandle("onMinimize",k)})},getPushNotificationConfig:function(a){var b=
{ALERT_HIGH:{type:"urgent",pushNotificationSev:m.HIGH},OPPORTUNITY:{type:"opportunity",pushNotificationSev:m.OPPORTUNITY},ALERT_MEDIUM:{type:"alert",pushNotificationSev:m.MEDIUM},INFORMATION:{type:"info",pushNotificationSev:m.INFORMATION}}[a.data("severity")];return b?(b={type:b.type,pushNotificationSev:b.pushNotificationSev,hasMinimizeButton:!1},a=x.getAlertHandles(a),a.pushConfig&&e.$.isPlainObject(a.pushConfig)&&(b=e.$.extend({},b,a.pushConfig)),b):!1},getState:function(){return v},getIconTemplate:function(a,
b){var c=x.getShinyIconOverrideCode(),p=b||g.gda(a,"severity"),p=A.templateHolder.find("#"+p),c=p.find("."+c);0===c.length&&(c=p.find(".default"));return c},getAlertHandles:function(a){for(var b=0;b<v.alertHandles.length;++b){var c=v.alertHandles[b];if(c.checkFunc(a))return c}},callAlertHandle:function(a,b){var c=x.getAlertHandles(b);if(c[a]&&e.$.isFunction(c[a]))c[a](b)}};return{init:x.init,bindIrisCallsToPushNotification:x.bindIrisCallsToPushNotification,getSeverity:x.getSeverity,getState:x.getState,
getShinyIconOverrideCode:x.getShinyIconOverrideCode,getIconTemplate:x.getIconTemplate,displayShinyObjectAlert:x.displayShinyObjectAlert,displayAllAlerts:x.displayAllAlerts,dynamicHydrate:x.dynamicHydrate,onLoadAllAlerts:x.onLoadAllAlerts}});ASPP.when("ASPA","spaui-metrics","spaui-history","spaui-ajax").register("spaui-alert-metrics",function(e,g,l,d){var a=null,b=[],h=[],m={iris:"DISCOVERED",alertAction:g.getPlace("alertDiscovered"),pushAction:"load",idList:b},f={iris:"READ",alertAction:g.getPlace("setAlertRead"),
pushAction:"open",idList:h},k={iris:"ABORT",alertAction:g.getPlace("setAlertAbort"),pushAction:"dismiss",idList:[]},c={iris:null,alertAction:g.getPlace("minimized"),pushAction:g.getPlace("minimized"),idList:null},q={init:function(){a=g.getParentRequestId()},instrumentMassDiscover:function(a,c,p){c=q.filterIdsAlreadySeen(c,b);if(0<c.length){b=b.concat(c);var k=c.join(",");q.sendIrisDiscover(k,function(){var b=e.$.extend({ids:k},p);g.send({from:l.getFrom(),where:a,to:g.getPlace("alertMassDiscovered"),
additionalObj:b})})}},instrumentMassRead:function(a,b,c){b=q.filterIdsAlreadySeen(b,h);if(0<b.length){h=h.concat(b);var k=b.join(",");q.sendIrisResponse(f.iris,k,function(){var b=e.$.extend({ids:k},c);g.send({from:l.getFrom(),where:a,to:g.getPlace("alertMassRead"),additionalObj:b})})}},instrumentDiscover:function(a,b,c){q.instrumentAlert(m,a,b,c)},instrumentRead:function(a,b,c){q.instrumentAlert(f,a,b,c)},instrumentDismiss:function(a,b,c){q.instrumentAlert(k,a,b,c)},instrumentMinimize:function(a,
b,p){q.sendMetrics(c,a,b,p)},instrumentAlert:function(a,b,c,k){var d=a.idList;-1===d.indexOf(k.id)&&(d.push(k.id),q.sendIrisResponse(a.iris,k.id,function(){q.sendMetrics(a,b,c,k)}))},sendMetrics:function(a,b,c,k){b=q.chooseContext(b,c,k);a=q.getAction(a,k);g.send({from:l.getFrom(),where:b,to:a,additionalObj:{isPush:k.isPush},payloadObj:{notificationId:k.id,notificationType:k.type,notificationName:k.name}})},sendIrisDiscover:function(a,b){q.sendIrisResponse(m.iris,a,b)},sendIrisResponse:function(b,
c,p){d.get(l.getAthenaUrlPrefix()+"alert/"+b+"?ids="+c+"&prid="+a,{},function(){e.$.isFunction(p)&&p()})},chooseContext:function(a,b,c){return c.isPush?b:a},getAction:function(a,b){return b.isPush?a.pushAction:a.alertAction},filterIdsAlreadySeen:function(a,b){return a.filter(function(a){return-1===b.indexOf(a)})}};return{init:q.init,sendIrisDiscover:q.sendIrisDiscover,massDiscover:q.instrumentMassDiscover,massRead:q.instrumentMassRead,discover:q.instrumentDiscover,read:q.instrumentRead,dismiss:q.instrumentDismiss,
minimize:q.instrumentMinimize}});ASPP.when("ASPA").register("spaui-alert-util",function(e){var g=!1,l=null,d;return{init:function(a){l=a;d=e.$("#sc-quicklinks-top")},getAlertFromInnerEvent:function(a){a=e.$(a.target);var b=a.closest(".spaui-alert");0===b.length&&(b=a.closest("#spaui-push-notification"));return b},getAlertDetails:function(a){var b={isPush:!1},d=a.find(".spaui-alert-info");0===d.length&&a.is("#spaui-push-notification")&&(b.isPush=!0,d=a);b.id=d.data("id");b.name=d.data("name");b.type=
d.data("type");b.expandable=d.data("expandable");return b},getAlertFromChild:function(a){var b=a.closest(".spaui-alert");0===b.length&&(b=a.closest("#spaui-push-notification"));return b},hideSingleAlert:function(a,b){var h=l.find(".spaui-alerts");if(0<h.length&&(1===h.find(".spaui-alert").length&&h.data("is-hidden",!0),a)){var h=h.find('.spaui-alert-info[data-id="'+a+'"]').closest("li.spaui-alert"),m=l.find(".spaui-alert-load-all-node");0<h.length&&(h.fadeOut({duration:300}),m.fadeOut({duration:300}),
h.addClass("spaui-alert-dismissed"),m.addClass("spaui-alert-dismissed"))}h=d.find("#spaui-push-notification");0<h.length&&(m=h.data("id")+"",m===a+""&&h.fadeOut({duration:300}));e.$.isFunction(b)&&b()},isAlertsHidden:function(){var a=l.find(".spaui-alerts");return 0<a.length&&!0===a.data("is-hidden")},hideAllAlerts:function(){l.find(".spaui-alerts").each(function(){e.$(this).hide()});l.find(".spaui-async-alerts").hide();g=!0},alertsAreSuppressed:function(){return g}}});ASPP.when("ASPA","spaui-ui",
"spaui-metrics","spaui-history","spaui-events","spaui-content","spaui-search","spaui-util","spaui-help").register("spaui-api",function(e,g,l,d,a,b,h,m,f){var k=!1,c={init:function(){c.bind()},bind:function(){C._sellerPartnerAthena=t;a.subscribe(a.getName("initialized"),function(){c.triggerLoadedEvent(g.getVisible())})},triggerLoadedEvent:function(a){if(C._sellerPartnerAthenaLoaded&&!k){k=!0;var b=C._sellerPartnerAthenaLoaded,c;for(c in b)if(b.hasOwnProperty(c)&&e.$.isFunction(b[c]))b[c](a)}},summon:function(){g.summoner({external:!0,
where:l.getContext("externalApi"),additionalObj:e.$.extend({},q)})},maybeSummon:function(){g.getVisible()||c.summon()},getTracking:function(){return{where:l.getContext("externalApi"),additionalObj:e.$.extend({},q)}},assertRegistered:function(){if(null===q.clientId||null===q.context)throw"Access to Athena's external API is restricted until you register with it by calling _sellerPartnerAthena.register([clientId], [context])";}},q={client:null,context:null},t={register:function(a,b){q.client=a;q.context=
b},summon:function(){c.assertRegistered();c.maybeSummon()},banish:function(){c.assertRegistered();g.banisher(c.getTracking())},displayHelpArticle:function(a){c.assertRegistered();f.displayHelpTopic(a,null,c.getTracking());c.maybeSummon()},displaySearchResults:function(a){c.assertRegistered();h.externalSubmitSearch(decodeURIComponent(a),c.getTracking());c.maybeSummon()},isContentInsideAthena:function(a){if(!(a instanceof e.$))if(m.isHtmlElement(a))a=e.$(a);else throw"content must be either a jQuery object (from ASPA) or an HtmlElement";
return 0<a.closest("#spaui, #spaui-push-notification").length}};return{init:c.init}});ASPP.when("ASPA","spaui-util","spaui-state","spaui-history","spaui-events","spaui-ajax").register("spaui-async",function(e,g,l,d,a,b){var h={},m={},f={},k={transitionTime:400,flushable:[],onSummonAsyncElements:[],nonAsyncModules:{"featured-content":"featured-content",predictive:"predictive",alerts:"alerts"},onLoadState:null,onSummonState:null,preventFlushFlag:!1,LOADED:"loaded",QUEUED:"queued",SLIDING_UP:"slidingUp",
FLUSHED:"flushed",SLIDING_DOWN:"slidingDown",COMPLETED:"completed",LOADED_EVENT:"Loaded",COMPLETED_EVENT:"Completed"},c={init:function(a,b){c.hydrate(a);c.bind();var d=h.spaui.find(".spaui-async-load"),p=c.splitLoadAndSummonAsync(d),d=p.immediately,p=p.onSummon;k.onLoadState=c.initialState(d);k.onSummonState=c.initialState(p);k.onSummonAsyncElements=p;k.callback=b;c.triggerLoad(d);c.loadComplete();c.loadNonAsync()},initialState:function(a){return{initialElementCount:a.length,remainingElementCount:a.length}},
hydrate:function(a){h.spaui=a;h.templates=e.$("#spaui-template-async")},bind:function(){a.subscribe(a.getName("newPage"),c.onNewPage);a.subscribe(a.getName("summon"),c.asyncOnSummon);a.subscribe(a.getName("leavingPage"),c.onLeavePage)},onNewPage:function(){for(var a in m)if(m.hasOwnProperty(a)&&m[a]===k.FLUSHED){var b=f[a],d=h.spaui.find("#"+b);b&&0!==d.length&&(g.resetJqueryAnimation(d),c.moduleComplete(a))}c.flushNoTransition()},onLeavePage:function(){for(var a in m)m.hasOwnProperty(a)&&(m[a]===
k.SLIDING_UP?m[a]=k.QUEUED:m[a]===k.SLIDING_DOWN&&(m[a]=k.FLUSHED));c.preventFlush()},triggerLoad:function(a){for(var b=0;b<a.length;b++)c.asyncLoad(a[b])},splitLoadAndSummonAsync:function(a){var b=[],c=[];a.each(function(){var a=e.$(this),d=a.data("load-event"),f=a.data("module");delete k.nonAsyncModules[f];if("load"===d)b.push(a);else if("summon"===d)c.push(a);else throw"Unrecognized load event type in async module: "+d;});return{onSummon:c,immediately:b}},asyncOnSummon:function(){0<k.onSummonAsyncElements.length&&
(c.triggerLoad(k.onSummonAsyncElements),k.onSummonAsyncElements=[])},asyncLoad:function(a){var k=g.gda(a,"async-url"),d=l.enhanceUrl(k);a.attr("id")===z&&a.attr("id",g.getUid());var p=g.gda(a,"load-event");b.get(d,{dataType:"html"},function(b){c.asyncSuccess(a,b.data,k,p)},function(b){c.asyncError(a,b,k,p)})},transitionAsyncElement:function(a,b,d,p){var r=e.$(b);p?(c.replaceAndFlush(a,r,d),c.moduleComplete(d)):(m[d]=k.SLIDING_UP,a.slideUp(k.transitionTime,function(){m[d]===k.SLIDING_UP&&(r.hide(),
c.replaceAndFlush(a,r,d),g.ensureId(r),f[d]=r.attr("id"),m[d]=k.SLIDING_DOWN,r.slideDown(k.transitionTime,function(){m[d]===k.SLIDING_DOWN&&c.moduleComplete(d)}))}))},replaceAndFlush:function(a,b,k){a.replaceWith(b);c.removeModuleFromFlushQueue(k)},moduleComplete:function(b){m[b]=k.COMPLETED;a.publishAsyncModuleEvent(b,k.COMPLETED_EVENT)},attemptFlush:function(b,d){var f=b.data("module"),p="#"+b.attr("id");k.flushable.push({selector:p,replacement:d,module:f});m[f]=k.QUEUED;a.publishAsyncModuleEvent(f,
k.LOADED_EVENT,d);p=h.spaui.find(p);!k.preventFlushFlag&&0<p.size()&&c.transitionAsyncElement(p,d,f,"none"===p.css("display"))},asyncSuccess:function(a,b,d,p){c.attemptFlush(a,b);c.attemptLoadComplete(p)},asyncError:function(a,b,d,p){"abort"!==g.getErrorDetailsFromAjaxResponse(b.data,b.errorStatus).type&&(b=a.data("template"),b=c.getTemplateHtmlString(b),c.attemptFlush(a,b),c.attemptLoadComplete(p))},getTemplateHtmlString:function(a){a=h.templates.find("#"+a);return 0<a.length?a[0].outerHTML:""},
attemptLoadComplete:function(a){"summon"===a?k.onSummonState.remainingElementCount--:k.onLoadState.remainingElementCount--;c.loadComplete()},loadComplete:function(){c.isTimeToCallback()&&k.callback!==z&&k.callback()},isTimeToCallback:function(){return 0>=k.onLoadState.remainingElementCount&&0>=k.onSummonState.remainingElementCount},loadNonAsync:function(){g.forEachObjectValue(k.nonAsyncModules,function(b){a.publishAsyncModuleEvent(b,k.LOADED_EVENT,null);a.publishAsyncModuleEvent(b,k.COMPLETED_EVENT)})},
getFlushableState:function(){return k.flushable},flushNoTransition:function(){k.preventFlushFlag=!1;k.flushable.forEach(function(a){var b=h.spaui.find(a.selector);0<b.length&&c.transitionAsyncElement(b,a.replacement,a.module,!0)})},removeModuleFromFlushQueue:function(a){k.flushable=k.flushable.filter(function(b){return b.module!==a})},preventFlush:function(){k.preventFlushFlag=!0},setTransitionTime:function(a){k.transitionTime=a}};return{init:c.init,getFlushableState:c.getFlushableState,setTransitionTime:c.setTransitionTime,
LOADED_EVENT:k.LOADED_EVENT,COMPLETED_EVENT:k.COMPLETED_EVENT}});ASPP.when("ASPA","spaui-history","spaui-metrics","spaui-session","spaui-state","spaui-triggers","spaui-ui","spaui-util","spaui-content","spaui-search","spaui-feedback","spaui-alerts","spaui-links","spaui-predictive","spaui-shim","spaui-global-nav-search","spaui-hmd","spaui-featured-content","spaui-async","spaui-theming","spaui-forums","spaui-push-notification","spaui-eci-widget","spaui-events","spaui-weblabs","spaui-discovery","spaui-api",
"spaui-help","spaui-linkcopy","spaui-direct-answer","spaui-contact-deflection","spaui-alert-util","spaui-alert-metrics","spaui-expand","spaui-grouped-alerts","spaui-workflows","spaui-rightclick","spaui-notification-card","spaui-instance","spaui-chat","ready").register("spaui",function(e,g,l,d,a,b,h,m,f,k,c,q,t,n,p,r,A,v,x,H,F,z,w,y,E,J,L,u,P,Q,O,K,R,S,T,U,V,I,W,X){var B={$dom:{},preview:{fadeOutTime:400,show:!0,dismiss:null}},M=null,N,D={init:function(r){p.init();g.init(r);a.init(C);m.init(C);m.exposejQuery();
J.init();S.init();D.hydrate();D.bind();E.init(r.weblabs);l.init(r.instrumentation);d.init();W.init(C.sessionStorage);V.init(B.$dom.spaui);h.init(B.$dom.spaui);L.init();u.init(B.$dom.spaui);f.init(B.$dom.spaui,r.serverUrl.url,r.sellerU.ids,r.helpContentJSWhitelist.ids);P.init(B.$dom.spaui,r.serverUrl.url);k.init(B.$dom.spaui,r.enableSearchSuggestions.enabled);z.init(B.$dom.spaui);c.init(B.$dom.spaui);A.init(B.$dom.spaui);F.init(B.$dom.spaui);D.preview(r.preview);b.init({athenaHome:D.home,footerContactUs:r.footerContactUsWeblab.treatment});
H.init();K.init(B.$dom.spaui);R.init();q.init(B.$dom.spaui);w.init(B.$dom.spaui);t.init(B.$dom.spaui,r.enableForumsCard.enabled);n.init(B.$dom.spaui);v.init(B.$dom.spaui);Q.init(B.$dom.spaui);O.init(B.$dom.spaui);T.init(B.$dom.spaui);U.init();I.init(B.$dom.spaui);X.init();x.init(B.$dom.spaui,function(){});D.initialState()},hydrate:function(){B.$dom.doc=e.$(document);B.$dom.win=e.$(C);B.$dom.spaui=e.$("#spaui");B.$dom.home=B.$dom.spaui.find("#spaui-home");B.$dom.pop=B.$dom.spaui.find("#spaui-pop");
B.$dom.back=B.$dom.spaui.find("#spaui-content-ui-back");B.preview.dismiss=g.getAthenaUrlPrefix()+"preview-card/dismiss"},bind:function(){B.$dom.home.click(D.home);B.$dom.pop.click(D.pop);B.$dom.back.click(D.back);B.$dom.spaui.delegate(".spaui-go-home","click",D.home);y.subscribe(y.getName("goHome"),function(){D.home()})},preview:function(a){B.preview.show=a.show},initialState:function(){f.initialState();h.initialState();O.initialState();var b=u.initialState();a.isOnUrl("/hz/productsearch")&&a.isParamPresent("productSearchTourOpen")&&
e.$("#tutorial-expander-id").trigger("click");var c=!1;m.isOnArticle()&&a.showBrowseAllHelpOnLoad()?(M=f.getPageType("browseAllHelp"),c=!0,u.displayBrowseAllHelpFromSession()):!d.getTopicID()||a.isAnySummoningParamPresent()||b||(M=f.getPageType("helpTopic"),c=!0,u.displayHelpTopicFromSession(d.getTopicID(),d.getTopicURL()));d.getPinned()?c?y.subscribe(y.getName("newPage"),D.onNewPage):h.summoner({session:!0}):h.isSummoned()||y.publish(y.getName("initializedWithoutSummon"));D.previewToDataStore();
y.publish(y.getName("initialized"))},onNewPage:function(a){a.type===M&&(M=null,y.unsubscribe(y.getName("newPage"),D.onNewPage),h.summoner({session:!0}))},previewToDataStore:function(){d.getPreview()&&B.preview.show&&D.enablePreview();d.getPreview()&&!B.preview.show&&d.setPreview(!1);!d.getPreview()&&B.preview.show&&D.previewUpdate()},previewUpdate:function(){e.$.get(B.preview.dismiss)},enablePreview:function(){e.$("#spaui").append(m.gebi("spaui-template-preview").innerHTML);d.getPinned()?D.previewMetric(l.getContext("session")):
(N=e.$.proxy(D.previewMetric,null,l.getContext("trigger")),y.subscribe(y.getName("summon"),N));B.$dom.spaui.delegate("#spaui-preview-jackpot","click",D.previewDismiss);B.$dom.spaui.delegate("#spaui-preview-modal","click",D.previewDismiss);B.$dom.spaui.delegate("#spaui-preview-map-feedback","click",D.previewFeedback);B.$dom.spaui.delegate("#spaui-preview-map-dismiss","click",D.previewGetAnswers)},previewMetric:function(a){N&&y.unsubscribe(y.getName("summon"),N);l.send({from:g.getFrom(),where:a,to:l.getPlace("previewCard")})},
previewFadeOut:function(a,b,c){a.preventDefault();a.stopPropagation();D.previewUpdate();l.send({from:g.getFrom(),where:b,to:g.getFrom()});e.$("#spaui-preview-modal").fadeOut(B.preview.fadeOutTime,function(a){c&&c()})},previewDismiss:function(a){D.previewFadeOut(a,l.getContext("previewAnywhere"))},previewFeedback:function(a){D.previewFadeOut(a,l.getContext("previewFeedback"),function(){c.launchFeedback()})},previewGetAnswers:function(a){D.previewFadeOut(a,l.getContext("previewGetAnswers"))},back:function(a,
b){a.preventDefault();c.setTyping(!1);f.goBack(!1)},home:function(a){a&&a.preventDefault();B.$dom.home.hasClass("spaui-home-off")||1<g.getFromLength()&&f.goBack(!0)},pop:function(a){a.preventDefault();d.setPinned(!1);l.send({from:g.getFrom(),to:l.getPlace("popPage"),where:l.getContext("header")});m.openInNewWindow(g.getPop())},overrideConfig:function(a){B=e.$.extend(!0,{},B,a)}};return{init:D.init,overrideConfig:D.overrideConfig}});ASPP.register("spaui-browser-support",function(){return{placeholderIsSupported:function(){return"placeholder"in
document.createElement("input")},definePropertyIsSupported:function(){var e={};try{return Object.defineProperty(e,"key",{value:"static"}),"static"===e.key}catch(g){return!1}}}});ASPP.when("ASPA","spaui-content","spaui-state","spaui-external-events","spaui-ui").register("spaui-chat",function(e,g,l,d,a){var b,h={enabled:!1,endpoint:"/help/assist/chat",templateId:z,isDebugMode:!1,transitionTime:200,minimizedHeight:65,maximizedHeight:z,maxHeightPercent:.7},m={init:function(){var a=e.state("spaui-chat-state");
if(a!==z){h.templateId=a.chatTemplateId;h.isDebugMode="true"===a.debugMode;if(h.templateId===z)throw"Chat did not initiate properly with missing template.";h.enabled=!0}},isDebugMode:function(){return h.isDebugMode},startChat:function(){h.enabled&&(e.$("#spaui-chat").addClass("spaui-chat-active"),d.subscribe("spaui-chat-closed",function(){e.$("#spaui-chat").removeClass("spaui-chat-active");m.recalculateHeight()}),d.subscribe("spaui-chat-state-change",m.recalculateHeight),g.placeEndpointInLocation("#spaui-chat",
m.getUrl(),function(){if(b===z)ASPP.when("spaui-chatwrapper-flow").execute("spaui-chat-ready",function(a){b=a;m.onChatReady()});else m.onChatReady()},!0))},onChatReady:function(){m.bind();b.initiateChat("#spaui-chat-roller",{chatTemplateId:h.templateId,isDebugMode:h.isDebugMode})},getUrl:function(){return l.enhanceUrl(h.endpoint)},bind:function(){e.$("#spaui-chat").delegate("#spaui-chat-icon-maximize","click",m.maximize);e.$("#spaui-chat").delegate("#spaui-chat-icon-minimize","click",m.minimize);
e.$("#spaui-chat").delegate("#spaui-chat-icon-close","click",m.requestClose);e.$(C).resize(m.recalculateHeight)},minimize:function(){e.$("#spaui-chat-window").animate({height:h.minimizedHeight+"px"},h.transitionTime,function(){e.$(this).addClass("spaui-chat-minimized")});e.$(".spaui-panel").animate({top:h.minimizedHeight+"px"},h.transitionTime)},maximize:function(){e.$("#spaui-chat-window").animate({height:h.maximizedHeight+"px"},h.transitionTime,function(){e.$(this).removeClass("spaui-chat-minimized")});
e.$(".spaui-panel").animate({top:h.maximizedHeight+"px"},h.transitionTime)},requestClose:function(){b.closeChat()},updatePanel:function(){var a=0<e.$("#spaui-chat-window").outerHeight(!0)?e.$("#spaui-chat-window").outerHeight(!0):0;e.$(".spaui-panel").css("top",a+"px")},isMinimized:function(){return e.$("#spaui-chat-window").hasClass("spaui-chat-minimized")},recalculateHeight:function(){if(!m.isMinimized()){var a=e.$("#spaui").outerHeight(),b=e.$("#spaui-head").outerHeight(),c=e.$("#spaui-foot").outerHeight(),
d=e.$(".spaui-chat-header").outerHeight(),a=Math.max(parseInt((a-b-c)*h.maxHeightPercent,10),d),b=a-d;h.minimizedHeight=d;h.maximizedHeight=a;m.notifyAvailableChatHeight(b);m.updateChatHeights(a,b);m.updatePanel()}},updateChatHeights:function(a,b){e.$(".spaui-chat-body").css("height",b+"px");e.$("#spaui-chat-window").css("height",a+"px")},notifyAvailableChatHeight:function(a){b.updateHeight(a)},overrideConfig:function(a){h=e.$.extend(h,a)}};return{init:m.init,isDebugMode:m.isDebugMode,startChat:m.startChat,
overrideConfig:m.overrideConfig}});ASPP.when("ASPA","spaui-util","spaui-history","spaui-session","spaui-metrics","spaui-ui","spaui-theming","spaui-events","spaui-ajax").register("spaui-content",function(e,g,l,d,a,b,h,m,f){function k(){return e.$.extend({},J)}var c,q,t,n,p,r,A,v,x,H,F=null,G=0,w=0,y={},E={animation:{visible:!1,active:!1,contentFadeInTime:300,distance:410,backAnimateTime:50,fbConfirmTime:2E3,resizeDuration:250,resizePercentage:.4,closeAffordance:{delay:1E3,fade:1250}},bind:!0,template:{next:'<div id="spaui-next"></div>',
prev:'<div id="spaui-prev"></div>',current:'<div id="spaui-inner-content" class="spaui-new spaui-hide"></div>',loadingAnimation:'<div id="scroll-loader" class="scroll-loader"><div class="spaui-content-loading"></div></div>'},url:null,sellerUniIds:null,javascriptWhitelistIds:null,specialTitleBarActiveClass:"spaui-special-title-bar-active",pageTypes:{alerts:"alerts",browseAllHelp:"browseAllHelp",getSupportCard:"getSupportCard",error:"error",feedback:"feedback",forums:"forums",helpTopic:"helpTopic",
info:"info",loading:"loading",search:"search",notificationCard:"notificationCard",notificationCardCategory:"notificationCardCategory",chat:"chat"},HELP_URL_PATH:"/gp/help/",TIME_BEFORE_REVERTING_BACK_MS:18E4},J={backButton:!0,feedbackLink:!0,resetTopic:!0},L={alerts:k(),browseAllHelp:k(),error:k(),forums:k(),search:k(),loading:k(),notificationCard:k(),notificationCardCategory:k(),chat:k(),getSupportCard:e.$.extend({},J,{backButton:!1}),feedback:e.$.extend({},J,{feedbackLink:!1}),helpTopic:e.$.extend({},
J,{feedbackLink:!1,resetTopic:!1}),info:e.$.extend({},J,{backButton:!1})},u={init:function(a,b,c,p){u.hydrate(a);u.bind();E.url=b;E.sellerUniIds=c||[];E.javascriptWhitelistIds=p||[]},hydrate:function(a){e.$(C);c=a;q=a.find("#spaui-panel");t=a.find("#spaui-content");a.find("#spaui-inner-content");n=a.find("#spaui-home");p=a.find(".spaui-head-controls-pop");a.find("#spaui-foot-browse");r=a.find("#spaui-content-ui");A=a.find("#spaui-content-ui-back");v=a.find("#spaui-content-ui-feedback-text");x=a.find(".spaui-footer-forum");
H=a.find("#spaui-special-title-bar-container")},bind:function(){m.subscribe(m.getName("summon"),u.onAthenaSummoned);e.$(C).unload(u.onPageUnload)},initialState:function(){u.hideUI(!0);v.show();var a=u.getPageType("info");u.setPage(a);m.publish(m.getName("newPage"),{type:a});a=d.getTimeSellerViewingArticle();null!==a&&(new Date).getTime()-a>E.TIME_BEFORE_REVERTING_BACK_MS&&(d.revertSellerToInfoCard(),d.setTimeSellerViewingArticle(null))},overrideConfig:function(a){e.$.extend(E,a)},prepNext:function(){var a=
t.find("#spaui-next");if(!(0<a.length)){var b=e.$("#spaui-inner-content");u.setPage(u.getPageType("loading"));l.pushScroll(b.scrollTop());t.append(E.template.next);a=t.find("#spaui-next");a.css("height",t.height()+"px");a.animate({right:"+="+E.animation.distance},50,function(){b.scrollTop(0)})}},capturePayloadAndCallPlace:function(a,b,c){if(!e.$.isPlainObject(a))throw"First argument must be a plain object of the page details";return function(p){a.content=p.data;a.errorStatus=p.errorStatus;b(a,c)}},
refreshContent:function(a,b){l.pushDom(g.gebi("spaui-inner-content").innerHTML);e.$("#spaui-inner-content").remove();t.append(E.template.current);a instanceof e.$?e.$("#spaui-inner-content").append(a):b?e.$("#spaui-inner-content").html(a):g.gebi("spaui-inner-content").innerHTML=a},fadeContentIn:function(a,b,c){var p=e.$("#spaui-inner-content"),k=a.type;p.fadeIn(E.animation.contentFadeInTime,function(){e.$("#spaui-next").remove();p.removeClass("spaui-hide");p.removeClass("spaui-new");u.isErrorDom(a.content)&&
(d.revertSellerToInfoCard(),a.isPlatformError=!0,a.attemptedType=a.type,a.type=u.getPageType("platformError"),c.isPlatformError=!0);u.showUI(k,b,c);l.update({to:u.getMetricPlaceFromDetails(a)});p.focus()})},isErrorDom:function(a){return 0<e.$(a).find("#spaui-error").length},displaySpecialTitleBar:function(a){H.append(a);c.addClass(E.specialTitleBarActiveClass)},removeSpecialTitleBar:function(){H.empty();c.removeClass(E.specialTitleBarActiveClass)},getFailed:function(a,b){var c={errorDetails:g.getErrorDetailsFromAjaxResponse(a.content,
a.errorStatus),isError:!0};l.pushPop("");u.refreshContent(g.gebi("spaui-template-error-client").innerHTML);a.attemptedType=a.type;a.type=u.getPageType("error");u.fadeContentIn(a,b,c)},getPageType:function(a){return E.pageTypes[a]},hideBackBar:function(){r.hide();q.addClass("spaui-hidden-backbar")},hideUI:function(a){u.clearAllInFlightRequests();p.removeClass("spaui-shown");h.isFeedbackDisabledOnInfoCard()&&u.hideBackBar();u.removeSpecialTitleBar();x.removeClass("spaui-active");A.hide();v.hide();n.addClass("spaui-home-off");
u.publishEventForLeavingPage(a)},showUI:function(a,c,k){r.show();q.removeClass("spaui-hidden-backbar");"info"!==a&&n.removeClass("spaui-home-off");var f=u.getPageConfig(a);if(null===f){k="Page not supported: "+a;if(c){c({isError:!0,error:k});return}throw k;}f.resetTopic&&d.setTopic(null);f.backButton?A.show():A.hide();f.feedbackLink?v.show():v.hide();"info"===f.type&&h.isFeedbackDisabledOnInfoCard()&&u.hideBackBar();"helpTopic"===f.type&&(p.toggleClass("spaui-shown",!(k&&k.isPlatformError)),d.setTimeSellerViewingArticle((new Date).getTime()));
a=u.getPageDetails(f);a.wentBack=k?k.wentBack:!1;u.setPage(a.type);c(k);m.publish(m.getName("newPage"),a);(new Date).getTime();b.contentChanged()},externalShowUI:function(a,b){b===z&&(b=function(){});u.showUI(u.mapMetricsPlaceToPage(a),b)},prepElement:function(a,b,c){u.hideUI();u.prepNext();u.placePage(u.getDetails(b,a),c)},prepEndpoint:function(a,b,c,p,d,k,f){u.hideUI();u.prepNext();a=u.getDetails(a,null);a.withScripts=p;p=f&&e.$.isFunction(f)?u.wrapWithFilter(u.placePage,f):u.placePage;u.ajax(b,
d,k,u.capturePayloadAndCallPlace(a,p,c),u.capturePayloadAndCallPlace(a,u.getFailed,c))},getTemplateContents:function(a,b){var c=g.gebi("spaui-template-"+a);if(null===c)b({isError:!0,error:"Template '"+a+"' does not exist",errorDetails:"Template '"+a+"' does not exist"});else return c},prepTemplate:function(a,b){u.hideUI();u.prepNext();var c=u.getTemplateContents(a,b);c&&u.placePage(u.getDetails(a,c.innerHTML),b)},prepEndpointInLocation:function(a,b,c,p,d,k){u.prepEndpointGeneric(a,function(b){var c=
e.$(a);p?c.html(b):c[0].innerHTML=b},b,c,d,k)},prepEndpointAsAppend:function(a,b,c,p,d){u.prepEndpointGeneric("#spaui-inner-content",function(a){c?e.$("#spaui-inner-content").append(a):g.gebi("spaui-inner-content").innerHTML+=a},a,b,p,d)},prepEndpointGeneric:function(a,b,c,p,d,k){e.$(a).append(E.template.loadingAnimation);u.createInFlightRequest();u.ajax(c,d,k,e.$.proxy(function(c,d){u.isInFlightRequestIdActive(c)&&(u.clearInFlightRequest(c),e.$(a).find("#scroll-loader").remove(),b(d.data),m.publish(m.getName("newContentOnPage")),
p(!0))},null,w),function(a){p(!1,g.getErrorDetailsFromAjaxResponse(a.data,a.errorResponse))});w++},wrapWithFilter:function(a,b){return function(){b.apply(null,arguments)&&a.apply(null,arguments)}},ajax:function(a,b,c,p,d){b=b?f.post:f.get;if(null===c||c===z)c={};b(a,c,p,d)},getDetails:function(a,b){return{type:a,content:b,requestId:++G}},placePage:function(a,b){a.requestId===G&&(u.refreshContent(a.content,a.withScripts),u.fadeContentIn(a,b,{}))},stripTopicId:function(a){return e.$(a).find(".spaui-help").data("topic")},
prepHelpTopicFromTemplate:function(a){var b=u.getTemplateContents("preloadedHelp",a);if(b){var c=u.stripTopicId(b),b={type:u.getPageType("helpTopic"),topicId:c,content:b.innerHTML};u.placeHelpTopic(b,a)}},prepHelpTopic:function(a,b,c){var p="/gp/help/"+a;g.isNull(b)&&(b=p);g.isSellerULink(a)?(g.openInNewWindow(b),d.setPinned(!1)):(u.hideUI(),u.prepNext(),l.pushPop(p),b={type:u.getPageType("helpTopic"),topicId:a,url:b},f.get(l.getAthenaUrlPrefix()+"help-content/"+a+"/",{},u.capturePayloadAndCallPlace(b,
u.placeHelpTopic,c),u.capturePayloadAndCallPlace(b,u.getFailed,c)))},placeHelpTopic:function(a,c){d.setTopicID(a.topicId);d.setTopicURL(a.url);var p=u.isSellerUVideo(a.topicId),k=u.isJavascriptOverride(a.topicId);u.refreshContent(a.content,p||k);p&&b.makeLarge();u.fadeContentIn(a,c,{})},isSellerUVideo:function(a){return u.isMemberOf(a,E.sellerUniIds)},isJavascriptOverride:function(a){return u.isMemberOf(a,E.javascriptWhitelistIds)},isMemberOf:function(a,b){var c=parseInt(a,10);return-1!==b.indexOf(c)},
prepFeaturedAndPredictive:function(a){var b=e.$("#spaui-featured-content-results"),c=e.$("#spaui-predictive-help"),p=b.height()+c.height(),b=b.add(c),d=!1,k=null,r=null;e.$("#spaui-inner-content").append('<div id="spaui-featured-content-predictive-help-loading" class="spaui-featured-content-predictive-help-loading spaui-new" style="top:-'+p+"px;height:"+p+'px;"></div>');p=e.$("#spaui-featured-content-predictive-help-loading");b.css("display","none");p.css("top","0px");b.remove();var p=function(b){b=
g.getErrorDetailsFromAjaxResponse(b.data,b.errorResponse);a(!1,b)},b=C.location.pathname,c=C.location.hash,h=e.$("title").text(),b="?pageUrl="+b+"&pageHash="+encodeURIComponent(c)+"&pageTitle="+h;f.get(l.getAthenaUrlPrefix()+"featured-content"+b,{},function(b){r=b.data;d?u.placeFeaturedAndPredictive(r+k,a):d=!0},p);f.get(l.getAthenaUrlPrefix()+"predictive-help"+b,{},function(b){k=b.data;d?u.placeFeaturedAndPredictive(r+k,a):d=!0},p)},placeFeaturedAndPredictive:function(a,b){e.$("#spaui-inner-content").append(a);
var c=e.$("#spaui-featured-content-predictive-help-loading");e.$("#spaui-featured-content-results");var p=e.$("#spaui-predictive-help"),d=c.height();p.css("position","relative");p.css("top","-"+d+"px");c.css("display","none");p.css("top","0px");c.remove();e.$("#spaui-inner-content").focus();b(!0)},placeContentAfterHelpArticle:function(a){c.find("#spaui-content .spaui-help").after(a)},placeContentBeforeSelector:function(a,b){c.find(a).before(b)},goBack:function(a){u.hideUI();t.prepend(E.template.prev);
var b=e.$("#spaui-prev");b.css("height",t.height()+"px");b.animate({right:"-="+E.animation.distance},E.animation.backAnimateTime,function(){u.revealPreviousContent(a)})},revealPreviousContent:function(b){l.popPop();e.$("#spaui-inner-content").remove();t.append(E.template.current);b&&l.prepForHome();g.gebi("spaui-inner-content").innerHTML=l.popDom();var c=e.$("#spaui-inner-content");c.fadeIn(E.animation.contentFadeInTime,function(){e.$("#spaui-prev").remove();c.removeClass("spaui-hide");c.removeClass("spaui-new");
c.focus();c.scrollTop(l.popScroll());var p=l.getTo(),d=l.getFrom();l.update({isBack:!0});u.showUI(u.mapMetricsPlaceToPage(p),function(){},{wentBack:!0});a.send({from:d,where:b?a.getContext("navHome"):a.getContext("navBack"),to:p})})},onAthenaSummoned:function(){(new Date).getTime()},onPageUnload:function(){u.publishEventForLeavingPage()},publishEventForLeavingPage:function(a){a||(a=u.mapMetricsPlaceToPage(l.getFrom()),a=u.getPageDetails(u.getPageConfig(a)),m.publish("leavingPage",a))},setPage:function(a){F=
a},getPage:function(){return F},getPageDetails:function(a){var b={type:a.type};"helpTopic"===a.type&&(b.topicId=d.getTopicID());return b},verifyAllPageConfig:function(){var b=["error","loading"];Object.keys(L).forEach(function(c){if(-1===b.indexOf(c)){var p=u.getPageConfig(c);a.getPlace(c);if(p.type!==c)throw"Invalid lookup of page configuration for page "+c;if(u.mapMetricsPlaceToPage(u.getMetricPlaceFromDetails(p))!==c)throw"Invalid page detail to metric mapping for page "+c;}})},getPageConfig:function(a){if(L.hasOwnProperty(a)){var b=
L[a];b.type=a;return b}return null},mapMetricsPlaceToPage:function(b){var c={};c[a.getPlace("alerts")]=u.getPageType("alerts");c[a.getPlace("notificationCard")]=u.getPageType("notificationCard");c[a.getPlace("notificationCardCategory")]=u.getPageType("notificationCardCategory");c[a.getPlace("browse")]=u.getPageType("browseAllHelp");c[a.getPlace("getSupportCard")]=u.getPageType("getSupportCard");c[a.getPlace("feedback")]=u.getPageType("feedback");c[a.getPlace("info")]=u.getPageType("info");c[a.getPlace("search")]=
u.getPageType("search");c[a.getPlace("forums")]=u.getPageType("forums");c[a.getPlace("chat")]=u.getPageType("chat");var p=null;c.hasOwnProperty(b)?p=c[b]:(b.substr(0,5)===a.getTopic()&&(p=u.getPageType("helpTopic")),"error-"===b.substr(0,6)&&(p=u.getPageType("error")));return p},getMetricPlaceFromDetails:function(b){var c={};c[u.getPageType("alerts")]=a.getPlace("alerts");c[u.getPageType("notificationCard")]=a.getPlace("notificationCard");c[u.getPageType("notificationCardCategory")]=a.getPlace("notificationCardCategory");
c[u.getPageType("browseAllHelp")]=a.getPlace("browse");c[u.getPageType("getSupportCard")]=a.getPlace("getSupportCard");c[u.getPageType("feedback")]=a.getPlace("feedback");c[u.getPageType("forums")]=a.getPlace("forums");c[u.getPageType("info")]=a.getPlace("info");c[u.getPageType("search")]=a.getPlace("search");c[u.getPageType("chat")]=a.getPlace("chat");var p=null;if(c.hasOwnProperty(b.type))p=c[b.type];else if(b.type===u.getPageType("helpTopic"))p=a.getTopic()+b.topicId;else if(b.attemptedType)c=
e.$.extend({},b,{type:b.attemptedType}),b.type===u.getPageType("error")&&(p="error-"+u.getMetricPlaceFromDetails(c)),b.type===u.getPageType("platformError")&&(p="error-platform-"+u.getMetricPlaceFromDetails(c));else throw"No attempted page type";return p},createInFlightRequest:function(){y[w]={active:!0}},isInFlightRequestIdActive:function(a){return y[a]!==z},clearInFlightRequest:function(a){delete y[a]},clearAllInFlightRequests:function(){y={}},getContentPane:function(){return c.find("#spaui-inner-content")}};
return{displaySpecialTitleBar:u.displaySpecialTitleBar,getPageType:u.getPageType,getPage:u.getPage,placeContentAfterHelpArticle:u.placeContentAfterHelpArticle,placeContentBeforeSelector:u.placeContentBeforeSelector,placeElement:u.prepElement,placeEndpoint:u.prepEndpoint,placeTemplate:u.prepTemplate,placeEndpointAsAppend:u.prepEndpointAsAppend,placeEndpointInLocation:u.prepEndpointInLocation,placeHelpTopic:u.prepHelpTopic,placeHelpTopicFromTemplate:u.prepHelpTopicFromTemplate,placeFeaturedAndPredictive:u.prepFeaturedAndPredictive,
goBack:u.goBack,showUI:u.externalShowUI,hideUI:u.hideUI,overrideConfig:u.overrideConfig,initialState:u.initialState,init:u.init,verifyAllPageConfig:u.verifyAllPageConfig,getContentPane:u.getContentPane}});ASPP.when("ASPA","spaui-metrics","spaui-history","spaui-content","spaui-util","spaui-events","spaui-shim","spaui-session","spaui-help","spaui-overlay","spaui-state","spaui-ui","spaui-instance").register("spaui-contact-deflection",function(e,g,l,d,a,b,h,m,f,k,c,q,t){var n=d.getPageType("getSupportCard"),
p=null,r=!1,A=null,v=[d.getPageType("getSupportCard"),d.getPageType("helpTopic")],x=/contact-us/,H=null,F,G,w={init:function(a){p=t.getDeflectionCardVisitId();w.hydrate(a);w.bind()},hydrate:function(a){H=a;F=e.$("#spaui-templates #spaui-template-getSupportCard");G=a.find("#spaui-foot-contact")},bind:function(){w.isActive()&&(w.rebindContactUs(),w.delegateBind(),b.subscribe(b.getName("newPage"),w.handleNewPage),b.subscribe(b.getName("summon"),w.handleSummon),b.subscribe(b.getName("dismissed"),w.handleDismiss))},
className:function(a){return".spaui-get-support-card-"+a},rebindContactUs:function(){var a=F.find(w.className("header-title")).text(),b=G.find(".spaui-footer-icon");G.text(a);G.append(b);G.removeAttr("href");G.attr("title",a.trim())},delegateBind:function(){H.delegate(".spaui-open "+w.className("item-header"),"click",w.handleClose);H.delegate(".spaui-closed "+w.className("item-header"),"click",w.handleOpen);H.delegate(w.className("item")+" a","click",w.handleLinkClick)},handleClose:function(a){w.transition(a,
"spaui-open","spaui-closed","setItemCollapsed")},handleOpen:function(a){w.transition(a,"spaui-closed","spaui-open","setItemExpanded")},transition:function(a,b,c,p){a.preventDefault();a=e.$(a.currentTarget);a=w.nearestItem(a);a.removeClass(b);a.addClass(c);b=a.attr("id");p={from:l.getFrom(),where:g.getContext("getSupportCardItem"),to:p,additionalObj:{itemId:b}};w.appendVisitAndSendMetrics(p)},handleNewPage:function(a){A=a.type;a.type===n?H.addClass("spaui-footer-hidden"):H.removeClass("spaui-footer-hidden");
w.determineVisitId(a.type)},handleSummon:function(){r=!0;A&&w.determineVisitId(A)},handleDismiss:function(){r=!1;w.clearVisitId()},determineVisitId:function(a){r&&(v.includes(a)||w.clearVisitId())},handleLinkClick:function(b){var p=b.currentTarget.href,d=a.getTopicIDFromLink(p),r=a.contains(p,x),h={from:l.getFrom(),where:g.getContext("content")},n={groupId:w.getGroupId(e.$(b.currentTarget))};k.removeOverlay();t.setContactUsLinkClicked(!0);d!==z?(b.preventDefault(),n=e.$.extend(n,{articleId:d}),h.additionalObj=
n,w.appendVisitId(h),f.displayHelpTopic(d,p,h),a.executeIf(a.isSellerULink,function(a){g.send(e.$.extend(h,{to:g.getTopic()+a}))})(d)):(m.setPinned(!1),d="launch-unknownPage",r&&(d="launch-contactUs",c.isOnUrl(x)&&w.isNotDeepLink(p)&&(b.preventDefault(),m.isLargeSize()&&q.makeSmall(),q.banisher({where:g.getContext("getSupportCardItem")}))),w.fillLinkMetricsObject(h,d,p,n),w.appendVisitAndSendMetrics(h))},isNotDeepLink:function(b){return a.getPathArguments(b).categoryId===z},fillLinkMetricsObject:function(a,
b,c,p){p=e.$.extend(p,{url:c});a.additionalObj=p;a.to=b},getGroupId:function(a){return w.nearestItem(a).attr("id")},nearestItem:function(a){return a.closest(w.className("item"))},isActive:function(){return 0<F.length},isVisiting:function(){return null!==t.getDeflectionCardVisitId()},displayDeflectionCard:function(a,b){var c={from:l.getFrom(),where:a,to:g.getPlace("getSupportCard")};b!==z&&(c.additionalObj={summoned:b});d.placeTemplate(n,function(){w.appendVisitAndSendMetrics(c);b&&!m.getPinned()&&
q.summoner({external:!1})})},appendVisitAndSendMetrics:function(a){w.appendVisitId(a);g.send(a)},appendVisitId:function(a){var b=e.$.extend(a.additionalObj,w.getVisitIdObj());a.additionalObj=b},getVisitIdObj:function(){null===p&&w.generateNewVisitId();return{visitId:p}},clearVisitId:function(){p=null;t.setDeflectionCardVisitId(null);t.setContactUsLinkClicked(!1)},generateNewVisitId:function(){var b=a.getUid();p=b;t.setDeflectionCardVisitId(b)},initialState:function(){w.isActive()&&w.shouldAutoSummon()&&
(m.setTopicID(z),w.displayDeflectionCard("contactUsAutoSummon",!0),k.createFullscreenOverlay())},shouldAutoSummon:function(){var a=!0===F.data("weblab-auto-summon"),b=c.isOnUrl(x),p=c.isParamPresent("categoryId"),d=t.getContactUsLinkClicked();b||t.setContactUsLinkClicked(!1);return a&&b&&!p&&!d}};return{init:w.init,isActive:w.isActive,isVisiting:w.isVisiting,displayDeflectionCard:w.displayDeflectionCard,initialState:w.initialState}});ASPP.when("ASPA","spaui-shim","spaui-events","spaui-metrics","spaui-history",
"spaui-expand","spaui-session","spaui-state","spaui-content","spaui-predictive","spaui-alert-util").register("spaui-direct-answer",function(e,g,l,d,a,b,h,m,f,k,c){var q,t=[],n={init:function(a){q=a;n.flushPersistedDA();n.bindEvents()},bindEvents:function(){l.subscribe(l.getName("newPage"),n.handleNewPage);l.subscribe(l.getName("dismissed"),n.handleDismissal);q.delegate("a","click",n.handleAthenaLinkClick);q.delegate("#spaui-content .spaui-direct-answer","click",n.interactWithDirectAnswer);q.delegate("#spaui-content .spaui-direct-answer "+
b.selectors.collapsedElementHeader,"click",n.expand);q.delegate("#spaui-content .spaui-direct-answer "+b.selectors.expandedElementHeader,"click",n.collapse)},handleNewPage:function(){h.clearPersistentDA();n.scanForDirectAnswer()},handleDismissal:function(){h.clearPersistentDA()},scanForDirectAnswer:function(){q.find("#spaui-content .spaui-direct-answer").each(function(){var a=e.$(this);n.discoverDirectAnswer(a);n.transformDirectAnswer(a);n.transformCollapsing(a)})},handleAthenaLinkClick:function(a){0===
e.$(a.target).closest("#spaui-content .spaui-direct-answer").length&&h.clearPersistentDA()},interactWithDirectAnswer:function(a){var b=q.find("#spaui-content .spaui-direct-answer").data("direct-answer-id");a=e.$(a.target);var c=0<q.find("#spaui-search-results .spaui-direct-answer").length;t.includes(b)||n.adoptDirectAnswer(b,a,c);c&&n.instrument(b,"interacted",a)},discoverDirectAnswer:function(a){var b=0<q.find("#spaui-search-results .spaui-direct-answer").length,c=a.data("direct-answer-id");b&&n.instrument(c,
"discovered",a);n.clearAdoptions();n.shouldAdoptImmediately(a)&&n.adoptDirectAnswer(c,a,b)},shouldAdoptImmediately:function(a){return a.hasClass("direct-answer-glance")},transformDirectAnswer:function(a){n.isDirectAnswerTool(a)&&n.isSearchToolsPresent()&&n.removeToolHeader()},isDirectAnswerTool:function(a){return 0<a.find(".spaui-direct-answer-tools").size()},isSearchToolsPresent:function(){return 0<q.find("#spaui-tools-results").size()},removeToolHeader:function(){q.find("#spaui-tools-results h2").remove()},
clearAdoptions:function(){t=[]},adoptDirectAnswer:function(a,b,c){c&&(t.push(a),n.instrument(a,"adopted",b));n.persistDA(b)},instrument:function(b,c,k){b=n.getAdditionalInfo(b,c,k);c={from:a.getFrom(),where:d.getContext("directAnswer"),to:c,additionalObj:b};d.send(c)},getAdditionalInfo:function(b,c,d){b={id:b,query:a.getSearchQuery()};"discovered"!==c&&"persisted"!==c&&(b.action=d.data("direct-answer-action")||"unspecified");return b},expand:function(a){b.expand(a,n.instrumentExpandCollapse)},collapse:function(a){b.collapse(a,
n.instrumentExpandCollapse)},instrumentExpandCollapse:function(b){b={from:a.getFrom(),where:d.getContext("directAnswer"),to:b};d.send(b)},transformCollapsing:function(a){a.find(".spaui-direct-answer-help-collapse").each(function(){b.transformCollapse(e.$(this))})},persistDA:function(b){var c=b.closest("#spaui-content .spaui-direct-answer");if(c.data("persistence-regex")){b=c[0].outerHTML;c=c.data("persistence-regex");try{h.storePersistentDA({regex:c,html:b})}catch(k){b={from:a.getFrom(),where:d.getContext("directAnswer"),
to:"localStorageExceeded"},d.send(b)}}},flushPersistedDA:function(){var a=h.getPersistentDA();a&&(m.isOnUrl(new RegExp(a.regex))&&(f.placeContentBeforeSelector("#spaui-predictive-help, #athena-predictive-help-container",a.html),a=e.$("#spaui-content .spaui-direct-answer").data("direct-answer-id"),n.instrument(a,"persisted"),k.preventAdoption(),c.hideAllAlerts()),h.clearPersistentDA())}};return{init:n.init,isDirectAnswerTool:n.isDirectAnswerTool}});ASPP.when("ASPA","spaui-events","spaui-util","spaui-async").register("spaui-discovery",
function(e,g,l,d){var a={},b={},h={},m=!1,f={init:function(){g.subscribe(g.getName("newPage"),f.pageStateChanged);g.subscribe(g.getName("summon"),f.summonAthena);g.subscribe(g.getName("dismissed"),f.dismissAthena);g.subscribe(g.getName("leavingPage"),f.leftPage)},register:function(b,c,h,e){a[b]={module:b,page:c,multiplicity:h,discovered:!1,callback:e};g.subscribeAsyncModuleEvent(b,d.COMPLETED_EVENT,function(){f.asyncModuleLoaded(b)})},registerWithoutAsync:function(b,c,d,f){a[b]={module:b,page:c,multiplicity:d,
discovered:!1,callback:f};h[b]=!0},asyncModuleLoaded:function(a){h[a]=!0;f.discover()},pageStateChanged:function(a){f.setAllPageStatus(!1);b[a.type]=!0;f.discover()},leftPage:function(){f.setAllPageStatus(!1)},setAllPageStatus:function(a){Object.keys(b).forEach(function(c){b[c]=a})},summonAthena:function(){m=!0;f.discover()},dismissAthena:function(){m=!1},discover:function(){l.forEachObjectValue(a,f.discoverSingleModule)},discoverSingleModule:function(a){m&&b[a.page]&&h[a.module]&&(!a.discovered||
a.multiplicity)&&(a.callback(),a.discovered=!0)}};return{init:f.init,register:f.register,registerWithoutAsync:f.registerWithoutAsync}});ASPP.when("ASPA","spaui-metrics","spaui-history","spaui-events","spaui-util","spaui-theming","spaui-ajax","spaui-content","spaui-session","spaui-async","spaui-alert-util").register("spaui-eci-widget",function(e,g,l,d,a,b,h,m,f,k,c){var q,t={fadeDuration:400,TIME_AFTER_SUBIMT_TO_HIDE:3E3,VALIDATION_ERROR:"validation_error",SUBMIT_TYPE:"SUBMIT"},n={init:function(a){n.hydrate(a);
n.bind(a)},hydrate:function(a){q=e.$("#spaui, #sc-quicklinks-top");t.parentRequestId=g.getParentRequestId()},bind:function(){n.contentDelegate(".spaui-eci-verify-yes","click",n.getDetailsAndCall(function(a,b){n.submitPhone(a,b,!0)}));n.contentDelegate(".spaui-eci-verify-no","click",n.getDetailsAndCall(n.verifyToChoosePhone));n.contentDelegate(".spaui-eci-submit","click",n.getDetailsAndCall(function(a,b){n.submitPhone(a,b,!1)}));n.contentDelegate(".spaui-eci-remind-me-later","click",n.getDetailsAndCall(n.remindMeLaterClicked,
!0))},contentDelegate:function(a,b,c){q.delegate(".spaui-eci-content "+a,b,c)},getDetailsAndCall:function(a,b){return function(d){b&&d.preventDefault();var k=c.getAlertFromInnerEvent(d),k=c.getAlertDetails(k);a(k.id,n.getEciDom(d.target))}},getEciDom:function(a){return e.$(a).closest(".spaui-eci-content")},registerHandles:function(a){a.simpleRegister(n.isEciAlert,g.getContext("eciNotification"),g.getContext("eciNotification"),{hasMinimizeButton:!0})},isEciAlert:function(a){return 0<a.find(".spaui-eci-content").length},
submitPhone:function(b,c,d){var k=c.find(".spaui-eci-choose-phone").data("path").replace(/\{feedbackType\}/,t.SUBMIT_TYPE),f=n.collectParams(b,c,d),k=k+"?"+a.formatObjectAsUrlParams(f);n.instrumentWithVerify(b,"submitted",d);n.submitToLoading(b,c);h.get(k,{},e.$.proxy(n.submitPhoneSuccess,null,b,c,d),e.$.proxy(n.submitPhoneFailed,null,b,c,d))},remindMeLaterClicked:function(a,b){var c=b.find(".spaui-eci-verify").is(":visible"),d=n.collectParams(a,b,c);h.get(l.getAthenaUrlPrefix()+"alert/LATER?ids="+
d.ids+"&prid="+t.parentRequestId,{},function(){n.instrumentWithVerify(a,"remindMeLaterClicked",c)});n.hide(a)},collectParams:function(a,b,c){a={ids:a,prid:t.parentRequestId,sellerVerifysNumber:c};c?(a.country_prefix="",a.phone=b.find(".spaui-eci-verify-phone").val()):(b=b.find(".spaui-eci-choose-phone"),a.country_prefix=b.find(".spaui-eci-country-prefix").val(),a.phone=b.find(".spaui-eci-phone").val());return a},submitPhoneSuccess:function(a,b,c,d){d.data===t.VALIDATION_ERROR?(n.instrumentWithVerify(a,
"validationError",c),n.loadingToValidationFailure(a,b,c)):(n.instrumentWithVerify(a,"submitSuccess",c),n.loadingToSuccess(a,b))},submitPhoneFailed:function(a,b,c){n.instrumentWithVerify(a,"submitFailed",c);n.loadingToFailure(a,b,c)},verifyToChoosePhone:function(a,b){n.instrument(a,"verifyDenied");b.find(".spaui-eci-verify").fadeOut({duration:t.fadeDuration,complete:function(){b.find(".spaui-eci-choose-phone").show()}})},submitToLoading:function(a,b){b.find(".spaui-eci-choose-phone").hide();b.find(".spaui-eci-verify").hide();
b.find(".spaui-eci-validation-failure").hide();b.find(".spaui-eci-submit-failure").hide();b.find(".spaui-eci-form-loading").show()},loadingToSuccess:function(a,b){b.find(".spaui-eci-form-loading").hide();b.find(".spaui-eci-remind-me-later").hide();b.find(".spaui-eci-submit-success").show();setTimeout(function(){n.hide(a)},t.TIME_AFTER_SUBIMT_TO_HIDE)},hide:function(a){c.hideSingleAlert(a)},showVerifyOrChoose:function(a,b){var c={duration:t.fadeDuration};b?a.find(".spaui-eci-verify").fadeIn(c):a.find(".spaui-eci-choose-phone").fadeIn(c)},
loadingToValidationFailure:function(a,b,c){b.find(".spaui-eci-form-loading").hide();b.find(".spaui-eci-validation-failure").show();n.showVerifyOrChoose(b,c)},loadingToFailure:function(a,b,c){b.find(".spaui-eci-form-loading").hide();b.find(".spaui-eci-submit-failure").show();n.showVerifyOrChoose(b,c)},instrumentWithVerify:function(a,b,c){n.instrument(a,b,{verifying:c})},instrument:function(a,b,c){g.send({from:l.getFrom(),where:g.getContext("eciNotification"),to:b,additionalObj:e.$.extend(c,{eciId:a})})},
mockConfig:function(a){e.$.extend(t,a)}};return{init:n.init,mockConfig:n.mockConfig,registerHandles:n.registerHandles}});ASPP.when("ASPA").register("spaui-events",function(e){var g={initialized:"initialized",initializedWithoutSummon:"initializedWithoutSummon",triggerSummon:"triggerSummon",summon:"summon",dismissed:"dismissed",newPage:"newPage",newContentOnPage:"newContentOnPage",leavingPage:"leavingPage",pushNotificationOpened:"pushNotificationOpened",pushNotificationClosed:"pushNotificationClosed",
pushNotificationMinimize:"pushNotificationMinimize",alertsLoaded:"alertsLoaded",goHome:"goHome",featuresChanged:"featuresChanged",notificationListUpdated:"notificationListUpdated",notificationFetchComplete:"notificationFetchComplete"},l={init:function(){},getName:function(d){if(g[d])return g[d];throw"Name '"+d+"' not supported in EVENTS module";},resolveAuiName:function(d){return"spaui:"+d},subscribe:function(d,a){e.on(l.resolveAuiName(d),a)},unsubscribe:function(d,a){e.off(l.resolveAuiName(d),a)},
publish:function(d,a){e.trigger(l.resolveAuiName(d),a)},subscribeAsyncModuleEvent:function(d,a,b){l.subscribe("async"+a+":"+d,b)},publishAsyncModuleEvent:function(d,a,b){l.publish("async"+a+":"+d,b)}};return{init:l.init,getName:l.getName,subscribe:l.subscribe,unsubscribe:l.unsubscribe,publish:l.publish,subscribeAsyncModuleEvent:l.subscribeAsyncModuleEvent,publishAsyncModuleEvent:l.publishAsyncModuleEvent}});ASPP.when("ASPA").register("spaui-expand",function(e){var g={collapsed:"spaui-collapsed",expanded:"spaui-expanded",
duration:400},l={collapsedElementHeader:".spaui-collapsing."+g.collapsed+" .spaui-collapsingHeader",expandedElementHeader:".spaui-collapsing."+g.expanded+" .spaui-collapsingHeader",template:"#spaui-template-collapsing",collapsingContent:".spaui-collapsingContent",anyHeader:":header",elementHeader:".spaui-collapsingHeader"},d,a={init:function(){d=e.$(l.template)},expand:function(b,d){var e=a.getCollapsingContentObjectFromClick(b);e.body.slideDown(g.duration,function(){a.changeClass(g.collapsed,g.expanded,
e.parent,d)})},collapse:function(b,d){var e=a.getCollapsingContentObjectFromClick(b);e.body.slideUp(g.duration,function(){a.changeClass(g.expanded,g.collapsed,e.parent,d)})},getCollapsingContentObjectFromClick:function(a){a.preventDefault();a=e.$(a.currentTarget).parent();var d=a.find(l.collapsingContent);return{parent:a,body:d}},changeClass:function(a,d,e,f){e.removeClass(a);e.addClass(d);f(d.replace("spaui-",""))},transformCollapse:function(b){var e=a.findHeader(b);if(!(0>=e.size())){e.detach();
var m=d.clone();m.removeAttr("id");m.find(l.elementHeader).prepend(e);m.addClass(g.collapsed);b=b.replaceWith(m);m.find(l.collapsingContent).append(b)}},findHeader:function(a){return a.children(l.anyHeader).first()},overrideConfig:function(a){e.$.extend(g,a)}};return{init:a.init,expand:a.expand,collapse:a.collapse,transformCollapse:a.transformCollapse,overrideConfig:a.overrideConfig,selectors:l}});ASPP.when("ASPA","spaui-events").register("spaui-external-events",function(e,g){var l={resolveName:function(d){return"spaui-external:"+
d},subscribe:function(d,a){g.subscribe(l.resolveName(d),a)},unsubscribe:function(d,a){g.unsubscribe(l.resolveName(d),a)},publish:function(d,a){g.publish(l.resolveName(d),a)}};return{subscribe:l.subscribe,unsubscribe:l.unsubscribe,publish:l.publish}});ASPP.when("ASPA","spaui-metrics","spaui-history").register("spaui-external-metrics",function(e,g,l){var d={register:function(a,b){if(a)return e.$.proxy(d.handle,null,a,b);throw"Register must be given a string to identify your widget or team using our API.";
},handle:function(a,b,d,e){b={from:b?"cid-"+b:l.getFrom(),where:a,to:d};e&&(b.additionalObj=e);try{g.validate(b),g.send(b)}catch(f){throw"Error sending metric for '"+a+"': "+f;}}};return{register:d.register}});ASPP.when("ASPA","spaui-metrics","spaui-history","spaui-events","spaui-discovery","spaui-async","ready").register("spaui-featured-content",function(e,g,l,d,a,b){var h,m,f={init:function(k){h=k;a.register("featured-content","info",!1,f.instrumentDiscover);d.subscribeAsyncModuleEvent("featured-content",
b.COMPLETED_EVENT,f.onload)},onload:function(){f.hydrate()},hydrate:function(){m=h.find("#spaui-featured-content-results .spaui-search-results")},getTopicIds:function(){var a=[];m.find("li.spaui-search-result a.spaui-search-result-hot").each(function(){var b=e.$(this);a.push(b.data("id"))});return a},instrumentDiscover:function(){var a=f.getTopicIds();g.send({from:l.getFrom(),where:g.getContext("featured"),to:"discovered",additionalObj:{featuredTopicIds:a.join(",")}})}};return{getTopicIds:f.getTopicIds,
init:f.init}});ASPP.when("ASPA","spaui-util","spaui-history","spaui-metrics","spaui-content").register("spaui-feedback",function(e,g,l,d,a){var b,h,m={active:null,max:1E3,typing:!1,warn:!1},f={init:function(a){f.hydrate(a);f.bind()},hydrate:function(a){b=a;h=b.find("#spaui-content-ui-back")},bind:function(){b.delegate(".spaui-feedback-link","click",f.giveFeedback);b.delegate("#spaui-feedback-rate-stars","hover",f.starsHover);b.delegate(".spaui-feedback-rate-star","hover",f.starHover);b.delegate(".spaui-feedback-rate-star",
"click",f.starClick);b.delegate("#spaui-feedback-rate-clear","click",f.starClear);b.delegate("#spaui-feedback-comments-textarea","focus",f.fbTextFocus);b.delegate("#spaui-feedback-comments-textarea","keyup",f.fbTextType);b.delegate("#spaui-feedback-comments-cancel","click",f.commentsClear);b.delegate("#spaui-feedback-comments-send","click",f.commentsSend)},giveFeedback:function(a){a.preventDefault();f.launchFeedback()},launchFeedback:function(){a.placeTemplate("feedback",function(a){d.send({from:l.getFrom(),
where:d.getContext("navFeedback"),to:d.getPlace("feedback")})})},starsHover:function(a){"mouseenter"===a.type&&(b.find(".spaui-feedback-rate-star").removeClass("on"),b.find("#spaui-feedback-rate-confirm").hide());if("mouseleave"===a.type)for(b.find(".spaui-feedback-rate-star").removeClass("over"),b.find(".spaui-feedback-rate-text").hide(),m.active&&b.find("#spaui-feedback-rate-confirm").show(),a=1;a<m.active+1;a++)b.find("#spaui-feedback-rate-star"+a).addClass("on")},starHover:function(a){if("mouseenter"===
a.type){var c=parseInt(a.currentTarget.id.substr(24),10);b.find("#spaui-feedback-rate-confirm").hide();b.find(".spaui-feedback-rate-text").hide();b.find("#spaui-feedback-rate-text"+c).show();var d;for(d=1;d<c+1;d++)b.find("#spaui-feedback-rate-star"+d).addClass("over")}"mouseleave"===a.type&&(e.$(a.currentTarget).removeClass("over"),e.$(a.currentTarget).removeClass("on"))},starClick:function(a){m.active=parseInt(a.currentTarget.id.substr(24),10);b.find(".spaui-feedback-rate-star").removeClass("on");
b.find(".spaui-feedback-rate-star").removeClass("over");b.find(".spaui-feedback-rate-text").hide();for(a=1;a<m.active+1;a++)b.find("#spaui-feedback-rate-star"+a).addClass("on");b.find("#spaui-feedback-rate-confirm").show();b.find("#spaui-feedback-rate-comments").show();d.send({from:l.getFrom(),where:d.getContext("rating"),to:d.getPlace("setFbRate"),payloadObj:{feedbackStarRating:m.active}})},starClear:function(a){a.preventDefault();b.find("#spaui-feedback-rate-confirm").hide();b.find("#spaui-feedback-rate-comments").hide();
m.active=null;b.find(".spaui-feedback-rate-star").removeClass("on");b.find("#spaui-feedback-context").show();d.send({from:l.getFrom(),where:d.getContext("rating"),to:d.getPlace("setFbClear")})},fbTextFocus:function(a){a=b.find("#spaui-feedback-comments-textarea");a.addClass("active");g.textareaFocusPlaceholderFix(a)},fbTextType:function(a){var c=b.find("#spaui-feedback-comments-counter");a=a.currentTarget.value;m.typing||(c.show(),b.find("#spaui-feedback-comments-buttons").show(),b.find("#spaui-feedback-context").hide(),
m.typing=!0);var d=m.max-a.length;1>=d&&(a.substr(0,m.max),d=0);g.toggleClassOnCond(c,"asp-color-price",21>d);c.text(d)},commentsSend:function(a){a.preventDefault();a=b.find("#spaui-feedback-comments-textarea").val();""!==a&&(m.typing=!1,h.trigger("click",g.gebi("spaui-feedback-message").innerHTML),d.send({from:l.getFrom(),to:d.getPlace("setFbSend"),where:d.getContext("rating"),payloadObj:{feedbackText:a}}))},commentsClear:function(a){a.preventDefault();m.typing=!1;b.find("#spaui-feedback-comments-textarea").val("");
b.find("#spaui-feedback-comments-textarea").removeClass("active");b.find("#spaui-feedback-comments-counter").hide();b.find("#spaui-feedback-comments-counter").text(m.max);b.find("#spaui-feedback-comments-buttons").hide();b.find("#spaui-feedback-context").show()},setTyping:function(a){m.typing=a},overrideConfig:function(a){m=e.$.extend({},m,a)}};return{init:f.init,overrideConfig:f.overrideConfig,setTyping:f.setTyping,launchFeedback:f.launchFeedback}});ASPP.when("ASPA","spaui-util","spaui-metrics",
"spaui-content","spaui-history","spaui-events","spaui-state").register("spaui-forums",function(e,g,l,d,a,b,h){var m=null,f={},k={init:function(a){k.hydrate(a);k.bind()},hydrate:function(b){f.spaui=b;f.templates=b.find("#spaui-templates");m=a.getAthenaUrlPrefix()+"forums"},bind:function(){b.subscribe(b.getName("newPage"),k.onNewPage);b.subscribe(b.getName("leavingPage"),k.onLeavingPage);k.bindForums([".spaui-forums-thread",".spaui-forums-thread-subject"],"click",k.openThread);k.bindForums([".spaui-forums-forum",
".spaui-forums-forum-name"],"click",k.openForum);k.bindForums(".spaui-forums-browse-link","click",k.openBrowseForum)},getForumSelector:function(a){e.$.isArray(a)||(a=[a]);a.unshift("#spaui-forums");return a.join(" ")},bindForums:function(a,b,d){return f.spaui.delegate(k.getForumSelector(a),b,d)},getForumsElements:function(a){return f.spaui.find(k.getForumSelector(a))},displayForums:function(){var b=h.enhanceUrl(m);d.placeEndpoint("forums",b,function(){l.send({from:a.getFrom(),where:l.getContext("footer"),
to:l.getPlace("forums")})})},onNewPage:function(b){if(b.type===d.getPageType("forums")){b=f.spaui.find("#spaui-forums #spaui-forums-title-bar");0<b.length&&(f.specialTitleBar&&f.specialTitleBar.remove(),f.specialTitleBar=b);d.displaySpecialTitleBar(f.specialTitleBar);var h=[];k.getForumsElements([".spaui-forums-threads-list",".spaui-forums-thread"]).each(function(){h.push(e.$(this).data("thread-id"))});var g=[];k.getForumsElements([".spaui-forums-forum-list",".spaui-forums-forum"]).each(function(){g.push(e.$(this).data("forum-id"))});
l.send({from:a.getFrom(),where:"forumsLinks",to:"discovered",additionalObj:{featuredThreadIds:h.join(","),suggestedForumIds:g.join(",")}})}},onLeavingPage:function(a){a.type===d.getPageType("forums")&&f.templates.append(f.specialTitleBar)},openThread:function(a){k.openInNewTab(a);a=e.$(a.target).closest(".spaui-forums-thread");k.instrumentForums(l.getContext("featuredThreads"),"ThreadClicked",{threadId:a.data("thread-id"),rank:a.data("rank"),total:k.getForumsElements(".spaui-forums-threads-list").data("total")})},
openForum:function(a){k.openInNewTab(a);a=e.$(a.target).closest(".spaui-forums-forum");k.instrumentForums(l.getContext("suggestedForums"),"ForumClicked",{forumId:a.data("forum-id"),rank:a.data("rank"),total:k.getForumsElements(".spaui-forums-forum-list").data("total")})},openBrowseForum:function(a){k.openInNewTab(a);k.instrumentForums(l.getContext("browseForums"),"BrowseClicked",{})},openInNewTab:function(a){a.preventDefault();g.openInNewWindow(a.target.getAttribute("href"))},instrumentForums:function(b,
d,f){l.send({from:a.getFrom(),where:b,to:"forums"+d,additionalObj:f})}};return{init:k.init,displayForums:k.displayForums}});ASPP.when("ASPA","spaui-metrics","spaui-ui","spaui-search-suggestions","spaui-browser-support").register("spaui-global-nav-search",function(e,g,l,d,a){var b,h,m,f,k,c,q={invokeSearchFunc:null,invokeSynchronizeFunction:null,defaultSearchValue:null},t=!1,n={init:function(a,b){n.hydrate(a,b);n.bind()},hydrate:function(a,d){q.invokeSearchFunc=a;q.invokeSynchronizeFunction=d;b=e.$(document);
h=e.$("#sc-global-search");m=h.find("#sc-global-search-form #sc-search-field");f=h.find("#sc-global-search-form .sc-search-button");k=e.$("#spaui-templates #spaui-template-global-nav-search-loading");c=k.find("#spaui-global-nav-loading-tip");0<m.length&&(q.defaultSearchValue=m.val().trim());n.setupPlaceholder()},bind:function(){f.click(n.clickSearch);b.keydown(n.searchKey);m.keyup(n.synchronizeAthenaSearch);m.focus(n.searchFocused);m.blur(n.searchBlurred);m.bind("paste",q.pasteFunc)},setupPlaceholder:function(){a.placeholderIsSupported()&&
!n.placeHolderIsSet(m)?(m.attr("placeholder",q.defaultSearchValue),m.removeAttr("onclick"),m.removeAttr("onblur"),m.val(""),q.placeholderFunc=n.doNothing,q.pasteFunc=n.doNothing):(q.placeholderFunc=n.setPlaceholder,q.pasteFunc=n.onPaste)},placeHolderIsSet:function(a){return a.attr("placeholder")!==z},onPaste:function(){!n.searchTermIsViable()&&t&&m.val("")},doNothing:function(){},synchronizeAthenaSearch:function(a){q.invokeSynchronizeFunction(m.val())},clickSearch:function(a){a.preventDefault();n.submitSearch()},
searchKey:function(a){if(t&&13===(a.keyCode||a.which))return n.submitSearch(),a.preventDefault(),!1},searchFocused:function(a){t=!0;d.newBind(m,n.submitSearch,g.getPlace("globalNav"))},searchBlurred:function(a){t=!1},searchTermIsViable:function(){var a=m.val().trim();return""!==a&&a!==q.defaultSearchValue},submitSearch:function(a){if(n.searchTermIsViable()){n.showLoading();d.disable();d.hide();var b=function(){n.hideLoading();d.enable();l.summoner({},function(){m.blur()})};q.invokeSearchFunc(m.val(),
{from:g.getPlace("globalNav"),where:g.getContext("globalSearch")},a,function(a){"order-redirect"===a?n.changeLoadingToOrderRedirect():"inventory-redirect"===a||"skucentral-redirect"===a?n.changeLoadingToInventoryRedirect():b()},function(a){b()})}},showLoading:function(){m.after(c)},changeLoadingToOrderRedirect:function(){c.addClass("spaui-global-nav-redirecting-to-order")},changeLoadingToInventoryRedirect:function(){c.addClass("spaui-global-nav-redirecting-to-inventory")},hideLoading:function(){c.removeClass("spaui-global-nav-redirecting-to-order");
c.removeClass("spaui-global-nav-redirecting-to-inventory");k.append(c)},setSearchBoxValue:function(b){n.isEmpty(b)&&!a.placeholderIsSupported()?q.placeholderFunc():m.val(b)},isEmpty:function(a){return a===z||null===a||0===a.length},setPlaceholder:function(){m.val(q.defaultSearchValue)}};return{init:n.init,setSearchBoxValue:n.setSearchBoxValue}});ASPP.when("ASPA","spaui-metrics","spaui-history","spaui-alert-metrics","spaui-alert-util","spaui-util").register("spaui-grouped-alerts",function(e,g,l,d,
a,b){var h=g.getContext("groupedAlert"),m=g.getContext("groupedAlert"),f=null,k={init:function(a){f=a;f.delegate(k.getSelector(".spaui-grouped-alert-item-action"),"click",k.instrumentInteract);f.delegate(k.getSelector(".spaui-grouped-alert-extender"),"click",k.toggleExtender)},registerHandles:function(a){a.customRegister(k.isGroupedAlert,k.alertDiscovered,function(){},function(){},function(){})},isGroupedAlert:function(a){return a.hasClass("spaui-grouped-alert")},alertDiscovered:function(b){var f=
[];k.getRangeOfAlerts(b,0,2).each(function(){var a=e.$(this);f.push(a.data("id"))});b=a.getAlertDetails(b);b.id=f.join(",");d.discover(h,m,b)},toggleExtender:function(a){a.preventDefault();a=e.$(a.currentTarget);b.updateScrollTop(a.closest(".spaui-grouped-alert"),100);a.hasClass("spaui-alert-extender-closed")?(a.removeClass("spaui-alert-extender-closed").addClass("spaui-alert-extender-open"),a.parent().find(".spaui-alert-content").css("display","block"),k.extenderExpanded(a.closest(".spaui-grouped-alert"))):
(a.removeClass("spaui-alert-extender-open").addClass("spaui-alert-extender-closed"),a.parent().find(".spaui-alert-content").css("display","none"),k.extenderCollapsed(a.closest(".spaui-grouped-alert")))},extenderExpanded:function(b){var f=[];k.getRangeOfAlerts(b,2).each(function(){var a=e.$(this);f.push(a.data("id"))});var m=a.getAlertDetails(b),n=f.join(",");d.sendIrisDiscover(n,function(){g.send({from:l.getFrom(),where:h,to:g.getPlace("groupedAlertInnerDiscover"),additionalObj:{isPush:m.isPush},
payloadObj:{notificationId:n,notificationType:m.type,notificationName:m.name}})})},extenderCollapsed:function(b){var f=[];k.getRangeOfAlerts(b,2).each(function(){var a=e.$(this);f.push(a.data("id"))});b=a.getAlertDetails(b);b.id=f.join(",");d.minimize(h,m,b)},instrumentInteract:function(b){var f=a.getAlertFromInnerEvent(b);d.read(h,m,k.getDetailsForAlert(f,k.getAlertFromEvent(b)))},getSelector:function(a){e.$.isArray(a)||(a=[a]);a.unshift(".spaui-grouped-alert");return a.join(" ")},getRangeOfAlerts:function(a,
b,d){return a.map(function(){return e.$(this).find("ul li.spaui-grouped-alert-item").map(function(){return e.$(this)}).get()}).slice(b,d)},getDetailsForAlert:function(b,d){var f=a.getAlertDetails(b);f.id=d.data("id");return f},getAlertFromEvent:function(a){return e.$(a.target).closest(".spaui-grouped-alert-item")}};return{init:k.init,registerHandles:k.registerHandles}});ASPP.when("ASPA","spaui-metrics","spaui-history","spaui-content","spaui-util","spaui-weblabs","spaui-discovery","spaui-expand","spaui-ui").register("spaui-help",
function(e,g,l,d,a,b,h,m,f){var k=null,c=".spaui-help-content "+m.selectors.collapsedElementHeader,q=".spaui-help-content "+m.selectors.expandedElementHeader,t,n={init:function(a){t=a;n.delegateBind();n.eventBind()},initialState:function(){return a.hasTemplate("preloadedHelp")?(n.displayHelpTopic(null,null,null,null,!1,!0),!0):!1},delegateBind:function(){t.delegate(c,"click",n.expand);t.delegate(q,"click",n.collapse)},eventBind:function(){h.registerWithoutAsync("helpTopic",d.getPageType("helpTopic"),
!0,n.discoverHelpTopic);h.registerWithoutAsync("browseAllHelp",d.getPageType("browseAllHelp"),!0,n.discoverBrowseAllHelp)},bind:function(){e.$(".spaui-help-content .collapsible").each(function(){var a=e.$(this);n.determineCollapse(a)})},expand:function(a){m.expand(a,n.instrumentExpandCollapse)},collapse:function(a){m.collapse(a,n.instrumentExpandCollapse)},determineCollapse:function(a){m.transformCollapse(a)},displayHelpTopic:function(a,b,c,h,m,l){c===z&&(c={});var t=function(b){var d=n.getTopicId(),
r=n.getTrackingData({to:g.getTopic()+d},c,m,l);b.isError?e.$.extend(r,{isError:!0,errorDetails:b.errorDetails}):b.isPlatformError&&(r.isPlatformError=!0);l&&(a=d);k={tracking:r,bookmark:h,actualTopicId:d+"",requestedTopicId:a+""};b.isError||b.isPlatformError||!l||f.summoner({preload:!0})};l?d.placeHelpTopicFromTemplate(t):d.placeHelpTopic(a,b,t)},displayHelpTopicFromSession:function(a,b,c){n.displayHelpTopic(a,b,c,null,!0)},getTopicId:function(a){return t.find(".spaui-help").data("topic")},instrumentRedirects:function(a,
b){g.send({from:"topic"+b,where:"redirect",to:"topic"+a})},discoverHelpTopic:function(){if(k){var b=k.tracking,c=k.bookmark,d=k.actualTopicId,f=k.requestedTopicId;b.isError||b.isPlatformError||(n.bind(),c&&(c=c.slice(1),a.gebi(c)&&a.updateScrollTop(e.$(c),50)));g.validate(b);g.send(b);d!==f&&n.instrumentRedirects(d,f);k=null}},displayBrowseAllHelp:function(a,b){d.placeEndpoint(d.getPageType("browseAllHelp"),l.getAthenaUrlPrefix()+"browse-all-help/",function(c){k={tracking:n.getTrackingData({where:g.getContext("featured"),
to:g.getPlace("browse")},a,b)}})},displayBrowseAllHelpFromSession:function(a){n.displayBrowseAllHelp(a,!0)},getTrackingData:function(a,b,c,d){var f=a.to;a=e.$.extend({from:l.getFrom()},a,b,{to:f});c&&(a.from=a.to,a.where=g.getContext("session"),a.to=g.getPlace("refresh"));d&&(a.where=g.getContext("preload"));return a},discoverBrowseAllHelp:function(){k&&(g.send(k.tracking),k=null)},instrumentExpandCollapse:function(a){g.send({from:l.getFrom(),where:g.getContext("content"),to:a})}};return{init:n.init,
initialState:n.initialState,displayHelpTopic:n.displayHelpTopic,displayHelpTopicFromSession:n.displayHelpTopicFromSession,displayBrowseAllHelp:n.displayBrowseAllHelp,displayBrowseAllHelpFromSession:n.displayBrowseAllHelpFromSession,getTopicId:n.getTopicId}});ASPP.when("ASPA").register("spaui-history",function(e){var g=[],l=[],d=[],a=[],b=[],h=["info"],m=[],f=[],k="/hz/sellerpartner/",c="/hz/augur/",q="any",t=null,n=0,p=null,r=!1,A="any",v={init:function(a){a&&(a.athenaUrl&&(k=a.athenaUrl),a.augurUrl&&
(c=a.augurUrl))},getAthenaUrlPrefix:function(){return k},getAugurUrlPrefix:function(){return c},returnFrom:function(){return h[h.length-1]},returnTo:function(){return h[h.length-2]},returnPop:function(){return f[f.length-1]},returnFromLength:function(){return h.length},prepForHome:function(){var a=g[0];g=[];g.push(a);var a=h[0],b=v.returnFrom();h=[];h.push(a);h.push(b);d=[]},pushDom:function(a){g.push(a)},pushPop:function(a){f.push(a)},pushScroll:function(a){m.push(a)},popDom:function(){return g.pop()},
popPop:function(){return f.pop()},popScroll:function(){return m.pop()},update:function(c){c.isBack?(h.pop(),l.pop(),d.pop(),a.pop(),b.pop()):(h.push(c.to),"search"!==c.to&&(q="any",t=null,n=0,p=null),l.push(q),d.push(t),a.push(n),b.push(p))},setSearchStartHistory:function(b){a[a.length-1]=b},returnSearchStartHistory:function(b){return a[a.length-1]},returnSearchTotalHistory:function(){return b[b.length-1]},returnSearchQueryHistory:function(){return d[d.length-1]},returnSearchScrollBuffer:function(){return 200},
setSearchStart:function(a){n=a},returnSearchStart:function(){return n},returnSearchSize:function(){return 20},setSearchTotal:function(a){p=a},returnSearchTotal:function(){return p},setSearchQuery:function(a){t=a},returnSearchQuery:function(){return t},returnSearchContent:function(){return q},setSearchShowForums:function(a){r=a},returnSearchShowForums:function(){return r},setSearchFilter:function(a){A=a},returnSearchFilter:function(){return A}};return{init:v.init,getAthenaUrlPrefix:v.getAthenaUrlPrefix,
getAugurUrlPrefix:v.getAugurUrlPrefix,update:v.update,prepForHome:v.prepForHome,getFrom:v.returnFrom,getTo:v.returnTo,getPop:v.returnPop,getFromLength:v.returnFromLength,pushDom:v.pushDom,pushPop:v.pushPop,pushScroll:v.pushScroll,popDom:v.popDom,popPop:v.popPop,popScroll:v.popScroll,setSearchStartHistory:v.setSearchStartHistory,getSearchStartHistory:v.returnSearchStartHistory,getSearchTotalHistory:v.returnSearchTotalHistory,getSearchQueryHistory:v.returnSearchQueryHistory,setSearchRequest:v.setSearchRequest,
setSearchStart:v.setSearchStart,setSearchQuery:v.setSearchQuery,getSearchStart:v.returnSearchStart,getSearchContent:v.returnSearchContent,getSearchSize:v.returnSearchSize,getSearchQuery:v.returnSearchQuery,getSearchTotal:v.returnSearchTotal,setSearchTotal:v.setSearchTotal,setSearchShowForums:v.setSearchShowForums,getSearchShowForums:v.returnSearchShowForums,setSearchFilter:v.setSearchFilter,getSearchFilter:v.returnSearchFilter,getSearchRequest:v.returnSearchRequest,getSearchScrollBuffer:v.returnSearchScrollBuffer}});
ASPP.when("ASPA","spaui-metrics","spaui-util","spaui-history","spaui-session","spaui-contact-deflection","spaui-events","spaui-content","spaui-shim").register("spaui-hmd",function(e,g,l,d,a,b,h,m,f){var k=null,c,q,t={commentFadeInDuration:2E3,completeFadeOutDelay:2E3,fadeOutDuration:400,improvements:{1:!1,2:!1,3:!1,4:!1},commentsMaxChar:1E3,commentsAreForYes:!1},n={init:function(a){n.hydrate(a);n.bind()},hydrate:function(a){c=a},bind:function(){c.delegate("#spaui-help-hmd-yes","click",n.yes);c.delegate("#spaui-help-hmd-no",
"click",n.no);c.delegate(".spaui-help-hmd-comments-textarea textarea","click",n.focusTextarea);c.delegate(".spaui-help-hmd-comments-textarea textarea","keyup",n.typeTextarea);c.delegate(".spaui-help-hmd-comments-cancel","click",n.clear);c.delegate(".spaui-help-hmd-comments-send","click",n.send);c.delegate(".spaui-help-hmd-q","change",n.check);c.delegate(".spaui-help-hmd-message a.spaui-external-contact-us-link","click",n.contactUsLinkClicked);h.subscribe(h.getName("newPage"),n.onNewPage)},dom:function(a){return c.find("#spaui-help-hmd-"+
a)},commentsDom:function(a){return k.find(".spaui-help-hmd-comments-"+a)},allCommentsDom:function(a){return c.find(".spaui-help-hmd-comments-"+a)},getContent:function(){return m.getContentPane()},onNewPage:function(a){a.type===m.getPageType("helpTopic")&&(0>=c.find("#spaui-content #spaui-help-hmd-question").length&&(m.getContentPane()[0].innerHTML+=l.gebi("spaui-template-help-hmd").innerHTML),n.allCommentsDom("send").attr("data-topic",a.topicId),n.dom("yes").attr("data-topic",a.topicId),n.dom("no").attr("data-topic",
a.topicId))},activateComments:function(a){n.dom("question").addClass("spaui-hide");var d=n.dom("message");d.removeClass("spaui-hide");k=c.find("#spaui-help-hmd-comments-"+a);k.removeClass("spaui-hide");q=k.find(".spaui-help-hmd-comments-textarea textarea");t.commentsAreForYes="yes"===a;n.resetComments();n.getContent().animate({scrollTop:n.getContent()[0].scrollHeight},t.commentFadeInDuration);!t.commentsAreForYes&&b.isActive()&&b.isVisiting()&&d.find(".spaui-help-hmd-message-inner .asp-alert-content").html(n.dom("negative-get-support-card-message").html())},
contactUsLinkClicked:function(b){a.setContactUsLinkClicked(!0);g.send({from:d.getFrom(),where:g.getContext("helpHmd"),to:"getSupportContactUsLink",additionalObj:{topicId:n.dom("no").data("topic")}})},yes:function(a){a.preventDefault();n.activateComments("yes");l.textareaFocusPlaceholderFix(q);n.instrument(a,!0,!1)},no:function(a){a.preventDefault();n.activateComments("no");l.textareaFocusPlaceholderFix(q);n.instrument(a,!1,!1)},focusTextarea:function(a){q.addClass("active");l.textareaFocusPlaceholderFix(q)},
typeTextarea:function(a){1>=t.commentsMaxChar-a.currentTarget.value.length&&(a.currentTarget.value=a.currentTarget.value.substr(0,t.commentsMaxChar));a=t.commentsMaxChar-a.currentTarget.value.length;n.commentsDom("counter").text(a);l.toggleClassOnCond(n.commentsDom("counter"),"asp-color-price",21>a)},clear:function(a){a.preventDefault();n.resetComments()},resetComments:function(){Object.keys(t.improvements).forEach(function(a){t.improvements[a]=!1;c.find("#spaui-help-hmd-q-"+a).attr("checked",!1)});
q.val("");q.removeClass("active");n.commentsDom("counter").text(t.commentsMaxChar)},send:function(a){a.preventDefault();if(null!==k){l.textareaFocusPlaceholderFix(q);n.instrument(a,t.commentsAreForYes,!0);n.resetComments();k.addClass("spaui-hide");k=null;n.dom("message").addClass("spaui-hide");n.dom("message-again").removeClass("spaui-hide");var b=setTimeout(function(){n.dom("message-again").fadeOut(t.fadeOutDuration,function(){n.dom("message-again").remove()});clearTimeout(b);b=null},t.fadeOutDuration)}},
check:function(a){var b=l.gda(a.currentTarget,"aInputName");a=e.$(a.currentTarget).find("input");t.improvements[b]=a.prop("checked")},instrument:function(a,b,c){a=l.gda(a.currentTarget,"topic");var f="",k=[],f=q.val();!b&&c&&Object.keys(t.improvements).forEach(function(a){t.improvements[a]&&k.push(e.$("#spaui label[for=spaui-help-hmd-q-"+a+"]").find(".asp-checkbox-label").html())});b=b?"1":"0";g.sendHmd({from:d.getFrom(),where:"HMD",to:"topic"+a,payloadObj:{source:"Athena",helpHmd:b,helpNodeId:a,
helpHmdSuggestions:k.join("|"),helpFeedback:f}})},overrideConfig:function(a){t=e.$.extend({},t,a)}};return{init:n.init,overrideConfig:n.overrideConfig}});ASPP.when("ASPA","spaui-metrics").register("spaui-instance",function(e,g){var l=null,d={id:null,data:{deflectionVisitId:null,contactUsLinkClicked:!1}},a={init:function(b){l=b;d.id=g.getSession();try{var e=JSON.parse(l.getItem("spaui"));a.updateCfgData(e)}catch(m){}},updateCfgData:function(a){a.id&&a.id===d.id?d.data=e.$.extend(!0,{},d.data,a.data):
l.removeItem("spaui")},update:function(){l.setItem("spaui",JSON.stringify(d))},setDeflectionCardVisitId:function(b){d.data.deflectionVisitId=b;a.update()},getDeflectionCardVisitId:function(){return d.data.deflectionVisitId},setContactUsLinkClicked:function(b){d.data.contactUsLinkClicked=b;a.update()},getContactUsLinkClicked:function(){return d.data.contactUsLinkClicked}};return{init:a.init,setDeflectionCardVisitId:a.setDeflectionCardVisitId,getDeflectionCardVisitId:a.getDeflectionCardVisitId,setContactUsLinkClicked:a.setContactUsLinkClicked,
getContactUsLinkClicked:a.getContactUsLinkClicked}});ASPP.when("ASPA","spaui-metrics","spaui-history","spaui-events","spaui-async").register("spaui-linkcopy",function(e,g,l,d,a){var b,h=null,m={init:function(a,d){g.getData()&&"true"===g.getSpoofer()&&(b=a,b.delegate(".spaui-url-icon","click",m.linkCopyOpen),b.delegate(".spaui-url-input-close-icon","click",m.linkCopyClose),b.delegate(".spaui-link-copy-container","click",m.stopClickBubbling),h=d,m.bind())},bind:function(){d.subscribe(d.getName("newPage"),
m.showURLIconIfPresent);d.subscribe(d.getName("newContentOnPage"),m.showURLIconIfPresent);d.subscribeAsyncModuleEvent("featured-content",a.COMPLETED_EVENT,m.showURLIconIfPresent)},showURLIconIfPresent:function(){b.find(".spaui-url-icon").removeClass("spaui-hide");b.find(".spaui-search-results-title").addClass("spaui-inline")},linkCopyOpen:function(a){a.preventDefault();var b=e.$(a.currentTarget),c=b.parent();a=c.find(".spaui-url-input");c=c.find(".spaui-url-input-close-icon");b=m.generateLink(b);
a.val(b).removeClass("spaui-hide");c.removeClass("spaui-hide");a.select();g.send({from:l.getFrom(),to:g.getPlace("setLinkCopyOpen"),where:g.getContext("content")})},linkCopyClose:function(a){a.preventDefault();a=e.$(a.currentTarget);a.parent().find(".spaui-url-input").addClass("spaui-hide");a.addClass("spaui-hide");g.send({from:l.getFrom(),to:g.getPlace("setLinkCopyClosed"),where:g.getContext("content")})},stopClickBubbling:function(a){a.preventDefault();a.stopPropagation()},generateLink:function(a){a=
a.data("url");return 0===a.indexOf("http")?a:h+a}};return{init:m.init}});ASPP.when("ASPA","spaui-util","spaui-state","spaui-metrics","spaui-history","spaui-session","spaui-forums","spaui-ui","spaui-events","spaui-ajax","spaui-help","spaui-direct-answer","spaui-contact-deflection","spaui-alert-util","spaui-chat").register("spaui-links",function(e,g,l,d,a,b,h,m,f,k,c,q,t,n,p){var r,A,v={init:function(a,b){v.hydrate(a,b);v.bind()},hydrate:function(a,b){r=a;r.find("#spaui-link-browse");A=b},bind:function(){r.delegate(".spaui-help-content a",
"click",v.helpContent);r.delegate(".spaui-ph-item-content-inner a","click",v.helpContent);r.delegate("#spaui-content .spaui-direct-answer a","click",v.directAnswer);r.delegate(".spaui-link-alerts-internal","click",v.alertsInternal);r.delegate(".spaui-link-alerts-external","click",v.alertsExternal);r.delegate(".spaui-link-ph-policy-internal","click",v.phPolicyInternal);r.delegate(".spaui-link-fc-internal","click",v.fcInternal);r.delegate(".spaui-link-fc-external","click",v.fcExternal);r.delegate(".spaui-link-tool-external",
"click",v.toolExternal);r.delegate(".spaui-link-search-internal","click",v.searchInternal);r.delegate(".spaui-link-search-external","click",v.searchExternal);r.delegate(".spaui-link-no-results-external","click",v.searchNoResultsExternal);r.delegate(".spaui-link-breadcrumb-help","click",v.bcHelp);r.delegate(".spaui-link-breadcrumb-su","click",v.bcSellerU);r.delegate(".spaui-link-breadcrumb-forum","click",v.bcForum);r.delegate("#spaui-link-browse","click",v.browse);r.delegate(".spaui-link-browse-internal",
"click",v.browseInternal);r.delegate(".spaui-link-browse-parent","click",v.browseParent);r.delegate("#spaui-foot-caselog","click",v.caseLog);r.delegate("#spaui-foot-forums","click",v.forums);r.delegate("#spaui-foot-contact","click",v.contact);r.delegate("#spaui-foot-chat","click",v.chat);e.$("#sc-quicklinks-top").delegate("#spaui-pn-content .spaui-link-alerts-internal","click",v.pushNotificationInternal);e.$("#sc-quicklinks-top").delegate("#spaui-pn-content .spaui-link-alerts-external","click",v.pushNotificationExternal);
f.subscribe(f.getName("featuresChanged"),v.updateContactUsState)},updateContactUsState:function(){var a=r.find("#spaui-foot-contact");a.data("href")&&(a.attr("href",a.data("href")),r.removeClass("spaui-disable-contact-us-weblab"))},directAnswer:function(a){var c=e.$(a.currentTarget);0<c.parents(".spaui-help-content").size()||(q.isDirectAnswerTool(c)&&b.setPinned(!1),v.contentLink(a,d.getContext("directAnswer")))},helpContent:function(a){v.contentLink(a,d.getContext("content"))},contentLink:function(f,
k){var h=f.currentTarget.href,n=e.$(f.currentTarget),p=f.currentTarget.getAttribute("target");g.isOnArticle();var l=g.startsWith(h,"mailto:"),r=h.match(/\.[0-9a-z]{1,5}$/i),t=f.currentTarget.hash&&v.isLinkToCurrentArticle(h),A=g.getTopicIDFromLink(h),q=g.contains(h,/(mai|rainier|seller-?central|.*\.desktop).*\.amazon\./),z=g.contains(h,"www.amazon."),C=g.contains(h,"/hz/productsearch/"),p=-1!==["_self","_blank","_parent","_top","",null].indexOf(p),I=g.isHashOnCurrentPage(h);if(l)d.send({from:a.getFrom(),
where:k,to:d.getPlace("mailtoLink"),additionalObj:{email:h.substr(7)}});else if(q&&!t&&!A)(n.hasClass("augur-wf-primary-button")||n.hasClass("augur-wf-secondary-link"))&&b.setPinned(!1),d.send({from:a.getFrom(),where:k,to:d.getPlace("launchGenericPage"),additionalObj:{url:v.cleanUrl(h)}});else if(!I)if((r||t||A||z||p||C)&&f.preventDefault(),r)d.send({from:a.getFrom(),where:k,to:d.getPlace("fileDownload"),additionalObj:{filename:h.substr(h.lastIndexOf("/")+1)}}),g.openInNewWindow(h);else if(t)m.scrollToHash(f.currentTarget.hash.substr(1));
else if(A)c.displayHelpTopic(g.getTopicIDFromLink(h),h,{where:k});else if(z)d.send({from:a.getFrom(),where:k,to:d.getPlace("retailLink"),additionalObj:{url:h}}),g.openInNewWindow(h);else if(C)b.setPinned(!1),g.openInNewWindow(h);else if(p)g.openInNewWindow(h);else{var h=e.$.extend({},f.target.attributes),n={},K;for(K in h)h.hasOwnProperty(K)&&(n[h[K].name]=h[K].value);d.send({from:a.getFrom(),where:k,to:d.getAction("unhandledLink"),additionalObj:n})}},cleanUrl:function(a){return a.split("?")[0]},
isLinkToCurrentArticle:function(a){a=g.getTopicIDFromLink(a);var b=c.getTopicId()+"";return a===b},phPolicyInternal:function(a){a.preventDefault();c.displayHelpTopic(g.gda(a.currentTarget,"id"),g.gda(a.currentTarget,"href"),{where:g.gda(a.currentTarget,"where")})},fcInternal:function(a){a.preventDefault();c.displayHelpTopic(g.gda(a.currentTarget,"id"),g.gda(a.currentTarget,"href"),{where:g.gda(a.currentTarget,"where"),payloadObj:{resultRank:g.gda(a.currentTarget,"rank"),resultTotal:g.gda(a.currentTarget,
"total")}})},fcExternal:function(b){b.preventDefault();d.send({from:a.getFrom(),where:g.gda(b.currentTarget,"where"),to:"launch-"+g.gda(b.currentTarget,"to")+"-"+g.gda(b.currentTarget,"id"),payload:"&resultRank="+g.gda(b.currentTarget,"rank")+"&resultTotal="+g.gda(b.currentTarget,"total")});g.openInNewWindow(b.currentTarget.href)},searchInternal:function(b){b.preventDefault();var d=parseInt(g.gda(b.currentTarget,"rank"),10)+a.getSearchStart();c.displayHelpTopic(g.gda(b.currentTarget,"id"),g.gda(b.currentTarget,
"href"),{where:g.gda(b.currentTarget,"where"),payloadObj:{resultRank:d,resultTotal:g.gda(b.currentTarget,"total")}})},searchExternal:function(c){c.preventDefault();b.setPinned(!1);var f=parseInt(g.gda(c.currentTarget,"rank"),10)+a.getSearchStart();d.send({from:a.getFrom(),where:g.gda(c.currentTarget,"where"),to:"launch-"+g.gda(c.currentTarget,"to")+"-"+g.gda(c.currentTarget,"id"),payload:"&resultRank="+f+"&resultTotal="+g.gda(c.currentTarget,"total")});g.openInNewWindow(c.currentTarget.href)},searchNoResultsExternal:function(b){d.send({from:a.getFrom(),
where:d.getContext("noResults"),to:d.getPlace("launchNoSearchResults")})},bcHelp:function(b){b.preventDefault();var f=b.currentTarget.href,h=g.getTopicIDFromLink(f),k=parseInt(g.gda(b.currentTarget,"rank"),10)+a.getSearchStart();c.displayHelpTopic(h,f,{where:d.getContext("breadcrumb"),payloadObj:{resultRank:k,resultTotal:g.gda(b.currentTarget,"total")}})},bcForum:function(b){b.preventDefault();d.send({from:a.getFrom(),where:d.getContext("breadcrumb"),to:"launch-Forum",payload:"&resultRank="+g.gda(b.currentTarget,
"rank")+"&resultTotal="+g.gda(b.currentTarget,"total")});g.openInNewWindow(b.currentTarget.href)},bcSellerU:function(b){b.preventDefault();d.send({from:a.getFrom(),where:d.getContext("breadcrumb"),to:"launch-SU",payload:"&resultRank="+g.gda(b.currentTarget,"rank")+"&resultTotal="+g.gda(b.currentTarget,"total")});g.openInNewWindow(b.currentTarget.href)},browse:function(a){a.preventDefault();c.displayBrowseAllHelp()},browseInternal:function(a){a.preventDefault();c.displayHelpTopic(g.gda(a.currentTarget,
"id"),g.gda(a.currentTarget,"href"),{where:g.gda(a.currentTarget,"where")})},browseParent:function(b){b.preventDefault();var c=e.$(b.currentTarget).find("a");b=e.$(b.currentTarget).next();var f="";b.is(":hidden")?(c.addClass("spaui-browse-parent-open"),b.show(),f=d.getPlace("setAhOpen")):(c.removeClass("spaui-browse-parent-open"),b.hide(),f=d.getPlace("setAhClose"));d.send({from:a.getFrom(),where:d.getContext("content"),to:f+d.sanitizeEventPart(c.attr("id"))})},alertsInternal:function(a,b){a.preventDefault();
m.getVisible()||m.summoner({});var f=n.getAlertDetails(n.getAlertFromInnerEvent(a)),h=g.gda(a.currentTarget,"item"),k=g.gda(a.currentTarget,"rank"),e=g.gda(a.currentTarget,"topic"),p=g.gda(a.currentTarget,"total"),l=a.currentTarget.getAttribute("href"),l=null===l?"":l,r=a.currentTarget.innerHTML;c.displayHelpTopic(e,l,{where:b?d.getContext("pushNotification"):d.getContext("alert"),additionalObj:{item:h,rank:k,total:p,itemUrl:l,itemText:r},payloadObj:{notificationId:f.id,notificationType:f.type,notificationName:f.name}})},
alertsExternal:function(c,f){var h=n.getAlertDetails(n.getAlertFromInnerEvent(c)),e=g.gda(c.currentTarget,"item"),m=g.gda(c.currentTarget,"rank"),l=g.gda(c.currentTarget,"total"),p=c.currentTarget.getAttribute("href"),p=null===p?"":p,r=c.currentTarget.innerHTML;-1!==c.currentTarget.href.toLowerCase().indexOf("gp/site-metrics/report.html")&&k.get(a.getAthenaUrlPrefix()+"alert/REDIRECT_TO_BIZ_REP?ids="+h.id);b.setPinned(!1);d.send({from:a.getFrom(),where:f?d.getContext("pushNotification"):d.getContext("alert"),
to:"launch-tool",additionalObj:{item:e,rank:m,total:l,itemUrl:p,itemText:r},payloadObj:{notificationId:h.id,notificationType:h.type,notificationName:h.name}})},toolExternal:function(c){b.setPinned(!1);c=c.currentTarget;c.hasAttribute("data-tool")&&d.send({from:a.getFrom(),where:d.getContext("tools"),to:d.sanitizeEventPart(g.gda(c,"tool"))})},pushNotificationInternal:function(a){v.alertsInternal(a,!0)},pushNotificationExternal:function(a){v.alertsExternal(a,!0)},caseLog:function(c){b.setPinned(!1);
d.send({from:a.getFrom(),where:d.getContext("footer"),to:d.getPlace("caseLog")})},forums:function(b){A?(b.preventDefault(),h.displayForums()):d.send({from:a.getFrom(),where:d.getContext("footer"),to:d.getPlace("forums")})},contact:function(c){t.isActive()?(c.preventDefault(),t.displayDeflectionCard(d.getContext("footer"))):(b.setPinned(!1),d.send({from:a.getFrom(),where:d.getContext("footer"),to:d.getPlace("contact")}))},chat:function(b){b.preventDefault();p.startChat();d.send({from:a.getFrom(),where:d.getContext("footer"),
to:d.getPlace("chat")})}};return{init:v.init}});ASPP.when("ASPA","spaui-util","spaui-shim").register("spaui-metrics",function(e,g,l){var d={data:null,DROPPED_METRIC:"droppedMetric",MAXIMUM_SIZE:64,METRIC_FAILURE:"metricFailure",FIRST_REQUEST_FAILED:"firstRequestFailed",ALL_RETRIES_FAILED:"allRetriesFailed",MAX_RETRIES:3,RETRY_DELAY:300,endpoint:{protocol:"https://",host:"fls-na.amazon.com",path:"/1/action-impressions/1/OP/sp-athena/action/athena:",pathHmd:"/1/action-impressions/1/OP/sp-athena/action/help_hmd:",
params:"",requestId:0},map:{context:{alert:"alert",alertShinyObject:"alertShinyObject",allAlerts:"allAlerts",async:"async",autoSummonParam:"autoSummonParam",autoSummonHelpParam:"autoSummonHelpParam",breadcrumb:"breadcrumb",browseForums:"browseForums",content:"content",getSupportCardItem:"getSupportCardItem",directAnswer:"direct-answer",eciNotification:"eciNotification",externalApi:"externalApi",externalTrigger:"externalTrigger",featured:"featured",featuredThreads:"featuredThreads",footer:"footer",
globalSearch:"globalSearch",groupedAlert:"groupedAlert",header:"header",helpHmd:"helpHmd",navBack:"navBack",navFeedback:"navFeedback",navHome:"navHome",navSearch:"navSearch",noHelpResults:"noHelpResults",noResults:"noResults",notificationCard:"notificationCard",notificationCardCategory:"notificationCardCat",predictive:"predictive",preload:"preload",previewFeedback:"previewFeedback",previewGetAnswers:"previewGetAnswers",previewAnywhere:"previewAnywhere",pushNotification:"pushNotification",results:"results",
rating:"rating",rightClick:"rightClick",scFooter:"scFooter",searchSuggestions:"search-suggestions",session:"session",suggestedForums:"suggestedForums",tools:"tools",trigger:"trigger"},place:{alerts:"alerts",async:"async",browse:"browse",caseLog:"caseLog",chat:"chat",contact:"contact",getSupportCard:"getSupportCard",globalNav:"globalNav",info:"info",external:"external",feedback:"feedback",forums:"forums",search:"search",searchMore:"searchMore",topic:{id:null,text:"topic"},refresh:"refresh",fileDownload:"fileDownload",
mailtoLink:"mailtoLink",retailLink:"retailLink",popPage:"popPage",previewCard:"previewCard",launchGenericPage:"launch-genericPage",launchNoSearchResults:"launch-noSearchResults",loadPushNotification:"loadPushNotification",dismissPushNotification:"dismissPushNotification",openPushNotification:"openPushNotification",setAlertRead:"setAlertRead",setAlertAbort:"setAlertAbort",setFeaturedContentAndPredictiveHelp:"setFeaturedContentAndPredictiveHelp",setForumsVisible:"setForumsVisible",setForumsVisibleViaConfig:"setForumsVisibleViaConfig",
setForumsHidden:"setForumsHidden",setContactUsFooter:"setContactUsFooter",setLaunchContactUs:"setLaunchContactUs",disabledGetSupportClick:"disabledGetSupportClick",setLinkCopyOpen:"setLinkCopyOpen",setLinkCopyClosed:"setLinkCopyClosed",searchRedirect:"searchRedirect",searchErrorClient:"search-error-client",setAthenaSummoned:"setAthenaSummoned",setAthenaBanished:"setAthenaBanished",setAhOpen:"setAhOpen-",setAhClose:"setAhClose-",setFbRate:"setFbRate",setFbClear:"setFbClear",setFbSend:"setFbSend",setPhAdopt:"setPhAdopt",
setPhOpen:"setPhOpen",setPhClose:"setPhClose",setPhDismiss:"setPhDismiss",setPhYes:"setPhYes",setPhNo:"setPhNo",setSizeActive:"",setSizeLarge:"setSizeLarge",setSizeSmall:"setSizeSmall",alertDiscovered:"alertDiscovered",alertMassDiscovered:"alertMassDiscovered",alertMassRead:"alertMassRead",alertSuppressed:"alertSuppressed",minimized:"minimized",noAlertToShow:"noAlertToShow",groupedAlertInnerDiscover:"groupedAlertInnerDiscover",notificationCard:"notificationCard",notificationsCount:"notificationsCount",
notificationCardDiscoverd:"notificationCardDiscoverd",notificationCardCategory:"notificationCardCat",notificationCategoryDiscovered:"notificationCatDiscovered"},action:{unhandledLink:"unhandledLink"}},ADDITIONAL_METADATA:"&additionalMetadata="},a={init:function(b){d.endpoint.host=b.host;b.hasOwnProperty("path")&&""!==b.path&&(d.endpoint.path=b.path);d.data=e.state("spaui-state");d.data||(d.data={},e.state.bind("spaui-state",function(b){d.data=b;a.initDataObj()}));a.initDataObj()},initDataObj:function(){var a=
"",h;for(h in d.data)d.data.hasOwnProperty(h)&&(a+="&"+h+"="+d.data[h]);d.endpoint.params=a},send:function(b,h,e){a.sendMetric(b,h,e,function(b,h,c,e,m){c=g.getErrorDetailsFromAjaxResponse(c,e);a.sendMetricFailure(d.FIRST_REQUEST_FAILED,h,c);a.sendRetry(b,h,0)})},sendMetric:function(b,h,g,f){if(d.data){var k=d.endpoint.protocol+d.endpoint.host+(h===z?d.endpoint.path:h),c=d.endpoint.params+"&requestId="+d.data.parentRequestId+"_"+d.endpoint.requestId;a.encodeAdditionalObj(b);a.encodePayloadObj(b);
b.errorDetails&&(b.additional=a.appendToAdditional(b.additional,"errorType",b.errorDetails.type),b.additional=a.appendToAdditional(b.additional,"errorJqueryStatus",b.errorDetails.jqueryStatus),b.additional=a.appendToAdditional(b.additional,"errorHttpStatus",b.errorDetails.httpStatus),b.additional=a.appendToAdditional(b.additional,"errorReadyState",b.errorDetails.readyState));b.isError?b.to="error-"+b.to:b.isPlatformError&&(b.to="error-platform-"+b.to);h=[b.from,b.where,b.to].join("_");a.oversized(h)&&
a.sendDroppedMetric(h,b);c+=b.additional?b.additional:"";c+=b.payload?b.payload:"";k=k+h+"?"+c;e.$.isFunction(f)&&(f=e.$.proxy(f,null,k,h));h={url:k};b.timeout&&(h.timeout=b.timeout);b=e.$.ajax(h).always(function(){g!==z&&e.$.isFunction(g)&&g()});e.$.isFunction(f)&&b.fail(f)}d.endpoint.requestId++},sendRetry:function(b,h,g){g<d.MAX_RETRIES?setTimeout(function(){e.$.ajax({url:b,timeout:d.TIMEOUT}).fail(function(d,e,c){a.sendRetry(b,h,g+1)})},d.RETRY_DELAY):a.sendMetricFailure(d.ALL_RETRIES_FAILED,
h)},sendHmd:function(b,h){a.send(b,d.endpoint.pathHmd,h)},oversized:function(a){return a.length>=d.MAXIMUM_SIZE},sendDroppedMetric:function(b,h){a.sendMetric({from:d.DROPPED_METRIC,where:d.DROPPED_METRIC,to:d.DROPPED_METRIC,additionalObj:{attempted:b}})},sendMetricFailure:function(b,h,e){b={from:d.METRIC_FAILURE,where:d.METRIC_FAILURE,to:b,additionalObj:{attempted:h}};e!==z&&(b.errorDetails=e);a.sendMetric(b)},encodeAdditionalObj:function(a){if(a.additionalObj){var h=[];Object.keys(a.additionalObj).forEach(function(d){h.push(d+
":"+a.additionalObj[d])});a.additional=d.ADDITIONAL_METADATA+encodeURIComponent(h.join("|"))}},encodePayloadObj:function(a){a.payloadObj&&(a.payload=g.formatObjectAsUrlParams(a.payloadObj,!0))},appendToAdditional:function(a,h,e){h=h+":"+e;return a=a===z||null===a||""===a?d.ADDITIONAL_METADATA+h:a+("|"+h)},validate:function(b){if(b)try{a.validOrThrownForEventPart(b,"from");a.validOrThrownForEventPart(b,"where");a.validOrThrownForEventPart(b,"to");if(b.additionalObj&&!e.$.isPlainObject(b.additionalObj))throw"METRICS.validate failed, additionalObj must be an object if set";
return!0}catch(d){throw d;}else throw"METRICS.validate failed, tracking is empty";},validOrThrownForEventPart:function(a,d){if(a[d]){if(-1!==a[d].indexOf("_"))throw"Failed to validate field '"+d+"' it should not contain underscores (_)";}else throw"Failed to validate field '"+d+"' it was empty";},sanitizeEventPart:function(a){return a.split("_").join("-")},overrideConfig:function(a){d=e.$.extend({},d,a)},returnRequestId:function(){return d.endpoint.requestId},returnParentRequestId:function(){return d.data.parentRequestId},
returnSession:function(){return d.data.session},returnIsSpoofer:function(){return d.data.isSpoofer},returnRegionId:function(){return d.data.regionId},returnAllData:function(){return d.data},returnAllParams:function(){return d.endpoint.params},returnNextChildRequestId:function(){var a=d.data.parentRequestId+"_"+d.endpoint.requestId;d.endpoint.requestId++;return a},returnAction:function(a){return d.map.action[a]},returnPlace:function(a){return d.map.place[a]},returnContext:function(a){return d.map.context[a]},
setSizeActive:function(a){d.map.place.setSizeActive=a},returnTopic:function(){return d.map.place.topic.text},returnTopicID:function(){return d.map.place.topic.id}};return{init:a.init,send:a.send,sendHmd:a.sendHmd,validate:a.validate,sanitizeEventPart:a.sanitizeEventPart,overrideConfig:a.overrideConfig,getSession:a.returnSession,getSpoofer:a.returnIsSpoofer,getRegionId:a.returnRegionId,getData:a.returnAllData,getParams:a.returnAllParams,getRequestId:a.returnRequestId,getParentRequestId:a.returnParentRequestId,
incrementChildRequestId:a.returnNextChildRequestId,getAction:a.returnAction,getPlace:a.returnPlace,getContext:a.returnContext,setSizeActive:a.setSizeActive,getTopic:a.returnTopic,getTopicID:a.returnTopicID}});ASPP.when("ASPA","spaui-metrics","spaui-history","spaui-content","spaui-state","spaui-notification-card-category","spaui-events","spaui-alerts","spaui-ui").register("spaui-notification-card",function(e,g,l,d,a,b,h,m,f){var k,c=null,q=[],t={init:function(a){t.hydrate(a);t.bind();h.subscribe(h.getName("notificationListUpdated"),
t.onNotificationListUpdated);h.subscribe(h.getName("notificationFetchComplete"),t.onNotificationFetchComplete);h.subscribe(h.getName("newPage"),t.onNewPage)},hydrate:function(a){k=a},bind:function(){k.delegate(".spaui-alert-load-all-node-outside","click",t.loadCardHandle);k.delegate(".spaui-notification-card-list-item","click",t.loadCategoryPageHandle);e.$("#sc-quicklinks-top").delegate("#spaui-pn-content .spaui-alert-view-notification-card","click",t.pushNotificationLoadAll)},pushNotificationLoadAll:function(a){t.loadCardHandle(a,
!0)},onNotificationListUpdated:function(a){t.updateNotificationsCount(a)},onNotificationFetchComplete:function(a){k.find(".spaui-notification-card-list").find('.spaui-content-loading[data-category-name="categoryName"]'.replace("categoryName",a)).hide()},onNewPage:function(a){a.type===d.getPageType("notificationCard")&&q.forEach(function(a){t.updateNotificationsCount(a);if(b.isFetchComplete(a))t.onNotificationFetchComplete(a)})},updateNotificationsCount:function(a){var c=k.find(".spaui-notification-card-list").find('.spaui-notification-card-count-bang[data-category-name="categoryName"]'.replace("categoryName",
a));a=b.getNotificationsCount(a);c&&(c.html(a),0<a?c.show():c.hide())},loadCardHandle:function(a,b){a.preventDefault();t.displayNotificationCard(b)},loadCategoryPageHandle:function(a){a.preventDefault();a=e.$(this).data("category-name");t.displayNotificationCategoryPage(a)},displayNotificationCard:function(b){f.getVisible()||f.summoner({});c=k.find(".spaui-alert").clone();var e=l.getAthenaUrlPrefix()+"athena-notification-card?requestId="+g.incrementChildRequestId();d.placeEndpoint("notificationCard",
a.enhanceUrl(e),function(){t.loadSingleAlert();t.initializeNotificationCategoryPage();g.send({from:l.getFrom(),where:b?g.getContext("pushNotification"):g.getContext("notificationCard"),to:g.getPlace("notificationCardDiscoverd"),additionalObj:{categories:q}})})},initializeNotificationCategoryPage:function(){var a=k.find(".spaui-notification-category-page-list").children();q=[];a.each(function(a,c){var d=e.$(c).clone();e.$(c).remove();var f=d.data("category-name");q.push(f);b.init(d,f)})},displayNotificationCategoryPage:function(a){d.placeElement(b.getTemplate(a),
"notificationCardCategory",function(){g.send({from:l.getFrom(),where:g.getContext("notificationCardCategory"),to:g.getPlace("notificationCategoryDiscovered"),additionalObj:{categoryName:a}});m.onLoadAllAlerts({categoryName:a})})},loadSingleAlert:function(){k.find(".spaui-notification-card-single-alert").append(c);m.dynamicHydrate()}};return{init:t.init}});ASPP.when("ASPA","spaui-metrics","spaui-history","spaui-content","spaui-state","spaui-ajax","spaui-util","spaui-events","spaui-alerts","spaui-alert-util",
"spaui-alert-metrics").register("spaui-notification-card-category",function(e,g,l,d,a,b,h,m,f,k,c){var q={maxRetry:5,timeBetweenRetries:5E3,contentFadeIn:300},t={},n={$categoryPageTemplate:null,fetchComplete:!1,moreNotificationsPresent:!0,$notifications:null,notificationIdList:[],retry:0},p={init:function(a,b){p.setContext(b,e.$.extend(!0,{},n));p.getContext(b).$categoryPageTemplate=a;p.fetchNotificationsByCategories(b)},fetchNotificationsByCategories:function(c){var d=l.getAthenaUrlPrefix()+"athena-notification-card/"+
c+"?requestId="+g.incrementChildRequestId();b.get(a.enhanceUrl(d),{},function(a){p.onUpdatedNotificationResponse(e.$(a.data),c)},function(a){p.retryFetch(c)})},onUpdatedNotificationResponse:function(a,b){var c=a.find(".spaui-alerts-all");p.processNotifications(c,b);p.getContext(b).moreNotificationsPresent=h.stringToBool(a.find("input#spaui-alerts-more-alerts-present")[0].value);m.publish(m.getName("notificationListUpdated"),b);f.dynamicHydrate();p.recordMetricsForNotificationsCountByCategory(b);p.retryFetch(b)},
retryFetch:function(a){p.getContext(a).retry++;if(p.shouldRetryFetch(a))e.delay(p.fetchNotificationsByCategories,q.timeBetweenRetries,a);else p.onFetchComplete(a)},processNotifications:function(a,b){var c=a.find(".spaui-alert"),d=p.getContext(b);null===d.$notifications&&(d.$notifications=a.empty(),d.$categoryPageTemplate.find(".spaui-notification-card-body").append(d.$notifications.clone()));if(!(0>=c.length)){var f=h.selectorToClass(".spaui-alert-animate");c.each(function(a,c){var h=e.$(c),g=k.getAlertDetails(h).id;
p.isNotificationNew(b,g)&&(h.hide(),h.addClass(f),d.notificationIdList.push(g),d.$notifications.append(h.clone()))});c=d.$notifications.find(".spaui-alert-animate").clone();d.$notifications.find(".spaui-alert-animate").removeClass(f);d.$categoryPageTemplate.find(".spaui-alerts-all").append(c);d.$categoryPageTemplate.find(".spaui-alert-animate").removeClass(f).fadeIn(q.contentFadeIn);p.onNotificationsPartialLoad(b,c)}},onNotificationsPartialLoad:function(a,b){var d={categoryName:a},f=[],e=[];b.find(".spaui-alert-info:visible").each(function(){f.push(h.gda(this,
"id"))});b.find(".spaui-alert-info.spaui-alert-fixed:visible").each(function(){e.push(h.gda(this,"id"))});0<f.length&&c.massDiscover(g.getContext("allAlerts"),f,d);0<e.length&&c.massRead(g.getContext("allAlerts"),e,d)},onFetchComplete:function(a){var b=p.getContext(a),c=b.$categoryPageTemplate;b.fetchComplete=!0;0>=p.getNotificationsCount(a)&&(c.find(".spaui-no-notification").fadeIn(q.contentFadeIn),c.find(".spaui-notification-card-footer").fadeIn(q.contentFadeIn));c.find(".spaui-notification-card-head-loader").hide();
m.publish("notificationFetchComplete",a)},recordMetricsForNotificationsCountByCategory:function(a){0===p.getContext(a).retry&&(a=e.$.extend(!0,{categoryName:a,notificationsCount:p.getNotificationsCount(a)},p.getNotificationCountByType(a)),g.send({from:l.getFrom(),where:g.getContext("notificationCardCategory"),to:g.getPlace("notificationsCount"),additionalObj:a}))},getNotificationCountByType:function(a){var b={};p.getVisibleNotifications(a).each(function(a,c){var d=e.$(c),d=k.getAlertDetails(d).type;
b[d]===z&&(b[d]=0);b[d]++});return b},isNotificationNew:function(a,b){return 0>p.getContext(a).notificationIdList.lastIndexOf(b)},shouldRetryFetch:function(a){a=p.getContext(a);return a.moreNotificationsPresent&&a.retry<=q.maxRetry},isFetchComplete:function(a){return p.getContext(a).fetchComplete},getNotificationsCount:function(a){return p.getVisibleNotifications(a).length},getVisibleNotifications:function(a){return p.getContext(a).$categoryPageTemplate.find(".spaui-alert").not(".spaui-alert-dismissed")},
getTemplate:function(a){return p.getContext(a).$categoryPageTemplate},overrideConfig:function(a){q=e.$.extend({},q,a)},getContext:function(a){return t[a]},setContext:function(a,b){t[a]=b}};return{init:p.init,getTemplate:p.getTemplate,isFetchComplete:p.isFetchComplete,getNotificationsCount:p.getNotificationsCount,overrideConfig:p.overrideConfig}});ASPP.when("ASPA","spaui-ui","spaui-session").register("spaui-overlay",function(e,g,l){var d=e.$(C),a={overlayActive:!1,fadeTime:200},b={createFullscreenOverlay:function(){a.overlayActive||
(a.overlayActive=!0,b.bindWindowResize(),b.recomputeSize(),g.hideClose(),g.hideResizer(),g.contentChanged())},removeOverlay:function(){a.overlayActive&&(a.overlayActive=!1,b.unbindWindowResize(),g.showClose(),g.showResizer(),l.isLargeSize()?g.makeLarge():g.makeSmall(),g.contentChanged())},bindWindowResize:function(){d.bind("resize",b.recomputeSize)},unbindWindowResize:function(){d.unbind("resize",b.recomputeSize)},recomputeSize:function(){var a=d.width();g.setSpecialSize(a,!0)},overrideConfig:function(b){a=
e.$.extend(a,b)},isActive:function(){return a.overlayActive}};return{createFullscreenOverlay:b.createFullscreenOverlay,removeOverlay:b.removeOverlay,overrideConfig:b.overrideConfig,isActive:b.isActive}});ASPP.when("ASPA","spaui-util","spaui-metrics","spaui-history","spaui-discovery","spaui-ajax").register("spaui-predictive",function(e,g,l,d,a,b){var h,m=!0,f=null,k={init:function(a){k.hydrate(a);k.bind()},hydrate:function(b){h=b;a.register("predictive","info",!1,k.adoptionCheck);f=d.getAugurUrlPrefix()+
"execute-workflow?"},bind:function(){h.delegate(".spaui-ph-expand-closed","click",k.show);h.delegate(".spaui-ph-expand-open","click",k.hide);h.delegate(".spaui-ph-dismiss","click",k.dismiss);h.delegate(".spaui-ph-item-feedback-yes","click",k.yes);h.delegate(".spaui-ph-item-feedback-no","click",k.no);h.delegate("#spaui-ph-dismiss-legal","mouseenter mouseleave",k.legal);h.delegate("#spaui-ph-view-legal","mouseenter mouseleave",k.legal)},getDetails:function(a){a=e.$(a.currentTarget).closest(".spaui-ph-item");
return{qid:a.data("question"),pid:e.$("#spaui-ph-header").attr("data-prediction"),rank:a.data("rank"),total:a.data("total"),workflowId:a.data("workflow")}},show:function(a){a.preventDefault();var b=k.getDetails(a);a=e.$(a.currentTarget);e.$("#spaui-ph-item-"+b.qid+"-closed").hide();e.$("#spaui-ph-item-"+b.qid+"-open").show();if(b.workflowId){var d=e.$("#spaui-ph-workflow-"+b.qid);0<d.length&&"N"===d.attr("spaui-ph-workflowdisplayed")&&(d.attr("spaui-ph-workflowdisplayed","Y"),k.displayWorkflow(b))}"true"!==
a.attr("data-logged")&&(a.attr("data-logged","true"),e.$.post("/help/track/api/send-user-action?"+k.getIdParams(b)));k.instrument(b,l.getPlace("setPhOpen"))},displayWorkflow:function(a){b.post(f+"workflowId="+a.workflowId+"&client=AthenaPH",{dataType:"html"},function(b){k.flush(a,b.data,!0)},function(b){k.flush(a,b.data,!1)})},flush:function(a,b,d){d?(e.$("#spaui-ph-workflow-"+a.qid).html(b),e.$("#spaui-ph-item-"+a.qid+"-feedback").show()):e.$("#spaui-ph-workflow-"+a.qid).parent().remove()},hide:function(a){a.preventDefault();
a=k.getDetails(a);e.$("#spaui-ph-item-"+a.qid+"-open").hide();e.$("#spaui-ph-item-"+a.qid+"-closed").show();k.instrument(a,l.getPlace("setPhClose"))},dismiss:function(a){a.preventDefault();a=k.getDetails(a);e.$.post("/help/track/api/send-feedback-text?feedbackText=dismissed&"+k.getIdParams(a));k.instrument(a,l.getPlace("setPhDismiss"));e.$("#spaui-ph-item-"+a.qid).remove()},yes:function(a){a.preventDefault();a=k.getDetails(a);e.$.post("/help/track/api/send-feedback?feedback=true&"+k.getIdParams(a));
e.$("#spaui-ph-item-"+a.qid+"-feedback").hide();e.$("#spaui-ph-item-"+a.qid+"-feedback-ui-yes").show();k.instrument(a,l.getPlace("setPhYes"))},no:function(a){a.preventDefault();a=k.getDetails(a);e.$.post("/help/track/api/send-feedback?feedback=false&"+k.getIdParams(a));e.$("#spaui-ph-item-"+a.qid+"-feedback").hide();e.$("#spaui-ph-item-"+a.qid+"-feedback-ui-yes").show();k.instrument(a,l.getPlace("setPhNo"))},getIdParams:function(a){return"id="+a.qid+"&prediction="+a.pid},instrument:function(a,b){l.send({from:d.getFrom(),
to:b,where:l.getContext("predictive"),payloadObj:{resultRank:a.rank,resultTotal:a.total},additionalObj:{questionId:a.qid,topicId:a.pid,workflowId:a.workflowId}})},legal:function(a){"mouseenter"===a.type&&(h.find("#spaui-ph-dismiss-legal-icon").addClass("on"),h.find("#spaui-ph-view-legal").addClass("on"));"mouseleave"===a.type&&(h.find("#spaui-ph-dismiss-legal-icon").removeClass("on"),h.find("#spaui-ph-view-legal").removeClass("on"))},adoptionCheck:function(){if(m){var a=g.gebi("spaui-ph-header");
if(a=a?g.gda(a,"prediction"):null)e.$.post("/help/track/api/send-adoption?predictionId="+a),m=!1}},preventAdoption:function(){m=!1}};return{init:k.init,preventAdoption:k.preventAdoption}});ASPP.when("ASPA","spaui-events","spaui-util","spaui-alert-util").register("spaui-push-notification",function(e,g,l,d){var a,b,h,m,f=!1,k={duration:{show:400,hide:300,minimize:300},severities:{HIGH:"urgent",MEDIUM:"alert",OPPORTUNITY:"opp",INFORMATION:"info"},showDismissClass:"spaui-pn-show-dismiss",showMinimizeClass:"spaui-pn-show-minimize"},
c={init:function(a){c.hydrate(a);c.bind()},hydrate:function(c){a=e.$("#spaui-templates");b=a.find("#spaui-push-notification");h=e.$("#sc-quicklink-help").find(".sc-ql-a").find(".sc-quick-txt");m=e.$("#sc-quicklinks-top")},bind:function(){C.addEventListener("resize",function(){f&&c.adjust()})},create:function(a,d,e,h,g){if(!f)return b.find("#spaui-pn-title").text(a),b.find("#spaui-pn-content").append(d),b.find(".spaui-alert-dismiss").remove(),b.attr("class",""),b.addClass(c.getClassName(e)),h?b.addClass(k.showMinimizeClass):
b.addClass(k.showDismissClass),g?(c.bindExpand(),b.removeClass("spaui-inline-alert")):(b.addClass("spaui-inline-alert"),c.expandPushNotification()),m.prepend(b),c.adjust(),f=!0,b},bindExpand:function(){b.click(c.expandPushNotification);b.removeClass("expanded")},bindDismissOrMinimize:function(){b.hasClass(k.showMinimizeClass)?b.find("#spaui-pn-title-bar").click(c.collapsePushNotification):b.hasClass(k.showDismissClass)&&b.find("#spaui-pn-close-icon").click(c.hidePushNotification)},hide:function(){var a=
b.data("id");d.hideSingleAlert(a,c.afterHideNotification)},isActive:function(){return f},expandPushNotification:function(){g.publish(g.getName("pushNotificationOpened"));b.unbind("click",c.expandPushNotification);b.addClass("expanded");var a=b.find("#spaui-pn-content");a.css("top",-1*a.height());a.animate({top:0},{duration:k.duration.show,complete:c.bindDismissOrMinimize})},collapsePushNotification:function(){g.publish(g.getName("pushNotificationMinimize"));b.find("#spaui-pn-title-bar").unbind("click",
c.collapsePushNotification);var a=b.find("#spaui-pn-content");a.animate({top:-1*a.height()},{duration:k.duration.minimize,complete:c.bindExpand})},hidePushNotification:function(){g.publish(g.getName("pushNotificationClosed"));c.hide()},afterHideNotification:function(){f=!1;b.removeClass("expanded");a.append(b)},adjust:function(){b.css("top",m.height());b.css("right",-l.getElementRightOffset(m));var a=b.find("#spaui-pn-arrow"),c=h.offset().left-b.offset().left,c=c+h.width()/2,c=parseInt(c-10,10);a.css("left",
c)},isValidSeverity:function(a){switch(a){case k.severities.HIGH:case k.severities.MEDIUM:case k.severities.OPPORTUNITY:case k.severities.INFORMATION:return!0}return!1},getClassName:function(a){if(a)return"spaui-pn-"+a.toLowerCase();throw"severity is not set!";}};return{init:c.init,create:c.create,hide:c.hide,isActive:c.isActive,HIGH:k.severities.HIGH,MEDIUM:k.severities.MEDIUM,OPPORTUNITY:k.severities.OPPORTUNITY,INFORMATION:k.severities.INFORMATION,overrideConfig:function(a){k=e.$.extend(k,a)}}});
ASPP.when("ASPA","spaui-metrics","spaui-history","spaui-util").register("spaui-rightclick",function(e,g,l,d){var a=null,b=null,h=null,m={init:function(a){m.populate(a);m.enhance();m.bind()},populate:function(f){a=f;b=e.$("#sc-quicklink-help");h=d.getContactUsFooterLink()},enhance:function(){b.attr("data-feature-name","scHelpLink");h.attr("data-feature-name","scGetSupportLink")},bind:function(){var d=function(a){a=e.$(a.target);m.handleRightClick(a)};a.bind("contextmenu",d);b.delegate("a","contextmenu",
d);h.bind("contextmenu",d);e.$(C).delegate("#spaui-push-notification","contextmenu",d)},handleRightClick:function(a){var b=a.closest("[data-feature-name]").data("feature-name");a=a.closest("a").attr("href");a=a!==z?d.getTopicIDFromLink(a):z;b={from:l.getFrom(),where:g.getContext("rightClick"),to:b};a!==z&&(b.additionalObj={helpTopicId:a});g.send(b)}};return{init:m.init}});ASPP.when("ASPA","spaui-util","spaui-history","spaui-session","spaui-metrics","spaui-content","spaui-search-suggestions","spaui-help",
"spaui-global-nav-search","spaui-events").register("spaui-search",function(e,g,l,d,a,b,h,m,f,k){var c={},q="Search",t=!1,n=null,p=!1,r={init:function(a,b){r.hydrate(a);r.bind();r.subscribe();q=c.search.attr("placeholder");f.init(r.externalSubmitSearch,r.externalSynchronizeSearchBoxValue);h.init(b,q)},hydrate:function(a){c.doc=e.$(document);c.spaui=a;c.search=a.find("#spaui-search-box");c.searchSection=a.find(".spaui-head-controls-search");c.searchIcon=a.find("#spaui-search-icon");c.searchFilter=a.find(".spaui-search-filter-wrapper");
c.searchFilterSelect=a.find(".spaui-search-filter");n=l.getAthenaUrlPrefix()+"athena-search"},bind:function(){c.searchIcon.click(r.clickSearch);c.search.focus(r.focusSearch);c.search.blur(r.blurSearch);c.doc.keydown(r.keyDown);c.search.keyup(r.synchronizeGlobalNavSearch);c.spaui.delegate("#spaui-toggle-forums","click",r.toggleForumsResultsClick);c.spaui.delegate(".spaui-search-trigger","click",r.handleSearchTriggerClick)},subscribe:function(){k.subscribe(k.getName("newPage"),r.handleNewPage)},toggleForumsResultsClick:function(b){b.preventDefault();
r.toggleForumResults(a.getContext("navSearch"))},toggleForumResults:function(b){var c=e.$("#spaui-toggle-forums"),d=(t=!t)?"exclude-label":"include-label",d=c.find("input").data(d);r.toggleForumsClasses(t);c.toggleClass("asp-button-selected",t);l.setSearchShowForums(t);a.send({from:l.getFrom(),to:t?a.getPlace("setForumsVisible"):a.getPlace("setForumsHidden"),where:b});c.find("input").val(d);c.find(".asp-button-text").html(d)},toggleForumsClasses:function(a){c.spaui.find(".spaui-search-results").toggleClass("showForums",
a)},clickSearch:function(a){a.preventDefault();c.search.trigger("focus");r.keyDown({keyCode:13})},focusSearch:function(){c.searchSection.addClass("on");c.searchIcon.addClass("on");h.newBind(c.search,r.suggestionsSearch,z,c.searchSection.width())},blurSearch:function(){c.searchSection.removeClass("on");c.searchIcon.removeClass("on")},synchronizeGlobalNavSearch:function(){var a=c.search.val();f.setSearchBoxValue(a)},keyDown:function(a){r.searchIsFocused()&&""!==e.$.trim(c.search.val())&&13===(a.keyCode||
a.which)&&r.submitSearch()},searchIsFocused:function(){return c.doc.attr("activeElement").id===c.search.attr("id")},suggestionsSearch:function(a){r.submitSearch(null,a)},submitSearch:function(f,h,k,g){e.$.isFunction(k)||(k=function(){});e.$.isFunction(g)||(g=function(){});var n=c.search.val();d.storeSearchQuery(n);f===z&&(f={});f=e.$.extend({from:l.getFrom(),where:a.getContext("navSearch")},f,{to:a.getPlace("search")});h?(k("help"),m.displayHelpTopic(h,null,f)):(l.setSearchQuery(n),l.setSearchStart(0),
l.setSearchFilter(c.searchFilterSelect.val()||"any"),l.pushPop(""),r.placeSearch(e.$.proxy(b.placeEndpoint,null,b.getPageType("search")),e.$.proxy(r.searchCompleted,null,k,g,f),e.$.proxy(r.redirectFilter,null,k,f)))},searchCompleted:function(b,d,f,h){h.isError?(f.isError=!0,f.errorDetails=h.errorDetails,d(h)):h.isPlatformError?(f.isPlatformError=!0,e.$("#spaui-error-search-retry").bind("click",function(a){g.gebi("spaui-search-icon").click()}),d(h)):(l.setSearchTotal(e.$("#spaui-content").find("#spaui-search-total").data("total")),
r.applyStandardMetricMetadata(f),t=!1,0<c.spaui.find(".spaui-search-result-help").length?r.toggleForumsClasses(t):(d=g.gebi("spaui-template-only-forum-results").innerHTML,c.spaui.find(".spaui-search-results").before(d),r.toggleForumResults(a.getContext("noHelpResults"))),b("search"),r.attemptToFillSearchPage());a.send(f)},handleSearchTriggerClick:function(a){a.preventDefault();var b=g.gda(a.currentTarget,"search");a=g.gda(a.currentTarget,"filter");a!==z&&c.searchFilterSelect.val(a);b!==z&&(c.search.val(b),
r.submitSearch())},externalSubmitSearch:function(a,b,d,f,e){c.search.val(a);r.submitSearch(b,d,f,e)},externalSynchronizeSearchBoxValue:function(a){c.search.val(a)},setSearchBoxValue:function(a){if(a===z||null===a)a="";a=decodeURIComponent(a);c.search.val(a);r.synchronizeGlobalNavSearch()},searchScroll:function(c){if(!p&&g.gebi("spaui-results")){c=e.$("#spaui-content").scrollTop();var d=e.$("#spaui-content").innerHeight(),f=e.$("#spaui-content").prop("scrollHeight");c+d>=f-l.getSearchScrollBuffer()&&
(l.setSearchStart(l.getSearchStart()+l.getSearchSize()),l.setSearchStartHistory(l.getSearchStart()),l.setSearchQuery(l.getSearchQueryHistory()),l.setSearchTotal(l.getSearchTotalHistory()),l.getSearchStart()+l.getSearchSize()>l.getSearchTotal()||(p=!0,r.placeSearch(b.placeEndpointAsAppend,function(b,c){var d={isError:!b,errorDetails:c,from:l.getFrom(),where:a.getContext("results"),to:a.getPlace("searchMore")};r.applyStandardMetricMetadata(d);a.send(d);p=!1;r.toggleForumsClasses(t);r.attemptToFillSearchPage()})))}},
redirectFilter:function(b,c,f){if(r.isSearchRedirectDom(f.content)){f=e.$(f.content).find("#spaui-redirect");var h=f.data("url"),k="unknown";h.match(/\/inventory/)?k="inventory":h.match(/\/gp\/orders/)?k="order":h.match(/\/skucentral/)&&(k="skucentral");b(k+"-redirect");b=f.data("type").split("_").join("-");d.setPinned(!1);a.send({from:c&&c.from!==z?c.from:l.getFrom(),where:a.getContext("results"),to:a.getPlace("searchRedirect"),additionalObj:{searchRedirect:b,query:l.getSearchQuery()},timeout:300},
z,function(){C.location.href=h});return!1}return!0},placeSearch:function(a,b,c){var d=g.formEncode(l.getSearchQuery());a(n,b,!0,!0,{data:"query="+d+"&start="+l.getSearchStart()+"&size="+l.getSearchSize()+"&content="+l.getSearchFilter(),contentType:"application/x-www-form-urlencoded; charset=UTF-8"},c)},attemptToFillSearchPage:function(){setTimeout(function(){r.searchScroll()},100)},handleNewPage:function(a){"search"===a.type&&r.rebindScroll();a.wentBack&&r.setSearchBoxValue(l.getSearchQueryHistory());
r.blurSearch();p=!1},rebindScroll:function(){c.spaui.find("#spaui-content").unbind("scroll");c.spaui.find("#spaui-content").bind("scroll",r.searchScroll)},isSearchRedirectDom:function(a){return 0<e.$(a).find("#spaui-redirect").length},applyStandardMetricMetadata:function(a){var b=["content="+l.getSearchFilter(),"start="+l.getSearchStart(),"size="+l.getSearchSize(),"query="+l.getSearchQuery()];a.payloadObj={queryString:b.join("|"),resultTotal:l.getSearchTotal()};b=g.truncateString(l.getSearchQuery(),
100,"...");a.additionalObj=e.$.extend(a.additionalObj,{query:b})}};return{setSearchBoxValue:r.setSearchBoxValue,externalSubmitSearch:r.externalSubmitSearch,externalKeyDown:r.externalKeyDown,bindGlobalNav:r.bindGlobalNav,init:r.init}});ASPP.when("ASPA","spaui-util","spaui-metrics","spaui-history","spaui-session","spaui-ajax","spaui-shim","spaui-weblabs").register("spaui-search-suggestions",function(e,g,l,d,a,b,h,m){var f={name:"spaui-search-suggestions",serviceUrl:null,lastRequestId:0,someResults:!1,
selectedResult:null,lastSearchQuery:null,searchIconMargin:27,dontHideOnNextBlur:!1,weblabActive:!1,enabled:!0,invokeSearchFunc:null,externalPlace:null,defaultWidth:300,enabledSearchSuggestions:!1,searchPlaceholder:null,requestTypingDelay:300,visible:!1},k={tools:{resultKind:"SellerCentralTool",kind:"tool",title:null,number:3,lineBreak:!1,priority:3},merged:{resultKind:"Merged",kind:"merged",title:null,number:3,lineBreak:!0,priority:1},autohelp:{resultKind:"PredictiveHelpAuto",kind:"autohelp",title:null,
number:3,lineBreak:!0,priority:2},previous:{resultKind:"previous",kind:"previous-search",title:null,number:3,priority:0}},c={},q={init:function(a,b){g.gebi("spaui-search-suggestions")&&(f.weblabActive=!0);f.enabledSearchSuggestions=a;f.searchPlaceholder=b;f.serviceUrl=d.getAthenaUrlPrefix()+"suggest-search/";q.hydrate()},hydrate:function(){c.templateHolder=e.$("#spaui-template-search-suggestions");c.widget=e.$("#spaui-search-suggestions");c.list=e.$("#spaui-search-suggestions-list");c.loadingGif=
e.$('<span class="spaui-loading-gif-medium spaui-suggestions-loading">');Object.keys(k).forEach(function(a){k[a].title=c.widget.data(a+"-title")})},newBind:function(a,b,d,e){q.isDisabled()||(e===z&&(e=f.defaultWidth),q.resize(e),q.unbind(c.input),q.bind(a),a.after(c.widget),c.widget.css("top",a.outerHeight()-1),f.invokeSearchFunc=b,f.externalPlace=d,q.show())},unbind:function(a){a&&(c.templateHolder.append(c.widget),a.unbind("focus",q.show),a.unbind("blur",q.onBlur),a.unbind("keydown",q.onKeyDown),
a.unbind("input",q.onChange),f.invokeSearchFunc=null,f.currentPlace=null)},bind:function(a){c.input=a;c.input.attr("autocomplete","off");c.input.focus(q.show);c.input.blur(q.onBlur);c.input.keydown(q.onKeyDown);c.input.bind("input",null,q.onChange)},onBlur:function(a){f.dontHideOnNextBlur||q.hide();f.dontHideOnNextBlur=!1},onKeyDown:function(a){if(!q.isDisabled()&&(40===a.keyCode||38===a.keyCode||13===a.keyCode)){var b=!0;switch(a.keyCode){case 40:q.moveSelectionDown();break;case 38:q.moveSelectionUp();
break;case 13:q.hide();var b=!1,c=q.getSelectedSuggestion();c&&(b=q.handleSpecialSuggestionSelection(c,a))}return b?(a.preventDefault(),a.stopImmediatePropagation(),!1):!0}},onChange:function(a){q.resetSelection(!1);g.delayFunc(function(){var a=c.input.val();q.search(a)},f.requestTypingDelay)},resize:function(a){q.isDisabled()||c.widget.width(a-f.searchIconMargin)},show:function(a){a=c.input.val();f.visible=!0;""===a||a===f.searchPlaceholder?q.loadPreviousSearchSuggestions():f.someResults?c.widget.addClass("shown"):
(a=c.input.val(),q.search(a))},hide:function(){c.widget.removeClass("shown");f.visible=!1},showLoading:function(){c.widget.addClass("shown");c.list.empty();c.widget.append(c.loadingGif)},hideLoading:function(){c.loadingGif.remove()},enable:function(){f.enabled=!0},disable:function(){f.enabled=!1},isDisabled:function(){return!f.enabled||!f.weblabActive},search:function(a){a=a.trim();if(!q.invalid(a)){var c=++f.lastRequestId;""===a?q.showSearchResults(c,!1,[],a):(q.showLoading(),q.instrumentRequest(),
b.get(f.serviceUrl+encodeURIComponent(a)+"/",{dataType:"json"},e.$.proxy(function(a,b,c){q.showSearchResults(a,!0,b,c.data)},null,c,a),function(a){q.hide();q.instrumentFailure()}))}},invalid:function(a){return q.isDisabled()||!f.enabledSearchSuggestions||a===f.lastQuery||a===f.searchPlaceholder},showSearchResults:function(a,b,c,d){q.isDisabled()||a!==f.lastRequestId||(q.hideLoading(),f.lastQuery=c,q.displayResults(d,b))},displayResults:function(a,b){if(!q.isDisabled())if(b&&q.instrumentResponse(a.length),
a&&0!==a.length){f.someResults=!0;var d=c.input.val();c.list.empty();var e=1,h=Object.keys(k).map(function(a){return k[a]});h.sort(function(a,b){return a.priority-b.priority});h.forEach(function(b){var f=q.getFilteredResults(b,a);f.forEach(function(a,f){b.title&&0===f&&c.list.append('<span class="suggestion-group-title">'+b.title+('<span class="spaui-sprite spaui-suggestion-icon spaui-suggestion-icon-'+b.kind+'"></span>')+"</span>");c.list.append(q.generateSearchSuggestionItem(d,a,b,a.link,a.topicId,
e));e++});b.lineBreak&&0<f.length&&c.list.append('<div class="suggestion-group-separator">')});f.lastSearchQuery=d;f.lastNumResults=e-1;q.determineShow();q.resetSelection();q.rebindList(e)}else c.list.empty(),c.widget.removeClass("shown"),f.someResults=!1},determineShow:function(){c.widget.toggleClass("shown",q.searchIsFocused())},searchIsFocused:function(){return f.visible||c.input.is(":focus")||document.activeElement.id===c.input.attr("id")},getFilteredResults:function(a,b){return b.filter(function(b){return b.kind===
a.resultKind}).slice(0,a.number).map(function(b){var c=q.getTopicIDFromResult(b),d=q.generateLinkText(a,b,c);return e.$.extend(b,{topicId:c,link:d})}).filter(function(a){return null!==a.link})},getTopicIDFromResult:function(a){try{var b=null,c=JSON.parse(a.data);e.$.isArray(c)?b=c[0].HELP_TOPIC_ID:"number"===typeof c&&(b=c);return b}catch(d){return null}},generateLinkText:function(a,b,c){var d="/hz/help/search?query="+b.text;if("SellerCentralTool"===a.resultKind)try{d=JSON.parse(b.data).ToolPath}catch(f){return null}else if(q.isHelpArticle(a))if(c)d=
"/gp/help/"+c;else return null;return d},generateSearchSuggestionItem:function(a,b,c,d,f,h){a=q.getHighlightedContent(a,b.text);d=e.$('<a class="spaui-suggestion-'+c.kind+'" href="'+d+'">'+a+"</a>");d.addClass("result-link");d.attr("data-name",b.text);d.attr("data-kind",c.kind);d.attr("data-rank",h);null!==f&&q.isHelpArticle(c)&&d.attr("data-topic-id",f);return d},isHelpArticle:function(a){return"PredictiveHelp"===a.resultKind||"PredictiveHelpAuto"===a.resultKind},handleSpecialSuggestionSelection:function(b,
c){var d=!1;if(b.hasClass("spaui-suggestion-tool"))g.redirect(b.attr("href")),a.setPinned(!1),c.preventDefault(),d=!0;else if(b.hasClass("spaui-suggestion-help")||b.hasClass("spaui-suggestion-autohelp"))d=g.gda(b,"topic-id"),f.invokeSearchFunc(d),q.hide(),c.preventDefault(),d=!0;return d},rebindList:function(a){c.list.find(".result-link").each(function(){e.$(this).attr("data-total",a-1)});c.list.find("a").mousedown(function(a){f.dontHideOnNextBlur=!0});c.list.find("a").click(function(a){q.instrumentClick(this);
var b=e.$(this);if(q.isSearchTypeSuggestion(b))return c.input.val(g.gda(b,"name")),f.invokeSearchFunc(),q.hide(),a.stopImmediatePropagation(),!1;q.handleSpecialSuggestionSelection(b,a)})},isSearchTypeSuggestion:function(a){return a.hasClass("spaui-suggestion-previous-search")||a.hasClass("spaui-suggestion-merged")},getHighlightedContent:function(a,b){a=a.replace(/\W+/g," ");a=a.replace(/\s+/g," ");var c=a.split(" "),d={},f;for(f in c)if(c.hasOwnProperty(f)){var e=c[f];d.hasOwnProperty(e)||""===e||
(d[e]=!0)}c=Object.keys(d).join("|");return b.replace(new RegExp("("+c+")","gi"),'<span class="highlight_text">$1</span>')},instrumentClick:function(a){a&&q.instrumentSend("result-selected",{query:c.input.val(),name:g.gda(a,"name"),kind:g.gda(a,"kind"),rank:g.gda(a,"rank"),total:g.gda(a,"total")})},instrumentRequest:function(){q.instrumentSend("request",{query:c.input.val()})},instrumentResponse:function(a){q.instrumentSend("response",{query:c.input.val(),total:a})},instrumentFailure:function(){q.instrumentSend("request-error",
{query:c.input.val()})},instrumentSend:function(a,b){l.send({from:f.externalPlace?f.externalPlace:d.getFrom(),to:a,where:l.getContext("searchSuggestions"),additionalObj:b})},resetSelection:function(a){f.selectedResult=null;q.changeSelection(a)},moveSelectionDown:function(){null===f.selectedResult?f.selectedResult=0:(f.selectedResult++,f.selectedResult>=f.lastNumResults&&(f.selectedResult=null));q.changeSelection()},moveSelectionUp:function(){null===f.selectedResult?f.selectedResult=f.lastNumResults-
1:(f.selectedResult--,0>f.selectedResult&&(f.selectedResult=null));q.changeSelection()},changeSelection:function(a){a=a===z?!0:a;c.list.find("a").removeClass("selected-result");var b=c.input.val(),d=f.lastSearchQuery;null!==f.selectedResult&&0<=f.selectedResult&&f.selectedResult<f.lastNumResults&&(d=q.getSelectedSuggestion(),d.addClass("selected-result"),d=g.gda(d,"name"));a&&b!==d&&c.input.val(d)},getSelectedSuggestion:function(){return null===f.selectedResult?null:c.list.find("a").eq(f.selectedResult)},
loadPreviousSearchSuggestions:function(){var b=[];a.getLastSearches().forEach(function(a){b.push({kind:"previous",text:g.stripHtmlTags(a)})});q.displayResults(b,!1)},overrideConfig:function(a){f=e.$.extend({},f,a)}};return{overrideConfig:q.overrideConfig,hide:q.hide,showLoading:q.showLoading,hideLoading:q.hideLoading,enable:q.enable,disable:q.disable,newBind:q.newBind,resize:q.resize,init:q.init}});ASPP.when("ASPA","spaui-metrics","spaui-history","spaui-util","spaui-events").register("spaui-session",
function(e,g,l,d,a){var b={storage:localStorage,JSON:JSON,numOfSearchesToTrack:3,MAX_ATHENA_SIZE:51200},h={id:null,data:{article:{topicID:null,link:null},closeAffordance:{show:!0},pinned:{is:!1},preview:{show:!0},size:{large:!1},lastSearches:[],dismissed:!1,timeSellerViewingArticle:null,persistentDA:null}},m={init:function(){g.getSession()&&(h.id=g.getSession());if("undefined"===typeof b.JSON||"undefined"===typeof b.storage)g.send({from:l.getFrom(),to:"localStorage",where:"info",additional:"&additionalMetadata=no-session-storage-support"});
else try{var a=b.JSON.parse(b.storage.getItem("spaui"));m.updateCfgData(a)}catch(d){}},updateCfgData:function(a){a.id&&a.id===h.id?h.data=e.$.extend(!0,{},h.data,a.data):localStorage.removeItem("spaui")},returnTopicID:function(){return h.data.article.topicID},returnTopicURL:function(){return h.data.article.link},isLargeSize:function(){return h.data.size.large},returnPinned:function(){return h.data.pinned.is},returnPreview:function(){return h.data.preview.show},setPreview:function(a){h.data.preview.show=
a;m.update()},setPinned:function(a){h.data.pinned.is=a;m.update()},setTopicID:function(a){h.data.article.topicID=a;m.update()},setTopicURL:function(a){h.data.article.link=a;m.update()},returnCloseAffordance:function(){return h.data.closeAffordance.show},setCloseAffordance:function(a){h.data.closeAffordance.show=a;m.update()},setIsLarge:function(a){h.data.size.large=a;m.update()},setTopic:function(a){m.setTopicID(a);m.setTopicURL(a)},update:function(){if("undefined"===typeof b.storage||"undefined"===
typeof b.JSON)return!1;var a=b.JSON.stringify(h);if(a.length>b.MAX_ATHENA_SIZE)return!1;try{b.storage.setItem("spaui",a)}catch(d){return!1}return!0},getLastSearches:function(){return h.data.lastSearches},getWasDismissed:function(){return h.data.dismissed},setWasDismissed:function(a){h.data.dismissed=a;m.update()},getTimeSellerViewingArticle:function(){return h.data.timeSellerViewingArticle},setTimeSellerViewingArticle:function(a){h.data.timeSellerViewingArticle=a;m.update()},revertSellerToInfoCard:function(){m.setTopic(null)},
storeSearchQuery:function(a){h.data.lastSearches.unshift(a);h.data.lastSearches=d.getUniqueArray(h.data.lastSearches);h.data.lastSearches.splice(b.numOfSearchesToTrack,h.data.lastSearches.length);m.update()},storePersistentDA:function(a){h.data.persistentDA=a;if(!m.update())throw m.clearPersistentDA(),"Storage Space Exceeded or Not Available.";},getPersistentDA:function(){return h.data.persistentDA},clearPersistentDA:function(){h.data.persistentDA=null;m.update()},mockConfig:function(a){Object.keys(a).forEach(function(d){b[d]=
a[d]})}};return{setTopic:m.setTopic,setCloseAffordance:m.setCloseAffordance,getCloseAffordance:m.returnCloseAffordance,setTopicID:m.setTopicID,setIsLarge:m.setIsLarge,setTopicURL:m.setTopicURL,setPinned:m.setPinned,setPreview:m.setPreview,getPreview:m.returnPreview,getPinned:m.returnPinned,isLargeSize:m.isLargeSize,getTopicID:m.returnTopicID,getTopicURL:m.returnTopicURL,getLastSearches:m.getLastSearches,getWasDismissed:m.getWasDismissed,setWasDismissed:m.setWasDismissed,getTimeSellerViewingArticle:m.getTimeSellerViewingArticle,
setTimeSellerViewingArticle:m.setTimeSellerViewingArticle,revertSellerToInfoCard:m.revertSellerToInfoCard,storeSearchQuery:m.storeSearchQuery,storePersistentDA:m.storePersistentDA,getPersistentDA:m.getPersistentDA,clearPersistentDA:m.clearPersistentDA,updateCfgData:m.updateCfgData,mockConfig:m.mockConfig,init:m.init}});ASPP.when("spaui-browser-support").register("spaui-shim",function(e){var g={init:function(){e.definePropertyIsSupported()&&(g.objectKeys(),g.trim(),g.endsWith(),g.arrayIndexOf(),g.foreach(),
g.filter(),g.include(),g.map())},objectKeys:function(){Object.keys||(Object.keys=function(e){var d=[],a;for(a in e)e.hasOwnProperty(a)&&d.push(a);return d})},trim:function(){"function"!==typeof String.prototype.trim&&Object.defineProperty(String.prototype,"trim",{value:function(){return this.replace(/^\s+|\s+$/g,"")}})},endsWith:function(){String.prototype.endsWith||Object.defineProperty(String.prototype,"endsWith",{value:function(e,d){var a=this.toString();if("number"!==typeof d||!isFinite(d)||Math.floor(d)!==
d||d>a.length)d=a.length;d-=e.length;a=a.indexOf(e,d);return-1!==a&&a===d}})},arrayIndexOf:function(){Array.prototype.indexOf||Object.defineProperty(Array.prototype,"indexOf",{value:function(e,d){var a;if(null===this||this===z)throw new TypeError('"this" is null or not defined');var b=Object(this),h=Math.abs(b.length);if(0===h)return-1;a=+d||0;Infinity===Math.abs(a)&&(a=0);if(a>=h)return-1;for(a=Math.max(0<=a?a:h-Math.abs(a),0);a<h;){if(a in b&&b[a]===e)return a;a++}return-1}})},foreach:function(){Array.prototype.forEach||
Object.defineProperty(Array.prototype,"forEach",{value:function(e,d){var a,b;if(null===this)throw new TypeError(" this is null or not defined");var h=Object(this),g=h.length>>>0;if("function"!==typeof e)throw new TypeError(e+" is not a function");1<arguments.length&&(a=d);for(b=0;b<g;){var f;b in h&&(f=h[b],e.call(a,f,b,h));b++}}})},filter:function(){Array.prototype.filter||Object.defineProperty(Array.prototype,"filter",{value:function(e){if(void 0===this||null===this)throw new TypeError;var d=Object(this),
a=d.length>>>0;if("function"!==typeof e)throw new TypeError;for(var b=[],h=2<=arguments.length?arguments[1]:void 0,g=0;g<a;g++)if(g in d){var f=d[g];e.call(h,f,g,d)&&b.push(f)}return b}})},include:function(){Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,d){var a=Object(this),b=parseInt(a.length,10)||0;if(0===b)return!1;var h=parseInt(d,10)||0;0<=h||(h=b+h,0>h&&(h=0));for(var g;h<b;){g=a[h];if(e===g||e!==e&&g!==g)return!0;h++}return!1}})},map:function(){Array.prototype.map||
Object.defineProperty(Array.prototype,"map",{value:function(e,d){var a,b,h;if(null===this)throw new TypeError(" this is null or not defined");var g=Object(this),f=g.length>>>0;if("function"!==typeof e)throw new TypeError(e+" is not a function");1<arguments.length&&(a=d);b=Array(f);for(h=0;h<f;){var k;h in g&&(k=g[h],k=e.call(a,k,h,g),b[h]=k);h++}return b}})}};return{init:g.init}});ASPP.when("ASPA","spaui-util","spaui-theming").register("spaui-state",function(e,g,l){var d,a,b,h,m,f,k,c={showBrowseAllHelpOnLoad:!0},
q={autoSummonParam:"spaui-auto-summon",helpSummonParam:"spaui-help-topic"},t={init:function(a){t.initCfg(a);t.override()},initCfg:function(c){d=c.location.search.split(/[\?&]+/);a=encodeURIComponent(document.getElementsByTagName("title")[0].innerHTML);b=c.location.pathname.split(/\/ref=/)[0];h=encodeURIComponent(c.location.hash);m="";f={title:"spaui",url:"spaui-url",spauiDebug:"spauiDebug",auiDebug:"1",stringDebug:"true",auiReset:"1",athenaNotificationMockType:z};k=c.location.search},override:function(){var c=
d.length,e,h={};for(e=0;e<c;e++){var k=d[e].split(/\=/);k[0]===f.title&&(a=k[1]);k[0]===f.url&&(b=k[1]);k[0]===f.spauiDebug?(h.spauiDebug="1",h.auiDebug="1",h.auiReset="1"):k[0]in f&&(h[k[0]]=f[k[0]]||k[1])}m=g.formatObjectAsUrlParams(h,!0)},getState:function(a){return c[a]},setState:function(a,b){c[a]=b},isParamPresent:function(a){return-1!==k.indexOf(a)},isOnUrl:function(a){return a instanceof RegExp?a.test(b):-1!==b.indexOf(a)},isAnySummoningParamPresent:function(){for(var a=Object.keys(q),b=0;b<
a.length;b++)if(t.isParamPresent(q[a[b]]))return!0;return!1},getParamValue:function(a){var b=k,c=b.indexOf(a);if(0>c)return z;a=b.indexOf("=",c);c=b.indexOf("&",c);return 0>a||a>c&&-1<c?z:0>c?b.substring(a+1):b.substring(a+1,c)},enhanceUrl:function(c){c=c.split("#");-1!==c[0].indexOf("?")?c[0]+=c[0].endsWith("&")?"":"&":c[0]+="?";c[0]=c[0]+"pageTitle="+a+"&pageUrl="+b+"&pageHash="+h+m+"&theme="+l.getTheme();return c.join("#")}};return{init:t.init,showBrowseAllHelpOnLoad:e.$.proxy(t.getState,null,
"showBrowseAllHelpOnLoad"),setShowBrowseAllHelpOnLoad:e.$.proxy(t.setState,null,"showBrowseAllHelpOnLoad"),isParamPresent:t.isParamPresent,isAnySummoningParamPresent:t.isAnySummoningParamPresent,getParamValue:t.getParamValue,summoningParams:q,enhanceUrl:t.enhanceUrl,isOnUrl:t.isOnUrl}});ASPP.when("ASPA").register("spaui-theming",function(e){var g="",l=!1,d=!1,a=999;return{init:function(){var b=e.state("spaui-theming-state");g=b.theme;l="true"===b.hideFeedbackOnInfoCard;d="true"===b.hideAllAlerts;
a=parseInt(b.hideAlertLevel,10)},getTheme:function(){return g},isFeedbackDisabledOnInfoCard:function(){return l},shouldHideAlerts:function(b){return d||b>a}}});ASPP.when("ASPA","spaui-util","spaui-state","spaui-history","spaui-metrics","spaui-ui","spaui-content","spaui-events","spaui-search","spaui-help","spaui-alerts","spaui-contact-deflection").register("spaui-triggers",function(e,g,l,d,a,b,h,m,f,k,c,q){var t=null,n=null,p={},r={init:function(a){p.athenaHome=a.athenaHome;r.checkForAutoSummonParam();
r.checkForPinRequest(g.gebi("spaui-pin-request"));r.checkForTabbedContent(g.gebi("spaui-hash"));r.addLegacyLinkClickListener(a);e.$("body ").delegate(".spaui-trigger","click",r.handleClick);C.ATHENA_DISABLE_EXTERNAL_LINK_ONCLICK=!0;a.footerContactUs&&r.bindContactUsLinks()},bindContactUsLinks:function(){var a=g.getContactUsFooterLink();1===a.length&&(a.addClass("spaui-trigger"),a.attr("data-spaui",'{"type":"contact-us","data":{"page":"sx-athena","context":"contactusfooter"}}'),a.attr("data-href",
a.attr("href")),a.removeAttr("href"))},checkForAutoSummonParam:function(){if(l.isParamPresent(l.summoningParams.autoSummonParam))b.summoner({where:a.getContext("autoSummonParam")});else if(l.isParamPresent(l.summoningParams.helpSummonParam)){var c=l.getParamValue(l.summoningParams.helpSummonParam);k.displayHelpTopic(c,null,{where:a.getContext("autoSummonHelpParam")});b.summoner({where:a.getContext("autoSummonHelpParam"),additionalObj:{topicID:c}})}},checkForPinRequest:function(a){a&&b.summoner({external:!0})},
checkForTabbedContent:function(a){a&&(t=a,n=g.gda(t,"regex"),"onhashchange"in C&&(C.onhashchange=r.hashChange))},hashChange:function(b){var c=C.location.hash;c.match(n)&&h.placeFeaturedAndPredictive(function(b,e){a.send({isError:!b,errorDetails:e,from:d.getFrom(),where:a.getContext("externalTrigger"),to:a.getPlace("setFeaturedContentAndPredictiveHelp"),additionalObj:{action:"tabSwitch",hash:c}})})},handleClick:function(a){if("undefined"!==typeof JSON)try{var c=JSON.parse(g.gda(a.currentTarget,"spaui"));
c.data.href=a.currentTarget.href;"topic"===c.type&&(a.preventDefault(),r.placeTopic(c.data));"page"===c.type&&(a.preventDefault(),r.placePage(c.data));"search"===c.type&&(a.preventDefault(),r.placeSearch(c.data));if("forum"===c.type)return{error:"forums are not yet supported."};"contact-us"===c.type&&r.handleContactUs(a,c.data);b.getVisible()||b.summoner({external:!0})}catch(d){}},handleContactUs:function(c,e){var h;c.preventDefault();var f=b.getVisible(),k=q.isActive();f||k?h=a.getPlace("disabledGetSupportClick"):
(p.athenaHome({preventDefault:function(){}}),h=a.getPlace("setContactUsFooter"));f||b.summoner({external:!1});k?q.displayDeflectionCard(a.getContext("scFooter"),!f):a.send({from:d.getFrom(),to:h,where:a.getContext("trigger")})},placeTopic:function(b){k.displayHelpTopic(b.id,b.href,{where:a.getContext("externalTrigger"),additionalObj:{client:b.page,context:b.context}},b.bookmark)},placePage:function(d){var e=d.id.toLowerCase();if("home"===e)if(b.isSummoned())m.publish(m.getName("goHome"));else{var h=
function(){m.publish(m.getName("goHome"));m.unsubscribe("summon",h)};m.subscribe("summon",h)}else d={where:a.getContext("externalTrigger"),additionalObj:{page:d.page,context:d.context}},"browse"===e&&k.displayBrowseAllHelp(d),"alerts"===e&&c.displayAllAlerts(d)},placeSearch:function(b){f.externalSubmitSearch(decodeURIComponent(b.query),{where:a.getContext("externalTrigger"),additionalObj:{client:b.page,context:b.context}})},parseLinkHref:function(){var a=/openModalDialog\('(.*)'\)/,b=/itemID=?([0-9]+)/,
c=[C.location.protocol,"//",C.location.hostname,"/"].join("");return function(d){d=(a.exec(d)||[])[1];var e=(b.exec(d)||[])[1];return d&&e?{href:[c,"gp/help/help-popup.html?itemID=",e].join(""),id:e}:!1}}(),handleLegacyLinkClick:function(a){if("object"!==typeof a||!a.target)return!1;a=r.parseLinkHref(a.target.href);if("object"!==typeof a)return!1;r.placeTopic({id:a.id,page:"campaign-manager",context:"page",href:a.href,bookmark:""});b.getVisible()||b.summoner({external:!0});return!0},addLegacyLinkClickListener:function(a){a=
a||{};a.location=a.location||{};var b=a.location.pathname||C.location.pathname;a=0===(a.location.hash||C.location.hash).indexOf("#/hz/cm");if(0!==b.indexOf("/hz/cm")&&!a)return!1;e.$(document).bind("click",function(a){r.handleLegacyLinkClick(a)&&a.preventDefault()});return!0}};return{init:r.init}});ASPP.when("ASPA","spaui-util","spaui-session","spaui-history","spaui-metrics","spaui-predictive","spaui-search-suggestions","spaui-featured-content","spaui-events","spaui-theming").register("spaui-ui",
function(e,g,l,d,a,b,h,m,f,k){var c,q,t,n,p,r,A,v,x,z,F,G,w={active:!1,closeAffordance:{delay:1E3,fade:1250},duration:{show:200,hide:300,fbConfirm:2E3,spooferDelay:300,contentFadeIn:300},distance:null,regularSize:410,externalSquishee:"#athena-controlled-width-area",ph:{adopt:!0},resize:{duration:250,percentage:.4,maximum:575},spooferHeight:0,squish:!1,visible:!1,specialSizeStyleMin:500},y={init:function(a){y.hydrate(a);y.bind();y.handleSpooferBar()},hydrate:function(a){c=e.$(C);q=a;t=a.find(".spaui-head-controls-search");
n=a.find(".spaui-head-controls-search #spaui-search-icon");p=a.find(".spaui-head-controls-pop");a.find("#spaui-head-controls");r=a.find("#spaui-close");A=a.find("#spaui-head-controls-close-affordance");v=e.$("#sc-quicklink-help").find("a");x=e.$("#helpMenuID").find("a");z=a.find("#spaui-resize");F=e.$(w.externalSquishee);G=e.$("#globalActionBar");0!==F.length&&(w.squish=!0);w.distance=w.regularSize},bind:function(){v.click(y.summon);x.click(y.summon);r.click(y.banish);A.hover(y.closeAffordHover);
v.hover(y.triggerHover);z.click(y.resize);0!==G.length&&c.scroll(y.windowScroll)},initialState:function(){l.isLargeSize()?y.makeLarge():y.makeSmall()},summon:function(a){a.preventDefault();f.publish(f.getName("triggerSummon"));y.summoner({})},summoner:function(a,b){y.isSummoned()||(w.active=!0,q.css("display","block"),y.setSize(w.distance),w.squish&&F.animate({width:w.distance},w.duration.show),q.animate({marginRight:0},w.duration.show,function(){y.summoned(a,b)}))},summoned:function(b,c){l.setPinned(!0);
l.setPreview(!1);var h="";b.where?h=b.where:(h=b.session?a.getContext("session"):a.getContext("trigger"),b.external&&(h=a.getContext("externalTrigger")),b.preload&&(h=a.getContext("preload")));var g={theme:k.getTheme()};b.additionalObj&&e.$.extend(g,b.additionalObj);a.send({from:d.getFrom(),to:a.getPlace("setAthenaSummoned"),where:h,additionalObj:g});w.visible=!0;w.active=!1;y.closeAffordance();f.publish(f.getName("summon"));e.$.isFunction(c)&&c()},banish:function(a){a.preventDefault();l.setWasDismissed(!0);
y.banisher()},banisher:function(a){f.publish(f.getName("dismissed"));w.active||(w.active=!0,w.squish&&F.animate({width:0},w.duration.hide),q.animate({marginRight:"-="+w.distance},w.duration.hide,function(){y.banished(a)}))},banished:function(b){q.css("display","none");l.setPinned(!1);b=e.$.extend({from:d.getFrom(),where:a.getContext("header"),to:a.getPlace("setAthenaBanished")},b);a.send(b);w.visible=!1;w.active=!1},isSummoned:function(){return w.active||w.visible},resize:function(a){a.preventDefault();
y.resizer(a)},resizer:function(a){l.isLargeSize()?y.makeSmall(!0):y.makeLarge(!0)},makeSmall:function(b){b&&l.isLargeSize()&&a.setSizeActive(a.getPlace("setSizeSmall"));l.setIsLarge(!1);y.resetSpecialClasses();z.removeClass("spaui-resize-large");y.setSize(w.regularSize)},makeLarge:function(b){b&&!l.isLargeSize()&&a.setSizeActive(a.getPlace("setSizeLarge"));l.setIsLarge(!0);y.resetSpecialClasses();z.addClass("spaui-resize-large");y.setSize(y.calculateLargeWidth())},setSpecialSize:function(a,b){a>w.specialSizeStyleMin?
q.addClass("spaui-special-sizing"):y.resetSpecialClasses();y.setSize(a,!1,b)},resetSpecialClasses:function(){q.removeClass("spaui-special-sizing")},setSize:function(a,b,c){w.distance=a;a=y.getSearchSize(w.distance);w.visible&&!c?(w.squish&&F.animate({width:w.distance},w.resize.duration),b||q.animate({width:w.distance},w.resize.duration,y.resized),t.animate({width:a},w.resize.duration,y.searchResized)):(q.width(w.distance),t.width(a));w.visible||q.css("margin-right","-"+w.distance+"px");h.resize(a+
n.width()-1)},searchResized:function(){e.$(this).css("overflow","visible")},resized:function(){var b;b="<style>"+("#spaui {width:"+w.distance+"px;}");b+="#spaui-next {right:-"+w.distance+"px;}";b+="#spaui-prev {right:"+w.distance+"px;}";b+="</style>";g.gebi("spaui-css-override").innerHTML=b;b=a.getPlace("setSizeActive");""!==b&&a.send({from:d.getFrom(),to:b,where:a.getContext("header")})},getSearchSize:function(a){a-=30;"none"!==p.css("display")&&(a-=26);a-=26;a-=y.getCloseIconSize();return a-=8},
closeAffordance:function(){l.getCloseAffordance()&&(l.setCloseAffordance(!1),A.show(),setTimeout(y.closeAffordStartFade,w.closeAffordance.delay))},closeAffordStartFade:function(){A.addClass("spaui-fade");setTimeout(y.closeAffordAfterFade,w.closeAffordance.fade)},closeAffordAfterFade:function(){A.remove()},closeAffordHover:function(a){A.remove()},triggerHover:function(a){"mouseenter"===a.type&&(a.currentTarget.style.color="#e47911",a.currentTarget.style.cursor="pointer");"mouseleave"===a.type&&(a.currentTarget.style.color=
"",a.currentTarget.style.cursor="auto")},calculateLargeWidth:function(){var a=Math.min(parseInt((c.width()-w.regularSize)*w.resize.percentage+w.regularSize,10),w.resize.maximum);a<=w.regularSize&&(a=w.regularSize+1);return a},returnVisible:function(){return w.visible},handleSpooferBar:function(){g.gebi("spooferDiv")&&setTimeout(function(){w.spooferHeight=e.$("#spooferDiv").outerHeight();q.css("top",w.spooferHeight)},w.duration.spooferDelay)},windowScroll:function(a){a=0;a=0!==G.length&&"fixed"===
G.css("position")?G.outerHeight():w.spooferHeight;q.css("top",a)},scrollToHash:function(a){var b;"top"===a.toLowerCase()?e.$("#spaui-content").scrollTop(0):(b=e.$("#spaui"),g.gebi(a)&&0<e.$("#spaui-content").find('a[name="'+a+'"]').length?g.updateScrollTop(b.find("#"+a),55):(g.gebi(a)&&g.updateScrollTop(b.find("#"+a),55),0<e.$("#spaui-content").find('a[name="'+a+'"]').length&&g.updateScrollTop(b.find('a[name="'+a+'"]'),70)))},contentChanged:function(){var a=y.getSearchSize(w.distance);t.animate({width:a},
w.resizeDuration,y.searchResized)},hideClose:function(){r.css("display","none");t.css("right","auto")},showClose:function(){r.css("display","");t.css("right","")},hideResizer:function(){z.hide()},showResizer:function(){z.show()},getCloseIconSize:function(){return"none"!==r.css("display")?44:13},overrideConfig:function(a){w=e.$.extend(!0,{},w,a)}};return{scrollToHash:y.scrollToHash,summon:y.summon,summoner:y.summoner,banish:y.banish,banisher:y.banisher,resize:y.resize,getVisible:y.returnVisible,getLargeWidth:y.calculateLargeWidth,
makeSmall:y.makeSmall,makeLarge:y.makeLarge,setSpecialSize:y.setSpecialSize,isSummoned:y.isSummoned,initialState:y.initialState,contentChanged:y.contentChanged,hideClose:y.hideClose,showClose:y.showClose,hideResizer:y.hideResizer,showResizer:y.showResizer,overrideConfig:y.overrideConfig,init:y.init}});ASPP.when("ASPA","spaui-shim").register("spaui-util",function(e,g){var l=null,d={init:function(a){l=a},textareaFocusPlaceholderFix:function(a){a.attr("placeholder")===a.val()&&a.val("")},returnTopicIDFromLocation:function(){return d.returnTopicIDFromLink(l.location.href)},
returnTopicIDFromLink:function(a){var b,d=/\/help\/([\d]+)/;a.match(d)&&a.match(d)[1]&&(b=a.match(d)[1]);var d=a.split(/[\?&]+/),e=d.length;for(a=0;a<e;a++){var f=d[a].split("=");"itemID"===f[0]&&(f=f[1].match(/^([0-9]+).*/),null!==f&&(b=f[1]))}return b},updateScrollTop:function(a,b){e.$("#spaui").find("#spaui-content").scrollTop(a.offset().top-b)},isOnArticle:function(){var a=!1,b=l.location.href,d=/\/help\/([\d]+)/;b.match(d)&&b.match(d)[1]&&(a=!0);for(var d=b.split(/[\?&]+/),e=d.length,b=0;b<e;b++)"itemID"===
d[b].split("=")[0]&&(a=!0);return a},exposejQuery:function(){"function"!==typeof l.$&&(l.$=e.$)},gda:function(a,b){return a.attr?a.attr("data-"+b):a.data?a.data(b):a.dataset?a.dataset[b]:a.getAttribute("data-"+b)},gebi:function(a){return document.getElementById(a)},delayInit:function(){var a=0;return function(b,d){clearTimeout(a);a=setTimeout(b,d)}},startsWith:function(a,b){var d=!1;a.substr(0,b.length)===b&&(d=!0);return d},contains:function(a,b){if("string"===typeof a){if(b instanceof RegExp)return b.test(a);
if(-1!==a.indexOf(b))return!0}return!1},handleSigninRedirect:function(a){return 403===a?(l.location.reload(),!0):!1},openInNewWindow:function(a){l.open(a,"_blank").focus()},redirect:function(a){l.location=a},getUniqueArray:function(a){for(var b={},d=[],e=0,f=a.length;e<f;++e)b.hasOwnProperty(a[e])||(d.push(a[e]),b[a[e]]=1);return d},isString:function(a){return"string"===typeof a||a instanceof String},isNumber:function(a){return!isNaN(a-0)&&null!==a&&""!==a&&!1!==a},isNull:function(a){return null===
a||a===z},formatObjectAsUrlParams:function(a,b){if(e.$.isPlainObject(a)){var d=[];Object.keys(a).forEach(function(e){var f=a[e];!0===f?f="true":!1===f&&(f="false");b&&(f=encodeURIComponent(f));d.push(e+"="+f)});return 0<d.length?"&"+d.join("&"):""}return null},getErrorDetailsFromAjaxResponse:function(a,b){var d="none";"error"===b?d=0===a.status&&0===a.readyState?"abort":500===a.status?"server-error":"unknown-error":"abort"===b&&(d="abort");return{type:d,jqueryStatus:b,httpStatus:a.status,readyState:a.readyState}},
getUid:function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},truncateString:function(a,b,e){e===z&&(e="");if(a===z||!d.isString(a)||!d.isString(e)||!d.isNumber(b))return"";b===z&&(b=100);return a.length>b?a.substr(0,b-e.length)+e:a},isParamPresent:function(a){return-1!==l.location.search.indexOf(a)},forEachObjectValue:function(a,b){for(var d in a)a.hasOwnProperty(d)&&b(a[d])},getElementRightOffset:function(a){var b=
a.offset();return null===b?0:document.body.clientWidth-b.left-a.width()},ensureId:function(a){if(0!==a.length&&a instanceof e.$){var b=a.attr("id");""!==b&&b!==z||a.attr("id",d.getUid())}},resetJqueryAnimation:function(a){0!==a.length&&a instanceof e.$&&(a.css("height",""),a.css("margin-top",""),a.css("margin-bottom",""),a.css("padding-top",""),a.css("padding-bottom",""),a.css("overflow",""))},isHashOnCurrentPage:function(a){var b=d.removeHashFromUrl(d.escape(l.location.href));return(new RegExp(b+
"#.*$")).test(a)},escape:function(a){return a.replace(/[-\/\\\^$*+?.()|\[\]{}]/g,"\\$&")},removeHashFromUrl:function(a){return a.split("#")[0]},isHtmlElement:function(a){return"object"===typeof HTMLElement?a instanceof HTMLElement:!1},isSellerULink:function(a){return"201047930"===a},executeIf:function(a,b){return function(d){if(e.$.isFunction(a)&&a(d)||!e.$.isFunction(a)&&a)return b(d)}},executeIfElse:function(a,b,d){return function(g){return e.$.isFunction(a)&&a(g)||!e.$.isFunction(a)&&a?b(g):d(g)}},
getPathArguments:function(a){var b={};a=a&&a.split("?");if(!a||2<a.length)return b;(a[1]?a[1].split("&"):[]).forEach(function(a){a=a.split("=");b[a[0]]=2>a.length?"":a[1]});return b},getContactUsFooterLink:function(){return e.$(".sc-footer, #sc_footer").find('a[href*="contact-"]').filter(function(){var a=e.$(this).attr("href");return 0>a.indexOf("?")||a.indexOf("contact-")<a.indexOf("?")})},toggleClassOnCond:function(a,b,d){var e=a.hasClass(b);d&&!e?a.addClass(b):!d&&e&&a.removeClass(b)},stringToBool:function(a){return"true"===
(a+"").toLowerCase()},selectorToClass:function(a){return 0===a.indexOf(".")?a.substring(1):a},formEncode:function(a){return encodeURIComponent(a).replace(/%20/g,"+")},hasTemplate:function(a){return null!==d.gebi("spaui-template-"+a)},stripHtmlTags:function(a){var b=/<(?:!--(?:(?:-*[^->])*--+|-?)|script\b(?:[^"'>]|"[^"]*"|'[^']*')*>[\s\S]*?<\/script\s*|style\b(?:[^"'>]|"[^"]*"|'[^']*')*>[\s\S]*?<\/style\s*|\/?[a-z](?:[^"'>]|"[^"]*"|'[^']*')*)>/gi,d;do d=a,a=a.replace(b,"");while(a!==d);return a.replace(/</g,
"&lt;")}};return{init:d.init,startsWith:d.startsWith,contains:d.contains,delayFunc:d.delayInit(),exposejQuery:d.exposejQuery,gda:d.gda,gebi:d.gebi,getTopicIDFromLink:d.returnTopicIDFromLink,getTopicIDFromLocation:d.returnTopicIDFromLocation,handleSigninRedirect:d.handleSigninRedirect,isOnArticle:d.isOnArticle,openInNewWindow:d.openInNewWindow,textareaFocusPlaceholderFix:d.textareaFocusPlaceholderFix,updateScrollTop:d.updateScrollTop,getUniqueArray:d.getUniqueArray,isString:d.isString,isNumber:d.isNumber,
isNull:d.isNull,formatObjectAsUrlParams:d.formatObjectAsUrlParams,truncateString:d.truncateString,isParamPresent:d.isParamPresent,getErrorDetailsFromAjaxResponse:d.getErrorDetailsFromAjaxResponse,getUid:d.getUid,forEachObjectValue:d.forEachObjectValue,getElementRightOffset:d.getElementRightOffset,ensureId:d.ensureId,resetJqueryAnimation:d.resetJqueryAnimation,redirect:d.redirect,isHashOnCurrentPage:d.isHashOnCurrentPage,isHtmlElement:d.isHtmlElement,isSellerULink:d.isSellerULink,executeIf:d.executeIf,
executeIfElse:d.executeIfElse,getPathArguments:d.getPathArguments,getContactUsFooterLink:d.getContactUsFooterLink,toggleClassOnCond:d.toggleClassOnCond,stringToBool:d.stringToBool,selectorToClass:d.selectorToClass,formEncode:d.formEncode,hasTemplate:d.hasTemplate,stripHtmlTags:d.stripHtmlTags}});ASPP.when("ASPA","spaui-shim","spaui-util").register("spaui-weblabs",function(e,g,l){var d={contactDeflection:"C",searchSuggestionPHRefactor:"C"},a={init:function(a){e.$.extend(d,a);Object.keys(d).forEach(function(a){d[a]=
d[a].toUpperCase()})},doesTreatmentEqual:function(b,e){return a.executeWithWeblab(b,function(a){return d[a]===e.toUpperCase()},function(){return!1})},getTreatment:function(b){return a.executeWithWeblab(b,function(a){return d[a]},function(){return"C"})},isControl:function(b){return a.doesTreatmentEqual(b,"C")},isAnyTreatment:function(b){return a.executeWithWeblab(b,function(a){return d[a].match(/^T[0-9]+$/)},function(){return!1})},executeWithWeblab:function(a,e,g){return l.executeIfElse(d.hasOwnProperty(a),
function(a){return e(a)},function(a){return g(a)})(a)}};return e.$.extend({init:a.init,doesTreatmentEqual:a.doesTreatmentEqual,getTreatment:a.getTreatment,isControl:a.isControl,isAnyTreatment:a.isAnyTreatment},{CONTACT_DEFLECTION:"contactDeflection",SEARCH_SUGGEST_PH:"searchSuggestionPHRefactor",SEARCH_SUGGEST_NGRAM:"searchSuggestionNGram"})});ASPP.when("ASPA","spaui-ajax","spaui-events","spaui-shim","spaui-util","spaui-history").register("spaui-workflows",function(e,g,l,d,a,b){var h={},m={ID_REGEX:/workflow-id_(\S*)($|\s)/,
WORKFLOW_URL:null,WORKFLOW_ID:"workflowId=",CLIENT_ID:"&clientId=",TRANSITION_TIME:400,AUGUR_POPULATE_DELAY:25},f={init:function(){m.WORKFLOW_URL=b.getAthenaUrlPrefix()+"workflow?";f.bind();f.initializeClientMapping()},bind:function(){l.subscribe(l.getName("newPage"),f.handleNewPage)},initializeClientMapping:function(){h["#_modules .workflow-placeholder"]="FullPageHelp";h[".spaui-help .workflow-placeholder"]="AthenaHelp"},handleNewPage:function(){var a=f.scanForWorkflows();0<a.length&&a.forEach(f.replace)},
scanForWorkflows:function(){var a=[],b=function(b){return function(c,d){var g=e.$(d),g=f.stripReplacementElement(g,b);null!==g&&a.push(g)}};e.$("#_modules .workflow-placeholder").each(b(h["#_modules .workflow-placeholder"]));e.$(".spaui-help .workflow-placeholder").each(b(h[".spaui-help .workflow-placeholder"]));return a},stripReplacementElement:function(a,b){var d=f.getIdFromPossibleReplacement(a),e=f.getSelectorOrCreateForElement(a);return null!==d?{id:d,client:b,selector:e}:null},getSelectorOrCreateForElement:function(b){b.attr("id")||
b.attr("id",a.getUid());return"#"+b.attr("id")},getIdFromPossibleReplacement:function(a){a=a.attr("class");a=m.ID_REGEX.exec(a);return null===a?null:a[1]},replace:function(a){g.get(m.WORKFLOW_URL+m.WORKFLOW_ID+a.id+m.CLIENT_ID+a.client,{dataType:"html"},function(b){f.flush(a.selector,b.data,!0)},function(b){f.flush(a.selector,b.data,!1)})},flush:function(a,b,d){a=e.$(a);var f=e.$(b);d&&0<f.children().size()?"none"!==a.css("display")&&(f.hide(),a.replaceWith(f),setTimeout(function(){f.slideDown(m.TRANSITION_TIME)},
m.AUGUR_POPULATE_DELAY)):a.remove()},overrideConfig:function(a){e.$.extend(m,a)}};return{init:f.init,overrideConfig:f.overrideConfig}})});