(function(z){var v=window.AmazonUIPageJS||window.P,B=v._namespace||v.attributeErrors,d=B?B("BootstrapTour_AUIBuild"):v;d.guardFatal?d.guardFatal(z)(d,window):d.execute(function(){z(d,window)})})(function(z,v,B){z.when("jQuery").register("3p-bs-tooltip",function(d){d.fn.on=d.fn.live;d.fn.off=d.fn.die;var a=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null;this.init("tooltip",a,b)};a.VERSION="3.2.0";a.DEFAULTS={animation:!0,placement:"top",selector:!1,
template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}};a.prototype.init=function(a,b,f){this.enabled=!0;this.type=a;this.$element=d(b);this.options=this.getOptions(f);this.$viewport=this.options.viewport&&d(this.options.viewport.selector||this.options.viewport);a=this.options.trigger.split(" ");for(b=a.length;b--;)if(f=a[b],"click"==f)this.$element.on("click."+
this.type,this.options.selector,d.proxy(this.toggle,this));else if("manual"!=f){var g="hover"==f?"mouseleave":"focusout";this.$element.on(("hover"==f?"mouseenter":"focusin")+"."+this.type,this.options.selector,d.proxy(this.enter,this));this.$element.on(g+"."+this.type,this.options.selector,d.proxy(this.leave,this))}this.options.selector?this._options=d.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};a.prototype.getDefaults=function(){return a.DEFAULTS};a.prototype.getOptions=
function(a){a=d.extend({},this.getDefaults(),this.$element.data(),a);a.delay&&"number"==typeof a.delay&&(a.delay={show:a.delay,hide:a.delay});return a};a.prototype.getDelegateOptions=function(){var a={},b=this.getDefaults();this._options&&d.each(this._options,function(f,d){b[f]!=d&&(a[f]=d)});return a};a.prototype.enter=function(a){var b=a instanceof this.constructor?a:d(a.currentTarget).data("bs."+this.type);b||(b=new this.constructor(a.currentTarget,this.getDelegateOptions()),d(a.currentTarget).data("bs."+
this.type,b));clearTimeout(b.timeout);b.hoverState="in";if(!b.options.delay||!b.options.delay.show)return b.show();b.timeout=setTimeout(function(){"in"==b.hoverState&&b.show()},b.options.delay.show)};a.prototype.leave=function(a){var b=a instanceof this.constructor?a:d(a.currentTarget).data("bs."+this.type);b||(b=new this.constructor(a.currentTarget,this.getDelegateOptions()),d(a.currentTarget).data("bs."+this.type,b));clearTimeout(b.timeout);b.hoverState="out";if(!b.options.delay||!b.options.delay.hide)return b.hide();
b.timeout=setTimeout(function(){"out"==b.hoverState&&b.hide()},b.options.delay.hide)};a.prototype.show=function(){var a=d.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(a);var b=d.contains(document.documentElement,this.$element[0]);if(!a.isDefaultPrevented()&&b){var f=this,a=this.tip(),b=this.getUID(this.type);this.setContent();a.attr("id",b);this.$element.attr("aria-describedby",b);this.options.animation&&a.addClass("fade");var b="function"==typeof this.options.placement?
this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,g=/\s?auto?\s?/i,h=g.test(b);h&&(b=b.replace(g,"")||"top");a.detach().css({top:0,left:0,display:"block"}).addClass(b).data("bs."+this.type,this);this.options.container?a.appendTo(this.options.container):a.insertAfter(this.$element);var g=this.getPosition(),k=a[0].offsetWidth,l=a[0].offsetHeight;if(h){var h=b,m=this.$element.parent(),m=this.getPosition(m),b="bottom"==b&&g.top+g.height+l-m.scroll>m.height?"top":"top"==b&&
0>g.top-m.scroll-l?"bottom":"right"==b&&g.right+k>m.width?"left":"left"==b&&g.left-k<m.left?"right":b;a.removeClass(h).addClass(b)}g=this.getCalculatedOffset(b,g,k,l);this.applyPlacement(g,b);b=function(){f.$element.trigger("shown.bs."+f.type);f.hoverState=null};d.support.transition&&this.$tip.hasClass("fade")?a.one("bsTransitionEnd",b).emulateTransitionEnd(150):b()}}};a.prototype.applyPlacement=function(a,b){var f=this.tip(),g=f[0].offsetWidth,h=f[0].offsetHeight,k=parseInt(f.css("margin-top"),10),
l=parseInt(f.css("margin-left"),10);isNaN(k)&&(k=0);isNaN(l)&&(l=0);a.top+=k;a.left+=l;d.offset.setOffset(f[0],d.extend({using:function(a){f.css({top:Math.round(a.top),left:Math.round(a.left)})}},a),0);f.addClass("in");var l=f[0].offsetWidth,m=f[0].offsetHeight;"top"==b&&m!=h&&(a.top=a.top+h-m);k=this.getViewportAdjustedDelta(b,a,l,m);k.left?a.left+=k.left:a.top+=k.top;g=k.left?2*k.left-g+l:2*k.top-h+m;h=k.left?"left":"top";k=k.left?"offsetWidth":"offsetHeight";f.offset(a);this.replaceArrow(g,f[0][k],
h)};a.prototype.replaceArrow=function(a,b,f){this.arrow().css(f,a?50*(1-a/b)+"%":"")};a.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b);a.removeClass("fade in top bottom left right")};a.prototype.hide=function(){function a(){"in"!=b.hoverState&&f.detach();b.$element.trigger("hidden.bs."+b.type)}var b=this,f=this.tip(),g=d.Event("hide.bs."+this.type);this.$element.removeAttr("aria-describedby");this.$element.trigger(g);
if(!g.isDefaultPrevented())return f.removeClass("in"),d.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",a).emulateTransitionEnd(150):a(),this.hoverState=null,this};a.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")};a.prototype.hasContent=function(){return this.getTitle()};a.prototype.getPosition=function(a){a=a||this.$element;var b=a[0],f="BODY"==
b.tagName;return d.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():null,{scroll:f?document.documentElement.scrollTop||document.body.scrollTop:a.scrollTop(),width:f?d(v).width():a.outerWidth(),height:f?d(v).height():a.outerHeight()},f?{top:0,left:0}:a.offset())};a.prototype.getCalculatedOffset=function(a,b,f,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-f/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-f/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-
f}:{top:b.top+b.height/2-d/2,left:b.left+b.width}};a.prototype.getViewportAdjustedDelta=function(a,b,f,d){var h={top:0,left:0};if(!this.$viewport)return h;var k=this.options.viewport&&this.options.viewport.padding||0,l=this.getPosition(this.$viewport);/right|left/.test(a)?(f=b.top-k-l.scroll,b=b.top+k-l.scroll+d,f<l.top?h.top=l.top-f:b>l.top+l.height&&(h.top=l.top+l.height-b)):(d=b.left-k,b=b.left+k+f,d<l.left?h.left=l.left-d:b>l.width&&(h.left=l.left+l.width-b));return h};a.prototype.getTitle=function(){var a=
this.$element,b=this.options;return a.attr("data-original-title")||("function"==typeof b.title?b.title.call(a[0]):b.title)};a.prototype.getUID=function(a){do a+=~~(1E6*Math.random());while(document.getElementById(a));return a};a.prototype.tip=function(){return this.$tip=this.$tip||d(this.options.template)};a.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};a.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.options=this.$element=
null)};a.prototype.enable=function(){this.enabled=!0};a.prototype.disable=function(){this.enabled=!1};a.prototype.toggleEnabled=function(){this.enabled=!this.enabled};a.prototype.toggle=function(a){var b=this;a&&(b=d(a.currentTarget).data("bs."+this.type),b||(b=new this.constructor(a.currentTarget,this.getDelegateOptions()),d(a.currentTarget).data("bs."+this.type,b)));b.tip().hasClass("in")?b.leave(b):b.enter(b)};a.prototype.destroy=function(){clearTimeout(this.timeout);this.hide().$element.off("."+
this.type).removeData("bs."+this.type)};var b=d.fn.tooltip;d.fn.tooltip=function(b){return this.each(function(){var e=d(this),f=e.data("bs.tooltip"),g="object"==typeof b&&b;if(f||"destroy"!=b)if(f||e.data("bs.tooltip",f=new a(this,g)),"string"==typeof b)f[b]()})};d.fn.tooltip.Constructor=a;d.fn.tooltip.noConflict=function(){d.fn.tooltip=b;return this}});z.when("jQuery","3p-bs-tooltip").register("3p-bs-popover",function(d,a){var b=function(a,b){this.init("popover",a,b)};if(!d.fn.tooltip)throw Error("Popover requires tooltip.js");
b.VERSION="3.2.0";b.DEFAULTS=d.extend({},d.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});b.prototype=d.extend({},d.fn.tooltip.Constructor.prototype);b.prototype.constructor=b;b.prototype.getDefaults=function(){return b.DEFAULTS};b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?
"html":"text"](b);a.find(".popover-content").empty()[this.options.html?"string"==typeof c?"html":"append":"text"](c);a.removeClass("fade top bottom left right in");a.find(".popover-title").html()||a.find(".popover-title").hide()};b.prototype.hasContent=function(){return this.getTitle()||this.getContent()};b.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)};b.prototype.arrow=function(){return this.$arrow=
this.$arrow||this.tip().find(".arrow")};b.prototype.tip=function(){this.$tip||(this.$tip=d(this.options.template));return this.$tip};var c=d.fn.popover;d.fn.popover=function(a){return this.each(function(){var c=d(this),g=c.data("bs.popover"),h="object"==typeof a&&a;if(g||"destroy"!=a)if(g||c.data("bs.popover",g=new b(this,h)),"string"==typeof a)g[a]()})};d.fn.popover.Constructor=b;d.fn.popover.noConflict=function(){d.fn.popover=c;return this}});z.when("jQuery","3p-bs-popover").register("3p-bs-tour",
function(d,a){var b;b=v.document;d.Tour=function(){function a(b){var c;try{c=v.localStorage}catch(g){c=!1}this._options=d.extend({name:"tour",steps:[],container:"body",autoscroll:!0,keyboard:!0,storage:c,debug:!1,backdrop:!1,backdropPadding:0,redirect:!0,orphan:!1,duration:!1,delay:!1,basePath:"",template:'<div class="popover" role="tooltip"> <div class="arrow"></div> <h3 class="popover-title"></h3> <div class="popover-content"></div> <div class="popover-navigation"> <div class="btn-group"> <button class="btn btn-sm btn-default btn-prev" data-role="prev">&laquo; Prev</button> <button class="btn btn-sm btn-default btn-next" data-role="next">Next &raquo;</button> <button class="btn btn-sm btn-default" data-role="pause-resume" data-pause-text="Pause" data-resume-text="Resume">Pause</button> </div> <button class="btn btn-sm btn-default btn-end" data-role="end">End tour</button> </div> </div>',
afterSetState:function(a,b){},afterGetState:function(a,b){},afterRemoveState:function(a){},onStart:function(a){},onEnd:function(a){},onShow:function(a){},onShown:function(a){},onHide:function(a){},onHidden:function(a){},onNext:function(a){},onPrev:function(a){},onPause:function(a,b){},onResume:function(a,b){}},b);this._inited=this._force=!1;this.backdrop={overlay:null,$element:null,$background:null,backgroundShown:!1,overlayElementShown:!1};this}a.prototype.addSteps=function(a){var b,c,d;c=0;for(d=
a.length;c<d;c++)b=a[c],this.addStep(b);return this};a.prototype.addStep=function(a){this._options.steps.push(a);return this};a.prototype.getStep=function(a){if(null!=this._options.steps[a])return d.extend({id:"step-"+a,path:"",placement:"right",title:"",content:"<p></p>",next:a===this._options.steps.length-1?-1:a+1,prev:a-1,animation:!0,container:this._options.container,autoscroll:this._options.autoscroll,backdrop:this._options.backdrop,backdropPadding:this._options.backdropPadding,redirect:this._options.redirect,
orphan:this._options.orphan,duration:this._options.duration,delay:this._options.delay,template:this._options.template,onShow:this._options.onShow,onShown:this._options.onShown,onHide:this._options.onHide,onHidden:this._options.onHidden,onNext:this._options.onNext,onPrev:this._options.onPrev,onPause:this._options.onPause,onResume:this._options.onResume},this._options.steps[a])};a.prototype.init=function(a){this._force=a;if(this.ended())return this._debug("Tour ended, init prevented."),this;this.setCurrentStep();
this._initMouseNavigation();this._initKeyboardNavigation();this._onResize(function(a){return function(){return a.showStep(a._current)}}(this));null!==this._current&&this.showStep(this._current);this._inited=!0;return this};a.prototype.start=function(a){null==a&&(a=!1);this._inited||this.init(a);null===this._current&&(a=this._makePromise(null!=this._options.onStart?this._options.onStart(this):void 0),this._callOnPromiseDone(a,this.showStep,0));return this};a.prototype.next=function(){var a;a=this.hideStep(this._current);
return this._callOnPromiseDone(a,this._showNextStep)};a.prototype.prev=function(){var a;a=this.hideStep(this._current);return this._callOnPromiseDone(a,this._showPrevStep)};a.prototype.goTo=function(a){var b;b=this.hideStep(this._current);return this._callOnPromiseDone(b,this.showStep,a)};a.prototype.end=function(){var a,c;a=function(a){return function(c){d(b).off("click.tour-"+a._options.name);d(b).off("keyup.tour-"+a._options.name);d(v).off("resize.tour-"+a._options.name);a._setState("end","yes");
a._inited=!1;a._force=!1;a._clearTimer();if(null!=a._options.onEnd)return a._options.onEnd(a)}}(this);c=this.hideStep(this._current);return this._callOnPromiseDone(c,a)};a.prototype.ended=function(){return!this._force&&!!this._getState("end")};a.prototype.restart=function(){this._removeState("current_step");this._removeState("end");return this.start()};a.prototype.pause=function(){var a;a=this.getStep(this._current);if(!a||!a.duration)return this;this._paused=!0;this._duration-=(new Date).getTime()-
this._start;v.clearTimeout(this._timer);this._debug("Paused/Stopped step "+(this._current+1)+" timer ("+this._duration+" remaining).");if(null!=a.onPause)return a.onPause(this,this._duration)};a.prototype.resume=function(){var a;a=this.getStep(this._current);if(!a||!a.duration)return this;this._paused=!1;this._start=(new Date).getTime();this._duration=this._duration||a.duration;this._timer=v.setTimeout(function(a){return function(){return a._isLast()?a.next():a.end()}}(this),this._duration);this._debug("Started step "+
(this._current+1)+" timer with duration "+this._duration);if(null!=a.onResume&&this._duration!==a.duration)return a.onResume(this,this._duration)};a.prototype.hideStep=function(a){var b,c,h;if(h=this.getStep(a))return this._clearTimer(),c=this._makePromise(null!=h.onHide?h.onHide(this,a):void 0),b=function(b){return function(c){var f;f=d(h.element);f.data("bs.popover")||f.data("popover")||(f=d("body"));null!=h.elements?d.each(h.elements,function(c,g){d.isArray(g)?d.each(g,function(c,g){f=d(g);f.popover("destroy").removeClass("tour-"+
b._options.name+"-element tour-"+b._options.name+"-"+a+"-element")}):d(g).popover("destroy").removeClass("tour-"+b._options.name+"-element tour-"+b._options.name+"-"+a+"-element")}):f.popover("destroy").removeClass("tour-"+b._options.name+"-element tour-"+b._options.name+"-"+a+"-element");h.reflex&&f.removeClass("tour-step-element-reflex").off(""+b._reflexEvent(h.reflex)+".tour-"+b._options.name);h.backdrop&&b._hideBackdrop(a);if(null!=h.onHidden)return h.onHidden(b)}}(this),this._callOnPromiseDone(c,
b),c};a.prototype.showStep=function(a){var c,g,h,k;if(this.ended())return this._debug("Tour ended, showStep prevented."),this;if(k=this.getStep(a))return h=a<this._current,c=this._makePromise(null!=k.onShow?k.onShow(this,a):void 0),g=function(c){return function(f){var g;c.setCurrentStep(a);g=function(){switch({}.toString.call(k.path)){case "[object Function]":return k.path();case "[object String]":return this._options.basePath+k.path;default:return k.path}}.call(c);f=[b.location.pathname,b.location.hash].join("");
if(c._isRedirect(g,f))c._redirect(k,g);else{if(c._isOrphan(k)){if(!k.orphan){c._debug("Skip the orphan step "+(c._current+1)+".\nOrphan option is false and the element does not exist or is hidden.");h?c._showPrevStep():c._showNextStep();return}c._debug("Show the orphan step "+(c._current+1)+". Orphans option is true.")}k.backdrop&&c._showBackdrop(c._isOrphan(k)?void 0:k.element);f=function(){if(c.getCurrentStep()===a){null==k.element&&null==k.elements||!k.backdrop||c._showOverlay(k);c._showPopover(k,
a);if(null!=k.onShown)k.onShown(c);d("#step-"+c._current+" .popover-pages").html(c._options.stepStringPre+(c._current+1)+c._options.stepStringMid+c._options.steps.length);return c._debug("Step "+(c._current+1)+" of "+c._options.steps.length)}};k.autoscroll?null!=k.scrollTarget?c._scrollIntoView(k.scrollTarget,f):null!=k.elements?c._containsSubArray(k.elements)?c._scrollIntoView(k.elements[0][0],f):c._scrollIntoView(k.elements[0],f):c._scrollIntoView(k.element,f):f();if(k.duration)return c.resume()}}}(this),
k.delay?(this._debug("Wait "+k.delay+" milliseconds to show the step "+(this._current+1)),v.setTimeout(function(a){return function(){return a._callOnPromiseDone(c,g)}}(this),k.delay)):this._callOnPromiseDone(c,g),c;this._debug("Tour ended, no step")};a.prototype.getCurrentStep=function(){return this._current};a.prototype.setCurrentStep=function(a){null!=a?(this._current=a,this._setState("current_step",a)):(this._current=this._getState("current_step"),this._current=null===this._current?null:parseInt(this._current,
10));return this};a.prototype._setState=function(a,b){var c;if(this._options.storage){c=""+this._options.name+"_"+a;try{this._options.storage.setItem(c,b)}catch(d){d.code===DOMException.QUOTA_EXCEEDED_ERR&&this._debug("LocalStorage quota exceeded. State storage failed.")}return this._options.afterSetState(c,b)}null==this._state&&(this._state={});return this._state[a]=b};a.prototype._removeState=function(a){if(this._options.storage)return a=""+this._options.name+"_"+a,this._options.storage.removeItem(a),
this._options.afterRemoveState(a);if(null!=this._state)return delete this._state[a]};a.prototype._getState=function(a){var b;this._options.storage?(b=""+this._options.name+"_"+a,b=this._options.storage.getItem(b)):null!=this._state&&(b=this._state[a]);if(void 0===b||"null"===b)b=null;this._options.afterGetState(a,b);return b};a.prototype._showNextStep=function(){var a,b,c;c=this.getStep(this._current);b=function(a){return function(b){return a.showStep(c.next)}}(this);a=this._makePromise(null!=c.onNext?
c.onNext(this):void 0);return this._callOnPromiseDone(a,b)};a.prototype._showPrevStep=function(){var a,b,c;c=this.getStep(this._current);b=function(a){return function(b){return a.showStep(c.prev)}}(this);a=this._makePromise(null!=c.onPrev?c.onPrev(this):void 0);return this._callOnPromiseDone(a,b)};a.prototype._debug=function(a){if(this._options.debug)return v.console.log("Bootstrap Tour '"+this._options.name+"' | "+a)};a.prototype._isRedirect=function(a,b){return null!=a&&""!==a&&("[object RegExp]"===
{}.toString.call(a)&&!a.test(b)||"[object String]"==={}.toString.call(a)&&a.replace(/\?.*$/,"").replace(/\/?$/,"")!==b.replace(/\/?$/,""))};a.prototype._redirect=function(a,c){if(d.isFunction(a.redirect))return a.redirect.call(this,c);if(!0===a.redirect)return this._debug("Redirect to "+c),b.location.href=c};a.prototype._isOrphan=function(a){var b=null==a.element||!d(a.element).length||d(a.element).is(":hidden")&&"http://www.w3.org/2000/svg"!==d(a.element)[0].namespaceURI;a=!d(a.elements).length;
return b&&a};a.prototype._isLast=function(){return this._current<this._options.steps.length-1};a.prototype._showPopover=function(a,b){var c,h,k,l;d(".tour-"+this._options.name).remove();l=d.extend({},this._options);k=this._isOrphan(a);a.template=this._template(a,b);k&&(a.element="body",a.placement="top");if(null!=a.elements){var m=this;d.each(a.elements,function(h,k){d.isArray(k)?d.each(k,function(a,e){c=d(e);c.addClass("tour-"+m._options.name+"-element tour-"+m._options.name+"-"+b+"-element")}):
(c=d(k),c.addClass("tour-"+m._options.name+"-element tour-"+m._options.name+"-"+b+"-element"));a.options&&d.extend(l,a.options)})}else c=d(a.element),c.addClass("tour-"+this._options.name+"-element tour-"+this._options.name+"-"+b+"-element"),a.options&&d.extend(l,a.options);a.reflex&&!k&&(c.addClass("tour-step-element-reflex"),c.off(""+this._reflexEvent(a.reflex)+".tour-"+this._options.name),c.on(""+this._reflexEvent(a.reflex)+".tour-"+this._options.name,function(a){return function(){return a._isLast()?
a.next():a.end()}}(this)));null!=a.elements?(null!=a.popoverAnchor&&(c=d(a.popoverAnchor)),c.popover({placement:a.placement,trigger:"manual",title:a.title,content:a.content,html:!0,animation:a.animation,container:a.container,template:a.template,selector:c}).popover("show")):c.popover({placement:a.placement,trigger:"manual",title:a.title,content:a.content,html:!0,animation:a.animation,container:a.container,template:a.template,selector:a.element}).popover("show");h=c.data("bs.popover")?c.data("bs.popover").tip():
c.data("popover").tip();h.attr("id",a.id);if(null!=a.elements&&"left"==a.placement){var n=d(a.elements[0]).offset().left-h[0].offsetWidth-10;h.offset({left:n})}this._reposition(h,a);if(k)return this._center(h)};a.prototype._template=function(a,b){var c,h,k,l;l=d.isFunction(a.template)?d(a.template(b,a)):d(a.template);c=l.find(".popover-navigation");k=c.find('[data-role="prev"]');h=c.find('[data-role="next"]');c=c.find('[data-role="pause-resume"]');this._isOrphan(a)&&l.addClass("orphan");l.addClass("tour-"+
this._options.name+" tour-"+this._options.name+"-"+b);0>a.prev&&k.addClass("disabled");0>a.next&&h.addClass("disabled");a.duration||c.remove();return l.clone().wrap("<div>").parent().html()};a.prototype._reflexEvent=function(a){return"[object Boolean]"==={}.toString.call(a)?"click":a};a.prototype._reposition=function(a,c){var g,h,k,l,m,n;k=a[0].offsetWidth;h=a[0].offsetHeight;n=a.offset();l=n.left;m=n.top;g=d(b).outerHeight();null==g&&(g=d(b).height());g=g-n.top-a.outerHeight();0>g&&(n.top+=g);g=
d("html").outerWidth()-n.left-a.outerWidth();0>g&&(n.left+=g);0>n.top&&(n.top=0);0>n.left&&(n.left=0);a.offset(n);if("bottom"===c.placement||"top"===c.placement){if(l!==n.left)return this._replaceArrow(a,2*(n.left-l),k,"left")}else if(m!==n.top)return this._replaceArrow(a,2*(n.top-m),h,"top")};a.prototype._center=function(a){return a.css("top",d(v).outerHeight()/2-a.outerHeight()/2)};a.prototype._replaceArrow=function(a,b,c,d){return a.find(".arrow").css(d,b?50*(1-b/c)+"%":"")};a.prototype._scrollIntoView=
function(a,b){var c,h,k,l,m,n;c=d(a);if(!c.length)return b();h=d(v);l=c.offset().top;n=h.height();m=Math.max(0,l-n/2);this._debug("Scroll into view. ScrollTop: "+m+". Element offset: "+l+". Window height: "+n+".");k=0;return d("body, html").stop(!0,!0).animate({scrollTop:Math.ceil(m)},function(a){return function(){if(2===++k)return b(),a._debug("Scroll into view.\nAnimation end element offset: "+c.offset().top+".\nWindow height: "+h.height()+".")}}(this))};a.prototype._onResize=function(a,b){return d(v).on("resize.tour-"+
this._options.name,function(){clearTimeout(b);return b=setTimeout(a,100)})};a.prototype._initMouseNavigation=function(){var a;a=this;return d(b).off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='prev']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='next']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='end']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+
" *[data-role='pause-resume']").on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='next']",function(a){return function(b){b.preventDefault();return a.next()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='prev']",function(a){return function(b){b.preventDefault();return a.prev()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='end']",function(a){return function(b){b.preventDefault();
return a.end()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='pause-resume']",function(b){b.preventDefault();b=d(this);b.text(a._paused?b.data("pause-text"):b.data("resume-text"));return a._paused?a.resume():a.pause()})};a.prototype._initKeyboardNavigation=function(){if(this._options.keyboard)return d(b).on("keyup.tour-"+this._options.name,function(a){return function(b){if(b.which)switch(b.which){case 39:return b.preventDefault(),a._isLast()?a.next():
a.end();case 37:b.preventDefault();if(0<a._current)return a.prev();break;case 27:return b.preventDefault(),a.end()}}}(this))};a.prototype._makePromise=function(a){return a&&d.isFunction(a.then)?a:null};a.prototype._callOnPromiseDone=function(a,b,c){return a?a.then(function(a){return function(e){return b.call(a,c)}}(this)):b.call(this,c)};a.prototype._showBackdrop=function(a){if(!this.backdrop.backgroundShown)return this.backdrop=d("<div>",{"class":"tour-backdrop"}),this.backdrop.backgroundShown=!0,
d("body").append(this.backdrop)};a.prototype._hideBackdrop=function(a){this._hideOverlayElement(a);return this._hideBackground()};a.prototype._hideBackground=function(){if(this.backdrop)return this.backdrop.remove(),this.backdrop.overlay=null,this.backdrop.backgroundShown=!1};a.prototype._showOverlay=function(a){var b=this;null!=a.elements?this._containsSubArray(a.elements)?d.each(a.elements,function(c,h){var k,l;d.isArray(a.elementsStack)?(a.elementsStack.length!=a.elements.length&&d.error("elementsStack can either be a string or a string array with the same size as the elements array."),
k=a.elementsStack[c]):k=a.elementsStack;d.isArray(a.backdropPadding)?(a.backdropPadding.length!=a.elements.length&&d.error("backdropPadding can either be an integer or an integer array with the same size as the elements array."),l=a.backdropPadding[c]):l=a.backdropPadding;d.isArray(h)?b._showElementGroupOverlay(h,k,l):b._showSingleElementOverlay(h,l)}):b._showElementGroupOverlay(a.elements,a.elementsStack,a.backdropPadding):b._showSingleElementOverlay(a.element,a.backdropPadding);b.backdrop.overlayElementShown=
!0};a.prototype._showSingleElementOverlay=function(a,b){if(($element=d(a))&&0!==$element.length&&!this.backdrop.overlayElementShown){this.backdrop.$element=$element.addClass("tour-step-backdrop");this.backdrop.$background=d("<div>",{"class":"tour-step-background"});var c={width:$element.innerWidth(),height:$element.innerHeight(),offset:$element.offset()};this.backdrop.$background.appendTo("body");b&&(c=this._applyBackdropPadding(b,c));return this.backdrop.$background.width(c.width).height(c.height).offset(c.offset)}};
a.prototype._showElementGroupOverlay=function(a,b,c){var h=this;d.each(a,function(a,b){$element=d(b);h.backdrop.$element=$element.addClass("tour-step-backdrop");h.backdrop.$background=d("<div>",{"class":"tour-step-background"})});a=this._getOverlaySize(a,b);this.backdrop.$background.appendTo("body");c&&(a=this._applyBackdropPadding(c,a));return this.backdrop.$background.width(a.width).height(a.height).offset(a.offset)};a.prototype._hideOverlayElement=function(a){if(this.backdrop.overlayElementShown)return a=
this.getStep(a),null!=a.elements?d.each(a.elements,function(a,b){if(d.isArray(b))d.each(b,function(a,b){$subElement=d(b);$subElement.removeClass("tour-step-backdrop");$subElement=null});else{var c=d(b);c.removeClass("tour-step-backdrop");c=null}}):(this.backdrop.$element.removeClass("tour-step-backdrop"),this.backdrop.$element=null),d("div").remove(".tour-step-background"),this.backdrop.$background.remove(),this.backdrop.$background=null,this.backdrop.overlayElementShown=!1};a.prototype._applyBackdropPadding=
function(a,b){"object"===typeof a?(null==a.top&&(a.top=0),null==a.right&&(a.right=0),null==a.bottom&&(a.bottom=0),null==a.left&&(a.left=0),b.offset.top-=a.top,b.offset.left-=a.left,b.width=b.width+a.left+a.right,b.height=b.height+a.top+a.bottom):(b.offset.top-=a,b.offset.left-=a,b.width+=2*a,b.height+=2*a);return b};a.prototype._clearTimer=function(){v.clearTimeout(this._timer);return this._duration=this._timer=null};a.prototype._containsSubArray=function(a){var b=!1;d.each(a,function(a,c){if(d.isArray(c))return b=
!0,!1});return b};a.prototype._getOverlaySize=function(a,b){return"vertical"===b?this._getVerticalOverlaySize(a):"horizontal"===b?this._getHorizontalOverlaySize(a):"multidirectional"===b?this._getMultidirectionalOverlaySize(a):this._getDefaultOverlaySize(a)};a.prototype._getVerticalOverlaySize=function(a){var b={width:0,height:0,offset:null};if(null==a||1>a.length)return b;b.offset=d(a[0]).offset();d.each(a,function(a,c){$element=d(c);b.width=$element.innerWidth();b.height+=$element.innerHeight()});
return b};a.prototype._getHorizontalOverlaySize=function(a){var b={width:0,height:0,offset:null};if(null==a||1>a.length)return b;b.offset=d(a[0]).offset();d.each(a,function(a,c){$element=d(c);b.width+=$element.innerWidth();b.height=$element.innerHeight()});return b};a.prototype._getMultidirectionalOverlaySize=function(a){var b={width:0,height:0,offset:null};if(null==a||1>a.length)return b;var c=d(a[0]),h=d(a[a.length-1]),k,l;a=c.offset().left;k=c.offset().top;l=h.offset().left+h.innerWidth();h=h.offset().top+
h.innerHeight();b.width=l-a;b.height=h-k;b.offset=c.offset();return b};a.prototype._getDefaultOverlaySize=function(a){var b={width:0,height:0,offset:null};if(null==a||1>a.length)return b;var c,h,k,l;c=d(a[0]).offset().left;h=d(a[0]).offset().top;k=d(a[0]).offset().left;l=d(a[0]).offset().top;d.each(a,function(a,b){$element=d(b);c=Math.min(c,$element.offset().left);h=Math.min(h,$element.offset().top);k=Math.max(k,$element.offset().left+$element.innerWidth());l=Math.max(l,$element.offset().top+$element.innerHeight())});
b.width=k-c;b.height=l-h;b.offset={left:c,top:h};return b};return a}()})});