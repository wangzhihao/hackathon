(function(v){var q=window.AmazonUIPageJS||window.P,l=q._namespace||q.attributeErrors,c=l?l("AugurAUIAssets"):q;c.guardFatal?c.guardFatal(v)(c,window):c.execute(function(){v(c,window)})})(function(v,q,l){ASPP.when("ASPA","augur-listing","augur-utils","augur-constants","augur-common","augur-payments","augur-reimbursement","augur-rrc").register("augur",function(c,e,b,a,d,g,k,h){var f=c.$,p={},t={},w={},m={init:function(a){m.hydrate(a);t[a]&&t[a].init(p,a);d.init(a);g.init(a);m.renderFirstNode(a)},hydrate:function(d){t.augur_no_listing_error_wf=
e;t.augur_in_reimbursements_wf=k;t.augur_rrc_wf=h;p.augur=c.$(a.SELECTORS.AUGUR_MAIN);p.spaui=c.$("#spaui");p.body=c.$(document.body);w=b.getRawData(d)},renderFirstNode:function(a){f("div[augur-wf-append-to]").each(function(){var a=f(this).attr("augur-wf-append-to");f(this).children().each(function(){null!==this.id&&""!==this.id&&f("#"+a).find("#"+this.id).remove()});f("#"+a).append(f(this).html());f(this).remove()});b.getMetricsHandleSecure(w)("wfDisplayed",{workflowName:a})}};return{init:m.init}});
ASPP.when("ASPA","augur-utils","augur-constants").register("augur-common",function(c,e,b){var a={metricsHandle:null,initialized:!1,rawData:{}},d={init:function(b){a.rawData=e.getRawData(b);a.metricsHandle=e.getMetricsHandleSecure(a.rawData);a.initialized||(a.initialized=!0,d.eventSubscribe(),c.declarative("augur_link_transition","click",function(a){var d=e.getRawData(a.data.workflowName),b=e.getEncryptedPayload(a.data.workflowName),g={};g[a.data.outputKey]=a.data.choice;e.getNextNode(a.data.updatingDivId,
d,b,g)}),d.delegateBind())},delegateBind:function(){c.$(b.SELECTORS.AUGUR_MAIN).undelegate(b.SELECTORS.PRIMARY_ACTION_BUTTON,"click");c.$(b.SELECTORS.AUGUR_MAIN).delegate(b.SELECTORS.PRIMARY_ACTION_BUTTON,"click",function(b){a.metricsHandle("mainButtonClick",d.getAdditionalDataFromEvent(b))});c.$(b.SELECTORS.AUGUR_MAIN).undelegate(b.SELECTORS.SECONDARY_ACTION_BUTTON,"click");c.$(b.SELECTORS.AUGUR_MAIN).delegate(b.SELECTORS.SECONDARY_ACTION_BUTTON,"click",function(b){a.metricsHandle("secondaryActionClick",
d.getAdditionalDataFromEvent(b))})},getAdditionalDataFromEvent:function(a){var b=c.$(a.target).parent(),d;b.hasClass("asp-declarative")&&(d=b.data("action"));return{url:a.target.href,action:d}},eventSubscribe:function(){c.on("spaui:newPage",function(){0<c.$(b.SELECTORS.AUGUR_MAIN).length&&d.delegateBind()})}};return{init:d.init,rebind:d.delegateBind}});ASPP.when("ASPA").register("augur-constants",function(c){var e=function(a){return Object.freeze!==l?Object.freeze(a):a};c=e({AUGUR_MAIN:"#augur-ui",
PRIMARY_ACTION_BUTTON:".augur-wf-primary-button",SECONDARY_ACTION_BUTTON:".augur-wf-secondary-link"});var b=e({TRANSITION_TIME:200}),e=e({DISABLED:"augur-disabled",SPAUI_HIDDEN:"asp-hidden"});return{SELECTORS:c,VALUES:b,CLASSES:e}});ASPP.when("ASPA","augur-utils").register("augur-rrc",function(c,e){var b={$dom:{},workflowName:"",metricsHandle:null,rawData:{}},a={init:function(b,g){a.hydrate(b,g);a.declaratives()},hydrate:function(a,g){b.$dom=a;b.workflowName=g;b.rawData=e.getRawData(g);
b.metricsHandle=e.getMetricsHandleSecure(b.rawData)},declaratives:function(){a.processOrderIdInput();a.checkOtherOrder()},processOrderIdInput:function(){c.declarative("augur_rrc_check_order_id","click",function(d){if(!a.isDataActionEmpty("augur_rrc_submit")){var g=$("#"+d.data.textInputId),c=g.val().trim(),h=/[A-Za-z\d]{3}-\d{7}-\d{7}/;if(""!==c&&c.match(h)){a.clearDataActionAndShowPopoverLoading("augur_rrc_submit");var g=e.getRawData(b.workflowName),h=e.getEncryptedPayload(b.workflowName),f={};f[d.data.outputKey]=
c;e.getNextNode(d.data.updatingDivId,g,h,f);b.metricsHandle("rrcOrderInput",{orderId:c})}else g.addClass("asp-form-error"),c&&$("#augur_rrc_invalid_order_id_msg_div").show()}})},checkOtherOrder:function(){c.declarative("augur_rrc_check_another_order","click",function(d){if(!a.isDataActionEmpty("augur_rrc_check_another_order_div")){a.clearDataActionAndShowPopoverLoading("augur_rrc_check_another_order_div");var g=e.getRawData(b.workflowName);e.getNextNode(d.data.updatingDivId,g,"","");b.metricsHandle("lookOtherOrder")}})},
isDataActionEmpty:function(a){return $("#"+a+" .asp-declarative").attr("data-action")?!1:!0},clearDataActionAndShowPopoverLoading:function(a){$("#"+a+" .asp-declarative").attr("data-action","");$("#augur_rrc_popover_loading").removeClass("asp-hidden")}};return{init:a.init}});ASPP.when("ASPA","augur-utils").execute(function(c,e){c.declarative("augur-fsl-increase-storage","click",function(b){$("#augur_fsl_current_usage_stats .asp-declarative").attr("data-action","");$("#augur_fsl_popover_loading").removeClass("asp-hidden");
var a=e.getRawData(b.data.workflowName),d=e.getEncryptedPayload(b.data.workflowName),g={};g[b.data.outputKey]=b.data.storageType;e.getNextNode(b.data.updatingDivId,a,d,g);e.getMetricsHandleSecure(a)("strgIncReq",{storageType:b.data.storageType})})});ASPP.when("ASPA","augur-utils").register("augur-reimbursement",function(c,e){var b=c.$,a={$dom:{},workflowName:"",initializeAndResetFlag:!0,currentShownBlurb:1,blurbCount:0,metricsHandle:null,rawData:{}},d=1,g=b("#augur_inr_blurb_prev_button"),
k=b("#augur_inr_blurb_next_button"),h=b("#augur_inr_heading"),f={init:function(a,b){f.hydrate(a,b);f.bind();f.declaratives()},hydrate:function(b,d){a.$dom=b;a.workflowName=d;a.initializeAndResetFlag=!0;a.rawData=e.getRawData(d);a.metricsHandle=e.getMetricsHandleSecure(a.rawData)},bind:function(){a.$dom.body.undelegate("#augur_inr_blurb_prev_button","click").delegate("#augur_inr_blurb_prev_button","click",f.showPreviousBlurb);a.$dom.body.undelegate("#augur_inr_blurb_next_button","click").delegate("#augur_inr_blurb_next_button",
"click",f.showNextBlurb)},declaratives:function(){f.processOrderIdInput();f.processSelectedAsins();f.lookAnotherReturn()},processOrderIdInput:function(){c.declarative("augur_inr_process_order_id_input","click",function(d){if(!f.isDataActionEmpty("augur_inr_submit")){var g=b("#"+d.data.textInputId),c=g.val().trim(),k=/[A-Za-z\d]{3}-\d{7}-\d{7}/;if(c&&c.match(k)){f.clearDataActionAndShowPopoverLoading("augur_inr_submit");var g=e.getRawData(a.workflowName),k=e.getEncryptedPayload(a.workflowName),h={};
h[d.data.orderIdInputKeyName]=c;e.getNextNode(d.data.updatingDivId,g,k,h);a.metricsHandle("orderIdInput",{orderId:c})}else g.addClass("asp-form-error"),c&&b("#augur_inr_invalid_order_id").show()}})},processSelectedAsins:function(){c.declarative("augur_inr_process_selected_asins","click",function(d){if(!f.isDataActionEmpty("augur_inr_submit"))if(0===b("#augur-ui input[name="+d.data.checkboxInputName+"]").filter(":checked").length)b("#augur_inr_select_1_item_msg").show();else{f.clearDataActionAndShowPopoverLoading("augur_inr_submit");
var g;b("#augur-ui input[name="+d.data.checkboxInputName+"]:checked").each(function(){var a=b(this).val().split("::")[1];g=g?g+"|"+a:a});var c=e.getRawData(a.workflowName),k=e.getEncryptedPayload(a.workflowName),h={};h[d.data.pipeSeparatedAsinsKeyName]=g;e.getNextNode(d.data.updatingDivId,c,k,h);a.metricsHandle("selectedAsins",{asins:g})}})},lookAnotherReturn:function(){c.declarative("augur_inr_look_another_return","click",function(b){if(!f.isDataActionEmpty("augur_inr_look_another_return")){f.clearDataActionAndShowPopoverLoading("augur_inr_look_another_return");
var d=e.getRawData(a.workflowName);e.getNextNode(b.data.updatingDivId,d,"","");a.metricsHandle("lookOtherReturn")}})},isDataActionEmpty:function(a){return b("#"+a+" .asp-declarative").attr("data-action")?!1:!0},clearDataActionAndShowPopoverLoading:function(a){b("#"+a+" .asp-declarative").attr("data-action","");b("#augur_inr_popover_loading").removeClass("augur-hidden")},getCurrentShownBlurbElement:function(){return b("#augur_inr_item_number_"+a.currentShownBlurb)},moveFromViewToLeft:function(){var a=
f.getCurrentShownBlurbElement();a.animate({marginLeft:-1*h.outerWidth()});setTimeout(function(){a.hide()},275)},moveFromViewToRight:function(a){var b=f.getCurrentShownBlurbElement();b.animate({marginLeft:h.outerWidth()});setTimeout(function(){b.hide()},275)},moveIntoView:function(){var a=f.getCurrentShownBlurbElement();a.show();a.animate({marginLeft:"0px"})},showNextBlurb:function(){f.updateDomElements();a.initializeAndResetFlag&&f.initializeAndReset();f.moveFromViewToLeft();setTimeout(function(){a.currentShownBlurb++;
f.moveIntoView();2===a.currentShownBlurb&&f.enableButton(g);a.currentShownBlurb===d&&f.disableButton(k)},100)},showPreviousBlurb:function(){f.updateDomElements();f.moveFromViewToRight();setTimeout(function(){a.currentShownBlurb--;f.moveIntoView();1===a.currentShownBlurb&&f.disableButton(g);a.currentShownBlurb===d-1&&f.enableButton(k)},100)},enableButton:function(a){a.removeClass("asp-button-disabled");a.find("button").attr("disabled",!1)},disableButton:function(a){a.addClass("asp-button-disabled");
a.find("button").attr("disabled",!0)},initializeAndReset:function(){a.blurbCount=c.$(".augur-inr-blurb-content").length;d=a.blurbCount;a.currentShownBlurb=1;f.updateDomElements();a.initializeAndResetFlag=!1},updateDomElements:function(){g=c.$("#augur_inr_blurb_prev_button");k=c.$("#augur_inr_blurb_next_button");h=c.$("#augur_inr_heading")}};return{init:f.init}});ASPP.when("ASPA","augur-utils").register("augur-listing",function(c,e){var b=c.$,a={$dom:{},workflowName:"",initializeAndResetFlag:!0,
currentShownBlurb:1,blurbCount:0,isCaseCreatedBlurbPresent:!1,isCaseCreatedBlurbShown:!1,isHmdPollPresent:!1,metricsHandle:null,rawData:{}},d=1,g=b("#augur_nle_blurb_prev_button"),k=b("#augur_nle_blurb_next_button"),h=b("#augur_nle_heading"),f={init:function(a,b){f.hydrate(a,b);f.bind();f.declaratives()},hydrate:function(b,d){a.$dom=b;a.workflowName=d;a.initializeAndResetFlag=!0;a.rawData=e.getRawData(d);a.metricsHandle=e.getMetricsHandleSecure(a.rawData)},bind:function(){a.$dom.body.undelegate("#augur_nle_blurb_prev_button",
"click").delegate("#augur_nle_blurb_prev_button","click",f.showPreviousBlurb);a.$dom.body.undelegate("#augur_nle_blurb_next_button","click").delegate("#augur_nle_blurb_next_button","click",f.showNextBlurb);a.$dom.body.undelegate("#augur_nle_help_hmd_yes","click").delegate("#augur_nle_help_hmd_yes","click",f.hmdYes);a.$dom.body.undelegate("#augur_nle_help_hmd_no","click").delegate("#augur_nle_help_hmd_no","click",f.hmdNo)},hmdYes:function(){b("#augur_nle_help_hmd_question").slideUp();b("#augur_nle_help_hmd_yes_message").slideDown();
a.metricsHandle("hmdYes")},hmdNo:function(){b("#augur_nle_help_hmd_question").slideUp();b("#augur_nle_help_hmd_no_message").slideDown();f.createCase("hmdCaseCreate")},getCurrentWorkflowState:function(){return e.getCurrentWorkflowState(a.workflowName)},declaratives:function(){f.processMfnListingInput();f.processFbaListingInput();f.lookAnotherItem();f.processSelectedRadioOption();f.setItemDetailsIntoState();f.showListingBlurbs();f.askForCreateCase()},showListingBlurbs:function(){c.declarative("augur_nle_review_and_fix",
"click",function(b){if(!f.isDataActionEmpty("augur_nle_submit")){f.clearDataActionAndShowPopoverLoading("augur_nle_submit");var d=e.getRawData(a.workflowName),g=e.getEncryptedPayload(a.workflowName);e.getNextNode(b.data.updatingDivId,d,g,{dummy_key:"dummy_value"});a.metricsHandle("showBlurbs")}})},processMfnListingInput:function(){c.declarative("augur_nle_process_mfn_listing_input","click",function(d){if(!f.isDataActionEmpty("augur_nle_submit")){var g=b("#"+d.data.textInputId),c=g.val().trim();if(""===
c)g.addClass("asp-form-error");else{f.clearDataActionAndShowPopoverLoading("augur_nle_submit");var g=e.getRawData(a.workflowName),k=e.getEncryptedPayload(a.workflowName),h={};h[d.data.asinSkuFnskuInputKeyName]=c;h[d.data.isItemFbaKeyName]=!1;h[d.data.asinDetailsListObjectKeyName]="myi_listings_by_filter_type";e.getNextNode(d.data.updatingDivId,g,k,h);a.metricsHandle("nleMfnInput",{nleInputValue:c})}}})},processFbaListingInput:function(){c.declarative("augur_nle_process_fba_listing_input","click",
function(d){if(!f.isDataActionEmpty("augur_nle_submit")){var g=b("#"+d.data.textInputId),c=b("#augur-ui input[name="+d.data.radioOptionName+"]"),k=g.val().trim();if(""===k)g.addClass("asp-form-error");else if(0!==c.filter(":checked").length){f.clearDataActionAndShowPopoverLoading("augur_nle_submit");var g=e.getRawData(a.workflowName),h=e.getEncryptedPayload(a.workflowName),r="Fulfilled by: Amazon"===c.filter(":checked").val()?!0:!1,n="X"===k[0]?!0:!1,u={};u[d.data.asinSkuFnskuInputKeyName]=k;u[d.data.isItemFbaKeyName]=
r;u[d.data.asinDetailsListObjectKeyName]=!0===r?"afn_listings_by_filter_type":"myi_listings_by_filter_type";u[d.data.isPotentialFnskuKeyName]=n;e.getNextNode(d.data.updatingDivId,g,h,u);a.metricsHandle("nleFbaInput",{nleFbaInputValue:k+"-"+c.filter(":checked").val()})}}})},lookAnotherItem:function(){c.declarative("augur_nle_look_another_listing","click",function(d){if(!f.isDataActionEmpty("augur_nle_look_another_listing")){f.clearDataActionAndShowPopoverLoading("augur_nle_look_another_listing");var b=
e.getRawData(a.workflowName);e.getNextNode(d.data.updatingDivId,b,"","");a.metricsHandle("lookOtherItem")}})},setItemDetailsIntoState:function(){c.declarative("augur_nle_set_item_details_into_state","click",function(d){if(!f.isDataActionEmpty("augur_nle_submit")){f.clearDataActionAndShowPopoverLoading("augur_nle_submit");for(var g=e.getRawData(a.workflowName),c=e.getEncryptedPayload(a.workflowName),k={},h=b("#augur_nle_product_details_key_value").data("value").split("::")[0].split("|"),r=b("#augur_nle_product_details_key_value").data("value").split("::")[1].split("|"),
n=0;n<h.length;n++)k["augur_nle_"+h[n]]=r[n].trim();e.getNextNode(d.data.updatingDivId,g,c,k);a.metricsHandle("itemDetails",{keys:h.toString(),values:r.toString})}})},processSelectedRadioOption:function(){c.declarative("augur_nle_process_selected_radio_option","click",function(d){if(!f.isDataActionEmpty("augur_nle_submit")){var g=b("#augur-ui input[name="+d.data.radioInputName+"]");if(0!==g.filter(":checked").length){f.clearDataActionAndShowPopoverLoading("augur_nle_submit");for(var c=e.getRawData(a.workflowName),
k=e.getEncryptedPayload(a.workflowName),h={},r=g.filter(":checked").val().split("::")[0].split("|"),g=g.filter(":checked").val().split("::")[1].split("|"),n=0;n<r.length;n++)h["augur_nle_"+r[n]]=g[n].trim();e.getNextNode(d.data.updatingDivId,c,k,h);a.metricsHandle("skuRadioSelected",{keys:r.toString(),values:g.toString})}}})},isDataActionEmpty:function(a){return b("#"+a+" .asp-declarative").attr("data-action")?!1:!0},clearDataActionAndShowPopoverLoading:function(a){b("#"+a+" .asp-declarative").attr("data-action",
"");b("#augur_nle_popover_loading").removeClass("asp-hidden")},getCurrentShownBlurbElement:function(){return b("#augur_nle_blurb_num_"+a.currentShownBlurb)},moveFromViewToLeft:function(){var a=f.getCurrentShownBlurbElement();a.animate({marginLeft:-1*h.outerWidth()});setTimeout(function(){a.hide()},275)},moveFromViewToRight:function(a){var d=f.getCurrentShownBlurbElement();d.animate({marginLeft:h.outerWidth()});setTimeout(function(){d.hide()},275)},moveIntoView:function(){var a=f.getCurrentShownBlurbElement();
a.show();a.animate({marginLeft:"0px"})},askForCreateCase:function(){c.declarative("augur_nle_create_case_yes","click",function(d){f.isDataActionEmpty("augur_nle_case_create_yes")||(b("#augur_nle_case_create_yes .asp-declarative").attr("data-action",""),b("#augur_nle_get_case_id_loading").slideDown(),a.isCaseCreatedBlurbShown=!0,f.createCase("autoCaseCreate"))})},createCase:function(d){var g="",c={dummy_key:"dummy_value"},f=e.getRawData(a.workflowName),k=e.getEncryptedPayload(a.workflowName);"autoCaseCreate"===
d?(g=b("#augur_nle_case_text_input_area").val(),c.augur_nle_case_details_by_merchant=g,e.getNextNode("augur_nle_ask_for_case_creation",f,k,c)):"hmdCaseCreate"===d&&e.getNextNode("augur_nle_hmd_poll",f,k,c)},showNextBlurb:function(){f.updateDomElements();a.initializeAndResetFlag&&f.initializeAndReset();f.moveFromViewToLeft();setTimeout(function(){a.currentShownBlurb++;f.moveIntoView();a.blurbMetricSent[a.currentShownBlurb]||(f.sendBlurbMetrics(),a.currentShownBlurb===d&&a.metricsHandle("allBlurbsRead"),
a.blurbMetricSent[a.currentShownBlurb]=!0);a.currentShownBlurb===d&&a.isHmdPollPresent&&c.$("#augur_nle_hmd_poll").show();2===a.currentShownBlurb&&f.enableButton(g);a.currentShownBlurb===d&&f.disableButton(k)},100)},showPreviousBlurb:function(){f.updateDomElements();f.moveFromViewToRight();setTimeout(function(){a.currentShownBlurb--;f.moveIntoView();1===a.currentShownBlurb&&f.disableButton(g);a.currentShownBlurb===d-1&&f.enableButton(k)},100)},sendBlurbMetrics:function(){var d=f.getCurrentShownBlurbElement(),
b=d.data("issue-name"),d=d.data("issue-type");a.metricsHandle("blurbShown",{blurbNumber:a.currentShownBlurb,totalBlurbCount:a.blurbCount,issueType:d,issueName:b})},enableButton:function(a){a.removeClass("asp-button-disabled");a.find("button").attr("disabled",!1)},disableButton:function(a){a.addClass("asp-button-disabled");a.find("button").attr("disabled",!0)},initializeAndReset:function(){a.blurbCount=c.$(".augur-nle-listing-blurb-content").length;a.blurbMetricSent=[];for(var b=2;b<=a.blurbCount;b++)a.blurbMetricSent[b]=
!1;a.isCaseCreatedBlurbPresent=0<c.$("#augur_nle_auto_create_case_id").length?!0:!1;a.isHmdPollPresent=0<c.$("#augur_nle_hmd_poll").length?!0:!1;a.isCaseCreatedBlurbShown=!1;d=a.blurbCount;a.currentShownBlurb=1;f.updateDomElements();a.initializeAndResetFlag=!1},updateDomElements:function(){g=c.$("#augur_nle_blurb_prev_button");k=c.$("#augur_nle_blurb_next_button");h=c.$("#augur_nle_heading")}};return{init:f.init,createNleCase:f.createCase}});ASPP.when("ASPA","augur-utils","augur-constants").register("augur-payments",
function(c,e,b){var a={augur_why_not_paid_wf:{bound:!1,radio_declarative:"augur-payment-selection",radio_selector:"#augur-ui input[name=WNP-payment-selection]:checked",submit_declarative:"augur-submit-payment-for-investigation",submit_variable_name:"selected_payment_id",selection_error_selector:"#augur_WNP_selection_error"},augur_when_get_paid_wf:{bound:!1,radio_declarative:"augur-order-selection",radio_selector:"#augur-ui input[name=WPO-order-selection]:checked",submit_declarative:"augur-submit-order-for-investigation",
submit_variable_name:"selected_order_id",selection_error_selector:"#augur_WPO_selection_error",input_box_id_selector:"#augur-wpo-order-input",input_box_validation_message_selector:"#augur-mismatch-order",order_id_regex:"^[sScC\\d]{2}\\d-\\d{7}-\\d{7}$"},workflowName:null,selected_id:null,rawData:{}},d={init:function(b){a.hasOwnProperty(b)&&(a.workflowName=b,a.selected_id=null,a.rawData=e.getRawData(b),b=d.getWorkflowConfiguration(),b.bound||d.bind(),b.input_box_id_selector!==l&&d.bindInputBox(b))},
bind:function(){var a=d.getWorkflowConfiguration();c.declarative(a.radio_declarative,"click",function(b){d.pullIdFromRadio(b,a.radio_selector)});c.declarative(a.submit_declarative,"click",function(b){d.submitId(b,a.submit_variable_name)});a.bound=!0},pullIdFromRadio:function(a,b){var e=c.$(b);0!==e.length&&(d.setSelectedId(a.data[e.val()]),d.clearInputBox())},setSelectedId:function(b){a.selected_id=b;b=d.getErrorElement();d.hideError(b)},submitId:function(g,k){if(d.validateSelection()&&!g.$target.hasClass(b.CLASSES.DISABLED)){g.$target.addClass(b.CLASSES.DISABLED);
var h=e.getRawData(a.workflowName),f=e.getEncryptedPayload(a.workflowName),p={};p[k]=a.selected_id;c.$("#augur-popover").removeClass(b.CLASSES.SPAUI_HIDDEN);e.getNextNode(a.workflowName,h,f,p)}else h=d.getErrorElement(),d.showError(h)},validateSelection:function(){return null!==a.selected_id&&a.selected_id!==l},getErrorElement:function(){return c.$(a[a.workflowName].selection_error_selector)},showError:function(a){a.hasClass(b.CLASSES.SPAUI_HIDDEN)&&(a.hide(),a.removeClass(b.CLASSES.SPAUI_HIDDEN),
a.slideDown(b.VALUES.TRANSITION_TIME))},hideError:function(a){a.hasClass(b.CLASSES.SPAUI_HIDDEN)||a.slideUp(b.VALUES.TRANSITION_TIME,function(){a.addClass(b.CLASSES.SPAUI_HIDDEN)})},bindInputBox:function(a){c.$(b.SELECTORS.AUGUR_MAIN).delegate(a.input_box_id_selector,"keyup",function(){var b=c.$(this),e=new RegExp(a.order_id_regex),f=c.$(a.input_box_validation_message_selector);e.test(b.val())?d.hideError(f):d.showError(f);d.setSelectedId(b.val());d.clearRadioButton()})},clearInputBox:function(){var a=
d.getWorkflowConfiguration();a.input_box_id_selector!==l&&(c.$(a.input_box_id_selector).val(""),a=c.$(a.input_box_validation_message_selector),d.hideError(a))},clearRadioButton:function(){c.$(d.getWorkflowConfiguration().radio_selector).attr("checked",!1)},getWorkflowConfiguration:function(){return a[a.workflowName]}};return{init:d.init}});ASPP.when("ASPA","spaui-external-metrics").register("augur-utils",function(c,e){var b=c.$,a={getNextNode:function(d,g,e,h,f){var p=g.client,q=g.workflowAbbr;
f=g.workflowId?g.workflowId:f;var l=g.currentNodeId,m;m=p&&q?a.getMetricsHandleSecure(g):!1;g=h?a.jsonStringify(h):"";c.post("/help/workflow/execute-workflow",{params:{workflowId:f,client:p,envelope:e,newAttributes:g},success:function(a,c,g){d&&"NONE"!==d.toUpperCase()&&(c=b("<div />"),c.html(a),0!==c.find(".augur-workflow-error").length?(b("#"+d).html(a),m&&m("getNodeErr",{currentNodeId:l})):(b("#"+d).html(""),c.children().each(function(){var a=b(this).attr("augur-wf-append-to");b(this).children().each(function(){null!==
this.id&&""!==this.id&&b("#"+a).find("#"+this.id).remove()});b("#"+a).append(b(this).html());b(this).remove()}),m&&m("getNodeSucc",{currentNodeId:l})))},error:function(a,c,g){d&&"NONE"!==d.toUpperCase()&&(b("#"+d).html("<div class='asp-padding-base'><b>We are facing some technical issues as of now, please try again later.<b></div>"),m&&m("getNodeFatal",{currentNodeId:l}))},timeout:8E4})},jsonStringify:function(b){return q.JSON&&JSON.stringify?JSON.stringify(b):a.mapToString(b)},mapToString:function(b){var c=
"{",e=0;if(null!==b)for(var h in b)b.hasOwnProperty(h)&&(0!==e&&(c+=", "),c+='"'+h+'":"'+a.escapeJson(b[h])+'"',e++);return c+"}"},escapeJson:function(a){var b=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};b.lastIndex=0;return a.replace(b,function(a){return c[a]?c[a]:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})},getWevObjectTypeName:function(){return"workflow_execution_variables"},
setIntoState:function(a,b,c,e){for(var f=0;f<a.racerXObjects.length;f++)a.racerXObjects[f].objectType===b&&(a.racerXObjects[f].attributes[c]=e)},getCurrentWorkflowState:function(a){return c.state(a+"_state")},getWorkflowId:function(b){return a.getValueOfKeyFromState(b,"workflow_id")},getCurrentNodeId:function(b){return a.getValueOfKeyFromState(b,"current_node")},getValueOfKeyFromState:function(b,c){for(var e=0;e<b.racerXObjects.length;e++)if(b.racerXObjects[e].objectType===a.getWevObjectTypeName())return b.racerXObjects[e].attributes[c]},
getMetricsHandleSecure:function(a){var b=a.client;a=a.workflowAbbr;if(b&&a)return e.register(a,b);console.error("[AugurUI] Client name or workflowAbbr cannot be null or empty.")},waitForWorkflowToBeRead:function(b,c){setTimeout(function(){a.postMetricsIfWorkflowIsPresent(b,c)},c.timeout)},postMetricsIfWorkflowIsPresent:function(d,c){var e=c.elements_to_check.split("|"),h=!0;b.each(e,function(b,d){a.isElementPresent(d)||(h=!1)});h&&d(c.summary,c)},isElementPresent:function(d){d=b("#"+d);return 0<d.length&&
d.is(":visible")&&a.isScrolledIntoView(d)?!0:!1},isScrolledIntoView:function(a){var c=b(q).scrollTop(),e=c+b(q).height(),h=a.offset().top;return h+a.height()<=e&&h>=c},getRawData:function(a){return c.state(a+"_raw_data")},getEncryptedPayload:function(a){return c.state(a+"_encrypted_data").data}};return{getNextNode:a.getNextNode,getWevObjectTypeName:a.getWevObjectTypeName,setIntoState:a.setIntoState,getValueOfKeyFromState:a.getValueOfKeyFromState,getWorkflowId:a.getWorkflowId,getCurrentNodeId:a.getCurrentNodeId,
getCurrentWorkflowState:a.getCurrentWorkflowState,waitForWorkflowToBeRead:a.waitForWorkflowToBeRead,getMetricsHandleSecure:a.getMetricsHandleSecure,getRawData:a.getRawData,getEncryptedPayload:a.getEncryptedPayload}});ASPP.when("ASPA","augur-utils").execute(function(c,e){c.declarative("augur_wd_check_asin_fnsku","click",function(b){$("#augur_wd_submit .asp-declarative").attr("data-action","");$("#augur_wd_popover_loading").removeClass("asp-hidden");var a=$("#"+b.data.textInputId).val(),
a=a.trim(),d=e.getRawData(b.data.workflowName),c=e.getEncryptedPayload(b.data.workflowName),k={};k[b.data.outputKey]=a;e.getNextNode(b.data.updatingDivId,d,c,k);e.getMetricsHandleSecure(d)("asinFnskuInpt",{textInputValue:a})});c.declarative("augur_wd_check_case_details","click",function(b){$("#augur_wd_done .asp-declarative").attr("data-action","");$("#augur_wd_popover_loading").removeClass("asp-hidden");var a=$("#"+b.data.caseDetailsInputId).val(),c=e.getRawData(b.data.workflowName),g=e.getEncryptedPayload(b.data.workflowName),
k={};k[b.data.outputKey]=a;e.getNextNode(b.data.updatingDivId,c,g,k);e.getMetricsHandleSecure(c)("caseDetailsInpt",{caseDetailsInputValue:a})});c.declarative("augur_wd_radio_fnsku_selected","click",function(b){$("#augur_wd_next .asp-declarative").attr("data-action","");$("#augur_wd_popover_loading").removeClass("asp-hidden");var a=$("input[name=radioButtonSelectValue]").filter(":checked").val(),c=e.getRawData(b.data.workflowName),g=e.getEncryptedPayload(b.data.workflowName),k={};k[b.data.outputKey]=
a;e.getNextNode(b.data.updatingDivId,c,g,k);e.getMetricsHandleSecure(c)("fnskuInpt",{fnskuInputValue:a})});c.declarative("augur_wd_radio_selected","click",function(b){$("input[name=radioButtonSelectValue]").is(":checked")&&$("#augur_wd_next").removeClass("asp-hidden")});c.declarative("augur_wd_check_another_asin_fnsku","click",function(b){$("#augur_wd_popover_loading_link").removeClass("asp-hidden");var a=c.state(b.data.workflowName+"_raw_data");e.getNextNode(b.data.updatingDivId,a,"","")})});
ASPP.when("ASPA","augur-utils").execute(function(c,e){c.declarative("augur_whl_check_sku_fnsku","click",function(b){$("#augur_whl_submit .asp-declarative").attr("data-action","");$("#augur_whl_popover_loading").removeClass("asp-hidden");var a=$("#"+b.data.textInputId).val(),a=a.trim(),c=e.getRawData(b.data.workflowName),g=e.getEncryptedPayload(b.data.workflowName),k={};k[b.data.outputKey]=a;e.getNextNode(b.data.updatingDivId,c,g,k);e.getMetricsHandleSecure(c)("skuFnskuInpt",{textInputValue:a})});
c.declarative("augur_whl_radio_fnsku_selected","click",function(b){$("#augur_whl_next .asp-declarative").attr("data-action","");$("#augur_whl_popover_loading").removeClass("asp-hidden");var a=$("input[name=radioButtonSelectValue]").filter(":checked").val(),c=e.getRawData(b.data.workflowName),g=e.getEncryptedPayload(b.data.workflowName),k={};k[b.data.outputKey]=a;e.getNextNode(b.data.updatingDivId,c,g,k);e.getMetricsHandleSecure(c)("fnskuInpt",{fnskuInputValue:a})});c.declarative("augur_whl_radio_selected",
"click",function(b){$("input[name=radioButtonSelectValue]").is(":checked")&&$("#augur_whl_next").removeClass("asp-hidden")})})});