(function(q){var m=window.AmazonUIPageJS||window.P,n=m._namespace||m.attributeErrors,d=n?n("AugurAUIAssets"):m;d.guardFatal?d.guardFatal(q)(d,window):d.execute(function(){q(d,window)})})(function(q,m,n){ASPP.when("ASPA","augur-listing","augur-utils","augur-constants","augur-common","augur-payments","augur-reimbursement","augur-rrc").register("augur",function(d,e,c,a,b,g,k,h){var f=d.$,l={},p={},r={init:function(a){r.hydrate();p[a]&&p[a].init(l,a);b.init(a);g.init(a);r.renderFirstNode(a)},hydrate:function(){p.augur_no_listing_error_wf=
e;p.augur_in_reimbursements_wf=k;p.augur_rrc_wf=h;l.augur=d.$(a.SELECTORS.AUGUR_MAIN);l.spaui=d.$("#spaui");l.body=d.$(document.body)},renderFirstNode:function(a){f("div[augur-wf-append-to]").each(function(){var a=f(this).attr("augur-wf-append-to");f(this).children().each(function(){null!==this.id&&""!==this.id&&f("#"+a).find("#"+this.id).remove()});f("#"+a).append(f(this).html());f(this).remove()});var b=c.getCurrentWorkflowState(a);c.getMetricsHandle(b)("wfDisplayed",{workflowName:a})}};return{init:r.init}});
ASPP.when("ASPA","augur-utils","augur-constants").register("augur-common",function(d,e,c){var a={metricsHandle:null,initialized:!1},b={init:function(c){a.metricsHandle=e.getMetricsHandleFromName(c);a.initialized||(a.initialized=!0,b.eventSubscribe(),d.declarative("augur_link_transition","click",function(a){var b=d.state(a.data.workflowName+"_state");e.setIntoState(b,e.getWevObjectTypeName(),a.data.outputKey,a.data.choice);e.getNextNode(a.data.workflowId,a.data.currentNodeId,b,a.data.updatingDivId)}),
b.delegateBind())},delegateBind:function(){d.$(c.SELECTORS.AUGUR_MAIN).undelegate(c.SELECTORS.PRIMARY_ACTION_BUTTON,"click");d.$(c.SELECTORS.AUGUR_MAIN).delegate(c.SELECTORS.PRIMARY_ACTION_BUTTON,"click",function(c){a.metricsHandle("mainButtonClick",b.getAdditionalDataFromEvent(c))});d.$(c.SELECTORS.AUGUR_MAIN).undelegate(c.SELECTORS.SECONDARY_ACTION_BUTTON,"click");d.$(c.SELECTORS.AUGUR_MAIN).delegate(c.SELECTORS.SECONDARY_ACTION_BUTTON,"click",function(c){a.metricsHandle("secondaryActionClick",
b.getAdditionalDataFromEvent(c))})},getAdditionalDataFromEvent:function(a){var b=d.$(a.target).parent(),c;b.hasClass("asp-declarative")&&(c=b.data("action"));return{url:a.target.href,action:c}},eventSubscribe:function(){d.on("spaui:newPage",function(){0<d.$(c.SELECTORS.AUGUR_MAIN).length&&b.delegateBind()})}};return{init:b.init,rebind:b.delegateBind}});ASPP.when("ASPA").register("augur-constants",function(d){var e=function(a){return Object.freeze!==n?Object.freeze(a):a};d=e({AUGUR_MAIN:"#augur-ui",
PRIMARY_ACTION_BUTTON:".augur-wf-primary-button",SECONDARY_ACTION_BUTTON:".augur-wf-secondary-link"});var c=e({TRANSITION_TIME:200}),e=e({DISABLED:"augur-disabled",SPAUI_HIDDEN:"asp-hidden"});return{SELECTORS:d,VALUES:c,CLASSES:e}});ASPP.when("ASPA","augur-utils").execute(function(d,e){d.declarative("augur_ir_link_click","click",function(c){$("#augur_ir_link .asp-declarative").attr("data-action","");c=d.state(c.data.workflowName+"_state");e.getMetricsHandle(c)("usrClkWFLink",{userClickDescription:"User clicked on MYI link in the WF"});
m.location.href="/gp/ssof/knights/items-list.html"})});ASPP.when("ASPA","augur-utils").register("augur-rrc",function(d,e){var c={$dom:{},workflowName:"",metricsHandle:null},a={init:function(b,c){a.hydrate(b,c);a.declaratives()},hydrate:function(b,g){c.$dom=b;c.workflowName=g;c.metricsHandle=e.getMetricsHandle(a.getCurrentWorkflowState())},declaratives:function(){a.processOrderIdInput();a.checkOtherOrder()},processOrderIdInput:function(){d.declarative("augur_rrc_check_order_id","click",
function(b){if(!a.isDataActionEmpty("augur_rrc_submit")){var g=$("#"+b.data.textInputId),d=g.val().trim(),h=/[A-Za-z\d]{3}-\d{7}-\d{7}/;""!==d&&d.match(h)?(a.clearDataActionAndShowPopoverLoading("augur_rrc_submit"),g=a.getCurrentWorkflowState(),e.setIntoState(g,e.getWevObjectTypeName(),b.data.outputKey,d),e.getNextNode(g,b.data.updatingDivId),c.metricsHandle("rrcOrderInput",{orderId:d})):(g.addClass("asp-form-error"),d&&$("#augur_rrc_invalid_order_id_msg_div").show())}})},checkOtherOrder:function(){d.declarative("augur_rrc_check_another_order",
"click",function(b){if(!a.isDataActionEmpty("augur_rrc_check_another_order_div")){a.clearDataActionAndShowPopoverLoading("augur_rrc_check_another_order_div");var g=a.getCurrentWorkflowState();e.getStartNode(g,b.data.updatingDivId);c.metricsHandle("lookOtherOrder")}})},isDataActionEmpty:function(a){return $("#"+a+" .asp-declarative").attr("data-action")?!1:!0},getCurrentWorkflowState:function(){return e.getCurrentWorkflowState(c.workflowName)},clearDataActionAndShowPopoverLoading:function(a){$("#"+
a+" .asp-declarative").attr("data-action","");$("#augur_rrc_popover_loading").removeClass("asp-hidden")}};return{init:a.init}});ASPP.when("ASPA","augur-utils").execute(function(d,e){d.declarative("augur-fsl-increase-storage","click",function(c){$("#augur_fsl_current_usage_stats .asp-declarative").attr("data-action","");$("#augur_fsl_popover_loading").removeClass("asp-hidden");var a=d.state(c.data.workflowName+"_state");e.setIntoState(a,e.getWevObjectTypeName(),c.data.outputKey,c.data.storageType);
e.getNextNode(a,c.data.updatingDivId);e.getMetricsHandle(a)("strgIncReq",{storageType:c.data.storageType})})});ASPP.when("ASPA","augur-utils").register("augur-reimbursement",function(d,e){var c=d.$,a={$dom:{},workflowName:"",initializeAndResetFlag:!0,currentShownBlurb:1,blurbCount:0,metricsHandle:null},b=1,g=c("#augur_inr_blurb_prev_button"),k=c("#augur_inr_blurb_next_button"),h=c("#augur_inr_heading"),f={init:function(a,b){f.hydrate(a,b);f.bind();f.declaratives()},hydrate:function(b,
c){a.$dom=b;a.workflowName=c;a.initializeAndResetFlag=!0;a.metricsHandle=e.getMetricsHandle(f.getCurrentWorkflowState())},bind:function(){a.$dom.body.undelegate("#augur_inr_blurb_prev_button","click").delegate("#augur_inr_blurb_prev_button","click",f.showPreviousBlurb);a.$dom.body.undelegate("#augur_inr_blurb_next_button","click").delegate("#augur_inr_blurb_next_button","click",f.showNextBlurb)},getCurrentWorkflowState:function(){return e.getCurrentWorkflowState(a.workflowName)},declaratives:function(){f.processOrderIdInput();
f.processSelectedAsins();f.lookAnotherReturn()},processOrderIdInput:function(){d.declarative("augur_inr_process_order_id_input","click",function(b){if(!f.isDataActionEmpty("augur_inr_submit")){var g=c("#"+b.data.textInputId),d=g.val().trim(),h=/[A-Za-z\d]{3}-\d{7}-\d{7}/;d&&d.match(h)?(f.clearDataActionAndShowPopoverLoading("augur_inr_submit"),g=f.getCurrentWorkflowState(),e.setIntoState(g,e.getWevObjectTypeName(),b.data.orderIdInputKeyName,d),e.getNextNode(g,b.data.updatingDivId),a.metricsHandle("orderIdInput",
{orderId:d})):(g.addClass("asp-form-error"),d&&c("#augur_inr_invalid_order_id").show())}})},processSelectedAsins:function(){d.declarative("augur_inr_process_selected_asins","click",function(b){if(!f.isDataActionEmpty("augur_inr_submit"))if(0===c("#augur-ui input[name="+b.data.checkboxInputName+"]").filter(":checked").length)c("#augur_inr_select_1_item_msg").show();else{f.clearDataActionAndShowPopoverLoading("augur_inr_submit");var g;c("#augur-ui input[name="+b.data.checkboxInputName+"]:checked").each(function(){var a=
c(this).val().split("::")[1];g=g?g+"|"+a:a});var d=f.getCurrentWorkflowState();e.setIntoState(d,e.getWevObjectTypeName(),b.data.pipeSeparatedAsinsKeyName,g);e.getNextNode(d,b.data.updatingDivId);a.metricsHandle("selectedAsins",{asins:g})}})},lookAnotherReturn:function(){d.declarative("augur_inr_look_another_return","click",function(b){if(!f.isDataActionEmpty("augur_inr_look_another_return")){f.clearDataActionAndShowPopoverLoading("augur_inr_look_another_return");var c=f.getCurrentWorkflowState();
e.getStartNode(c,b.data.updatingDivId);a.metricsHandle("lookOtherReturn")}})},isDataActionEmpty:function(a){return c("#"+a+" .asp-declarative").attr("data-action")?!1:!0},clearDataActionAndShowPopoverLoading:function(a){c("#"+a+" .asp-declarative").attr("data-action","");c("#augur_inr_popover_loading").removeClass("augur-hidden")},getCurrentShownBlurbElement:function(){return c("#augur_inr_item_number_"+a.currentShownBlurb)},moveFromViewToLeft:function(){var a=f.getCurrentShownBlurbElement();a.animate({marginLeft:-1*
h.outerWidth()});setTimeout(function(){a.hide()},275)},moveFromViewToRight:function(a){var b=f.getCurrentShownBlurbElement();b.animate({marginLeft:h.outerWidth()});setTimeout(function(){b.hide()},275)},moveIntoView:function(){var a=f.getCurrentShownBlurbElement();a.show();a.animate({marginLeft:"0px"})},showNextBlurb:function(){f.updateDomElements();a.initializeAndResetFlag&&f.initializeAndReset();f.moveFromViewToLeft();setTimeout(function(){a.currentShownBlurb++;f.moveIntoView();2===a.currentShownBlurb&&
f.enableButton(g);a.currentShownBlurb===b&&f.disableButton(k)},100)},showPreviousBlurb:function(){f.updateDomElements();f.moveFromViewToRight();setTimeout(function(){a.currentShownBlurb--;f.moveIntoView();1===a.currentShownBlurb&&f.disableButton(g);a.currentShownBlurb===b-1&&f.enableButton(k)},100)},enableButton:function(a){a.removeClass("asp-button-disabled");a.find("button").attr("disabled",!1)},disableButton:function(a){a.addClass("asp-button-disabled");a.find("button").attr("disabled",!0)},initializeAndReset:function(){a.blurbCount=
d.$(".augur-inr-blurb-content").length;b=a.blurbCount;a.currentShownBlurb=1;f.updateDomElements();a.initializeAndResetFlag=!1},updateDomElements:function(){g=d.$("#augur_inr_blurb_prev_button");k=d.$("#augur_inr_blurb_next_button");h=d.$("#augur_inr_heading")}};return{init:f.init}});ASPP.when("ASPA","augur-utils").register("augur-listing",function(d,e){var c=d.$,a={$dom:{},workflowName:"",initializeAndResetFlag:!0,currentShownBlurb:1,blurbCount:0,isCaseCreatedBlurbPresent:!1,isCaseCreatedBlurbShown:!1,
isHmdPollPresent:!1,metricsHandle:null},b=1,g=c("#augur_nle_blurb_prev_button"),k=c("#augur_nle_blurb_next_button"),h=c("#augur_nle_heading"),f={init:function(a,b){f.hydrate(a,b);f.bind();f.declaratives()},hydrate:function(b,c){a.$dom=b;a.workflowName=c;a.initializeAndResetFlag=!0;a.metricsHandle=e.getMetricsHandle(f.getCurrentWorkflowState())},bind:function(){a.$dom.body.undelegate("#augur_nle_blurb_prev_button","click").delegate("#augur_nle_blurb_prev_button","click",f.showPreviousBlurb);a.$dom.body.undelegate("#augur_nle_blurb_next_button",
"click").delegate("#augur_nle_blurb_next_button","click",f.showNextBlurb);a.$dom.body.undelegate("#augur_nle_help_hmd_yes","click").delegate("#augur_nle_help_hmd_yes","click",f.hmdYes);a.$dom.body.undelegate("#augur_nle_help_hmd_no","click").delegate("#augur_nle_help_hmd_no","click",f.hmdNo)},hmdYes:function(){c("#augur_nle_help_hmd_question").slideUp();c("#augur_nle_help_hmd_yes_message").slideDown();a.metricsHandle("hmdYes")},hmdNo:function(){c("#augur_nle_help_hmd_question").slideUp();c("#augur_nle_help_hmd_no_message").slideDown();
f.createCase("hmdCaseCreate")},getCurrentWorkflowState:function(){return e.getCurrentWorkflowState(a.workflowName)},declaratives:function(){f.processMfnListingInput();f.processFbaListingInput();f.lookAnotherItem();f.processSelectedRadioOption();f.setItemDetailsIntoState();f.showListingBlurbs();f.askForCreateCase()},showListingBlurbs:function(){d.declarative("augur_nle_review_and_fix","click",function(b){if(!f.isDataActionEmpty("augur_nle_submit")){f.clearDataActionAndShowPopoverLoading("augur_nle_submit");
var c=f.getCurrentWorkflowState();e.getNextNode(c,b.data.updatingDivId);a.metricsHandle("showBlurbs")}})},processMfnListingInput:function(){d.declarative("augur_nle_process_mfn_listing_input","click",function(b){if(!f.isDataActionEmpty("augur_nle_submit")){var g=c("#"+b.data.textInputId),d=g.val().trim();""===d?g.addClass("asp-form-error"):(f.clearDataActionAndShowPopoverLoading("augur_nle_submit"),g=f.getCurrentWorkflowState(),e.setIntoState(g,e.getWevObjectTypeName(),b.data.asinSkuFnskuInputKeyName,
d),e.setIntoState(g,e.getWevObjectTypeName(),b.data.isItemFbaKeyName,!1),e.setIntoState(g,e.getWevObjectTypeName(),b.data.asinDetailsListObjectKeyName,"myi_listings_by_filter_type"),e.getNextNode(g,b.data.updatingDivId),a.metricsHandle("nleMfnInput",{nleInputValue:d}))}})},processFbaListingInput:function(){d.declarative("augur_nle_process_fba_listing_input","click",function(b){if(!f.isDataActionEmpty("augur_nle_submit")){var g=c("#"+b.data.textInputId),d=c("#augur-ui input[name="+b.data.radioOptionName+
"]"),h=g.val().trim();if(""===h)g.addClass("asp-form-error");else if(0!==d.filter(":checked").length){f.clearDataActionAndShowPopoverLoading("augur_nle_submit");var g=f.getCurrentWorkflowState(),k="Fulfilled by: Amazon"===d.filter(":checked").val()?!0:!1,m=!0===k?"afn_listings_by_filter_type":"myi_listings_by_filter_type",n="X"===h[0]?!0:!1;e.setIntoState(g,e.getWevObjectTypeName(),b.data.asinSkuFnskuInputKeyName,h);e.setIntoState(g,e.getWevObjectTypeName(),b.data.isItemFbaKeyName,k);e.setIntoState(g,
e.getWevObjectTypeName(),b.data.asinDetailsListObjectKeyName,m);e.setIntoState(g,e.getWevObjectTypeName(),b.data.isPotentialFnskuKeyName,n);e.getNextNode(g,b.data.updatingDivId);a.metricsHandle("nleFbaInput",{nleFbaInputValue:h+"-"+d.filter(":checked").val()})}}})},lookAnotherItem:function(){d.declarative("augur_nle_look_another_listing","click",function(b){if(!f.isDataActionEmpty("augur_nle_look_another_listing")){f.clearDataActionAndShowPopoverLoading("augur_nle_look_another_listing");var c=f.getCurrentWorkflowState();
e.getStartNode(c,b.data.updatingDivId);a.metricsHandle("lookOtherItem")}})},setItemDetailsIntoState:function(){d.declarative("augur_nle_set_item_details_into_state","click",function(b){if(!f.isDataActionEmpty("augur_nle_submit")){f.clearDataActionAndShowPopoverLoading("augur_nle_submit");for(var g=f.getCurrentWorkflowState(),d=c("#augur_nle_product_details_key_value").data("value").split("::")[0].split("|"),h=c("#augur_nle_product_details_key_value").data("value").split("::")[1].split("|"),k=0;k<
d.length;k++)e.setIntoState(g,e.getWevObjectTypeName(),"augur_nle_"+d[k],h[k].trim());e.getNextNode(g,b.data.updatingDivId);a.metricsHandle("itemDetails",{keys:d.toString(),values:h.toString})}})},processSelectedRadioOption:function(){d.declarative("augur_nle_process_selected_radio_option","click",function(b){if(!f.isDataActionEmpty("augur_nle_submit")){var g=c("#augur-ui input[name="+b.data.radioInputName+"]");if(0!==g.filter(":checked").length){f.clearDataActionAndShowPopoverLoading("augur_nle_submit");
for(var d=f.getCurrentWorkflowState(),h=g.filter(":checked").val().split("::")[0].split("|"),g=g.filter(":checked").val().split("::")[1].split("|"),k=0;k<h.length;k++)e.setIntoState(d,e.getWevObjectTypeName(),"augur_nle_"+h[k],g[k].trim());e.getNextNode(d,b.data.updatingDivId);a.metricsHandle("skuRadioSelected",{keys:h.toString(),values:g.toString})}}})},isDataActionEmpty:function(a){return c("#"+a+" .asp-declarative").attr("data-action")?!1:!0},clearDataActionAndShowPopoverLoading:function(a){c("#"+
a+" .asp-declarative").attr("data-action","");c("#augur_nle_popover_loading").removeClass("asp-hidden")},getCurrentShownBlurbElement:function(){return c("#augur_nle_blurb_num_"+a.currentShownBlurb)},moveFromViewToLeft:function(){var a=f.getCurrentShownBlurbElement();a.animate({marginLeft:-1*h.outerWidth()});setTimeout(function(){a.hide()},275)},moveFromViewToRight:function(a){var b=f.getCurrentShownBlurbElement();b.animate({marginLeft:h.outerWidth()});setTimeout(function(){b.hide()},275)},moveIntoView:function(){var a=
f.getCurrentShownBlurbElement();a.show();a.animate({marginLeft:"0px"})},askForCreateCase:function(){d.declarative("augur_nle_create_case_yes","click",function(b){f.isDataActionEmpty("augur_nle_case_create_yes")||(f.clearDataActionAndShowPopoverLoading("augur_nle_case_create_yes"),a.isCaseCreatedBlurbShown=!0,f.createCase("autoCaseCreate"))})},createCase:function(b){var g=f.getCurrentWorkflowState(),d="";"autoCaseCreate"===b&&(d=c("#augur_nle_case_text_input_area").val());e.setIntoState(g,e.getWevObjectTypeName(),
"augur_nle_case_details_by_merchant",d);e.getValueOfKeyFromState(g,"augur_nle_auto_case_create")&&(d=c("#augur_nle_auto_create_case_id").html(),e.setIntoState(g,e.getWevObjectTypeName(),"augur_nle_auto_case_creation_content_issues_list",d));e.getNextNode(g,"augur_nle_dummy_div");setTimeout(function(){var g=f.getCurrentWorkflowState(),d=e.getValueOfKeyFromState(g,"augur_nle_case_created_str"),g=e.getValueOfKeyFromState(g,"augur_nle_case_id");"autoCaseCreate"===b?(c("#augur_nle_ask_for_case_creation").hide(),
c("#augur_nle_popover_loading").hide()):"hmdCaseCreate"===b&&c("#augur_nle_get_case_id_loading").hide();c("#augur_nle_case_id_created_info").html(d);c("#augur_nle_case_id_created_info").slideDown();a.metricsHandle(b,{caseId:g})},3E3)},showNextBlurb:function(){f.updateDomElements();a.initializeAndResetFlag&&f.initializeAndReset();f.moveFromViewToLeft();setTimeout(function(){a.currentShownBlurb++;f.moveIntoView();a.blurbMetricSent[a.currentShownBlurb]||(f.sendBlurbMetrics(),a.currentShownBlurb===b&&
a.metricsHandle("allBlurbsRead"),a.blurbMetricSent[a.currentShownBlurb]=!0);a.currentShownBlurb===b&&a.isHmdPollPresent&&d.$("#augur_nle_hmd_poll").show();2===a.currentShownBlurb&&f.enableButton(g);a.currentShownBlurb===b&&f.disableButton(k)},100)},showPreviousBlurb:function(){f.updateDomElements();f.moveFromViewToRight();setTimeout(function(){a.currentShownBlurb--;f.moveIntoView();1===a.currentShownBlurb&&f.disableButton(g);a.currentShownBlurb===b-1&&f.enableButton(k)},100)},sendBlurbMetrics:function(){var b=
f.getCurrentShownBlurbElement(),g=b.data("issue-name"),b=b.data("issue-type");a.metricsHandle("blurbShown",{blurbNumber:a.currentShownBlurb,totalBlurbCount:a.blurbCount,issueType:b,issueName:g})},enableButton:function(a){a.removeClass("asp-button-disabled");a.find("button").attr("disabled",!1)},disableButton:function(a){a.addClass("asp-button-disabled");a.find("button").attr("disabled",!0)},initializeAndReset:function(){a.blurbCount=d.$(".augur-nle-listing-blurb-content").length;a.blurbMetricSent=
[];for(var g=2;g<=a.blurbCount;g++)a.blurbMetricSent[g]=!1;a.isCaseCreatedBlurbPresent=0<d.$("#augur_nle_auto_create_case_id").length?!0:!1;a.isHmdPollPresent=0<d.$("#augur_nle_hmd_poll").length?!0:!1;a.isCaseCreatedBlurbShown=!1;b=a.blurbCount;a.currentShownBlurb=1;f.updateDomElements();a.initializeAndResetFlag=!1},updateDomElements:function(){g=d.$("#augur_nle_blurb_prev_button");k=d.$("#augur_nle_blurb_next_button");h=d.$("#augur_nle_heading")}};return{init:f.init,createNleCase:f.createCase}});
ASPP.when("ASPA","augur-utils","augur-constants").register("augur-payments",function(d,e,c){var a={augur_why_not_paid_wf:{bound:!1,radio_declarative:"augur-payment-selection",radio_selector:"#augur-ui input[name=WNP-payment-selection]:checked",submit_declarative:"augur-submit-payment-for-investigation",submit_variable_name:"selected_payment_id",selection_error_selector:"#augur_WNP_selection_error"},augur_when_get_paid_wf:{bound:!1,radio_declarative:"augur-order-selection",radio_selector:"#augur-ui input[name=WPO-order-selection]:checked",
submit_declarative:"augur-submit-order-for-investigation",submit_variable_name:"selected_order_id",selection_error_selector:"#augur_WPO_selection_error",input_box_id_selector:"#augur-wpo-order-input",input_box_validation_message_selector:"#augur-mismatch-order",input_box_wev_validator:"order_id_regex"},workflowName:null,selected_id:null},b={init:function(g){a.hasOwnProperty(g)&&(a.workflowName=g,a.selected_id=null,g=b.getWorkflowConfiguration(),g.bound||b.bind(),g.input_box_id_selector!==n&&b.bindInputBox(g))},
bind:function(){var a=b.getWorkflowConfiguration();d.declarative(a.radio_declarative,"click",function(c){b.pullIdFromRadio(c,a.radio_selector)});d.declarative(a.submit_declarative,"click",function(c){b.submitId(c,a.submit_variable_name)});a.bound=!0},pullIdFromRadio:function(a,c){var e=d.$(c);0!==e.length&&(b.setSelectedId(a.data[e.val()]),b.clearInputBox())},setSelectedId:function(c){a.selected_id=c;c=b.getErrorElement();b.hideError(c)},submitId:function(g,k){if(b.validateSelection()&&!g.$target.hasClass(c.CLASSES.DISABLED)){g.$target.addClass(c.CLASSES.DISABLED);
var h=e.getCurrentWorkflowState(a.workflowName);e.setIntoState(h,e.getWevObjectTypeName(),k,a.selected_id);d.$("#augur-popover").removeClass(c.CLASSES.SPAUI_HIDDEN);e.getNextNode(h,a.workflowName)}else h=b.getErrorElement(),b.showError(h)},validateSelection:function(){return null!==a.selected_id&&a.selected_id!==n},getErrorElement:function(){return d.$(a[a.workflowName].selection_error_selector)},showError:function(a){a.hasClass(c.CLASSES.SPAUI_HIDDEN)&&(a.hide(),a.removeClass(c.CLASSES.SPAUI_HIDDEN),
a.slideDown(c.VALUES.TRANSITION_TIME))},hideError:function(a){a.hasClass(c.CLASSES.SPAUI_HIDDEN)||a.slideUp(c.VALUES.TRANSITION_TIME,function(){a.addClass(c.CLASSES.SPAUI_HIDDEN)})},bindInputBox:function(g){d.$(c.SELECTORS.AUGUR_MAIN).delegate(g.input_box_id_selector,"keyup",function(){var c=d.$(this),h=new RegExp(e.getValueOfKeyFromState(e.getCurrentWorkflowState(a.workflowName),g.input_box_wev_validator)),f=d.$(g.input_box_validation_message_selector);h.test(c.val())?b.hideError(f):b.showError(f);
b.setSelectedId(c.val());b.clearRadioButton()})},clearInputBox:function(){var a=b.getWorkflowConfiguration();a.input_box_id_selector!==n&&(d.$(a.input_box_id_selector).val(""),a=d.$(a.input_box_validation_message_selector),b.hideError(a))},clearRadioButton:function(){d.$(b.getWorkflowConfiguration().radio_selector).attr("checked",!1)},getWorkflowConfiguration:function(){return a[a.workflowName]}};return{init:b.init}});ASPP.when("ASPA","spaui-external-metrics").register("augur-utils",
function(d,e){var c=d.$,a={getNextNode:function(b,g,e,h){h=b?a.getWorkflowId(b):h;var f=b?a.getCurrentNodeId(b):"",l=b?a.getMetricsHandle(b):!1;b=b?a.jsonStringify(b):"";d.post("/help/workflow/execute-workflow",{params:{workflowId:h,currentNodeId:f,state:b,client:e},success:function(a,b,d){g&&"NONE"!==g.toUpperCase()&&(b=c("<div />"),b.html(a),0!==b.find(".augur-workflow-error").length?(c("#"+g).html(a),l&&l("getNodeErr",{currentNodeId:f})):(c("#"+g).html(""),b.children().each(function(){var a=c(this).attr("augur-wf-append-to");
c(this).children().each(function(){null!==this.id&&""!==this.id&&c("#"+a).find("#"+this.id).remove()});c("#"+a).append(c(this).html());c(this).remove()}),l&&l("getNodeSucc",{currentNodeId:f})))},error:function(a,b,d){g&&"NONE"!==g.toUpperCase()&&(c("#"+g).html("<div class='asp-padding-base'><b>We are facing some technical issues as of now, please try again later.<b></div>"),l&&l("getNodeFatal",{currentNodeId:f}))},timeout:8E4})},getStartNode:function(b,c){var d=a.getWorkflowId(b),e=a.getValueOfKeyFromState(b,
"client");a.getNextNode("",c,e,d)},jsonStringify:function(b){return m.JSON&&JSON.stringify?JSON.stringify(b):a.mapToString(b)},mapToString:function(b){var c="{",d=0;if(null!==b)for(var e in b)b.hasOwnProperty(e)&&(0!==d&&(c+=", "),c+='"'+e+'":"'+a.escapeJson(b[e])+'"',d++);return c+"}"},escapeJson:function(a){var c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,d={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',
"\\":"\\\\"};c.lastIndex=0;return a.replace(c,function(a){return d[a]?d[a]:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})},getWevObjectTypeName:function(){return"workflow_execution_variables"},setIntoState:function(a,c,d,e){for(var f=0;f<a.racerXObjects.length;f++)a.racerXObjects[f].objectType===c&&(a.racerXObjects[f].attributes[d]=e)},getCurrentWorkflowState:function(a){return d.state(a+"_state")},getWorkflowId:function(b){return a.getValueOfKeyFromState(b,"workflow_id")},getCurrentNodeId:function(b){return a.getValueOfKeyFromState(b,
"current_node")},getValueOfKeyFromState:function(b,c){for(var d=0;d<b.racerXObjects.length;d++)if(b.racerXObjects[d].objectType===a.getWevObjectTypeName())return b.racerXObjects[d].attributes[c]},getMetricsHandleFromName:function(b){return a.getMetricsHandle(a.getCurrentWorkflowState(b))},getMetricsHandle:function(b){for(var c,d,h=0;h<b.racerXObjects.length;h++)b.racerXObjects[h].objectType===a.getWevObjectTypeName()&&(c=b.racerXObjects[h].attributes.client,d=b.racerXObjects[h].attributes.workflow_abbr);
if(c&&d)return e.register(d,c);console.error("[AugurUI] Client name or workflowAbbr cannot be null or empty.")},waitForWorkflowToBeRead:function(b,c){setTimeout(function(){a.postMetricsIfWorkflowIsPresent(b,c)},c.timeout)},postMetricsIfWorkflowIsPresent:function(b,d){var e=d.elements_to_check.split("|"),h=!0;c.each(e,function(b,c){a.isElementPresent(c)||(h=!1)});h&&b(d.summary,d)},isElementPresent:function(b){b=c("#"+b);return 0<b.length&&b.is(":visible")&&a.isScrolledIntoView(b)?!0:!1},isScrolledIntoView:function(a){var d=
c(m).scrollTop(),e=d+c(m).height(),h=a.offset().top;return h+a.height()<=e&&h>=d}};return{getNextNode:a.getNextNode,getStartNode:a.getStartNode,getWevObjectTypeName:a.getWevObjectTypeName,setIntoState:a.setIntoState,getValueOfKeyFromState:a.getValueOfKeyFromState,getWorkflowId:a.getWorkflowId,getCurrentNodeId:a.getCurrentNodeId,getMetricsHandle:a.getMetricsHandle,getMetricsHandleFromName:a.getMetricsHandleFromName,getCurrentWorkflowState:a.getCurrentWorkflowState,waitForWorkflowToBeRead:a.waitForWorkflowToBeRead}});
ASPP.when("ASPA","augur-utils").execute(function(d,e){d.declarative("augur_wd_check_asin_fnsku","click",function(c){$("#augur_wd_submit .asp-declarative").attr("data-action","");$("#augur_wd_popover_loading").removeClass("asp-hidden");var a=d.state(c.data.workflowName+"_state"),b=$("#"+c.data.textInputId).val(),b=b.trim();e.setIntoState(a,e.getWevObjectTypeName(),c.data.outputKey,b);e.getNextNode(a,c.data.updatingDivId);e.getMetricsHandle(a)("asinFnskuInpt",{textInputValue:b})});d.declarative("augur_wd_check_case_details",
"click",function(c){$("#augur_wd_done .asp-declarative").attr("data-action","");$("#augur_wd_popover_loading").removeClass("asp-hidden");var a=d.state(c.data.workflowName+"_state"),b=$("#"+c.data.caseDetailsInputId).val();e.setIntoState(a,e.getWevObjectTypeName(),c.data.outputKey,b);e.getNextNode(a,c.data.updatingDivId);e.getMetricsHandle(a)("caseDetailsInpt",{caseDetailsInputValue:b})});d.declarative("augur_wd_radio_fnsku_selected","click",function(c){$("#augur_wd_next .asp-declarative").attr("data-action",
"");$("#augur_wd_popover_loading").removeClass("asp-hidden");var a=d.state(c.data.workflowName+"_state"),b=$("input[name=radioButtonSelectValue]").filter(":checked").val();e.setIntoState(a,e.getWevObjectTypeName(),c.data.outputKey,b);e.getNextNode(a,c.data.updatingDivId);e.getMetricsHandle(a)("fnskuInpt",{fnskuInputValue:b})});d.declarative("augur_wd_radio_selected","click",function(c){$("input[name=radioButtonSelectValue]").is(":checked")&&$("#augur_wd_next").removeClass("asp-hidden")});d.declarative("augur_wd_check_another_asin_fnsku",
"click",function(c){$("#augur_wd_popover_loading_link").removeClass("asp-hidden");var a=d.state(c.data.workflowName+"_state");e.getValueOfKeyFromState(a,"client");e.getStartNode(a,c.data.updatingDivId)})});ASPP.when("ASPA","augur-utils").execute(function(d,e){d.declarative("augur_whl_check_sku_fnsku","click",function(c){$("#augur_whl_submit .asp-declarative").attr("data-action","");$("#augur_whl_popover_loading").removeClass("asp-hidden");var a=d.state(c.data.workflowName+"_state"),b=
$("#"+c.data.textInputId).val(),b=b.trim();e.setIntoState(a,e.getWevObjectTypeName(),c.data.outputKey,b);e.getNextNode(a,c.data.updatingDivId);e.getMetricsHandle(a)("skuFnskuInpt",{textInputValue:b})});d.declarative("augur_whl_radio_fnsku_selected","click",function(c){$("#augur_whl_next .asp-declarative").attr("data-action","");$("#augur_whl_popover_loading").removeClass("asp-hidden");var a=d.state(c.data.workflowName+"_state"),b=$("input[name=radioButtonSelectValue]").filter(":checked").val();e.setIntoState(a,
e.getWevObjectTypeName(),c.data.outputKey,b);e.getNextNode(a,c.data.updatingDivId);e.getMetricsHandle(a)("fnskuInpt",{fnskuInputValue:b})});d.declarative("augur_whl_radio_selected","click",function(c){$("input[name=radioButtonSelectValue]").is(":checked")&&$("#augur_whl_next").removeClass("asp-hidden")})})});